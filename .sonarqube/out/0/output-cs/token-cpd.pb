é
fC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\App_Start\BundleConfig.cs
	namespace 	
ProyectoTest
 
{ 
public 

class 
BundleConfig 
{ 
public		 
static		 
void		 
RegisterBundles		 *
(		* +
BundleCollection		+ ;
bundles		< C
)		C D
{

 	
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) ;
); <
.< =
Include= D
(D E
$str 7
)7 8
)8 9
;9 :
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str 4
)4 5
)5 6
;6 7
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str /
)/ 0
)0 1
;1 2
bundles 
. 
Add 
( 
new 
Bundle "
(" #
$str# 8
)8 9
.9 :
Include: A
(A B
$str 9
) 
) 
; 
bundles 
. 
Add 
( 
new 
StyleBundle '
(' (
$str( 7
)7 8
.8 9
Include9 @
(@ A
$str 3
,3 4
$str *
,* +
$str 2
,2 3
$str +
,+ ,
$str 5
,5 6
$str   1
)  1 2
)  2 3
;  3 4
bundles"" 
."" 
Add"" 
("" 
new"" 
StyleBundle"" '
(""' (
$str""( >
)""> ?
.""? @
Include""@ G
(""G H
$str** D
,**D E
$str++ H
),, 
),, 
;,, 
bundles// 
.// 
Add// 
(// 
new// 
StyleBundle// '
(//' (
$str//( =
)//= >
.//> ?
Include//? F
(//F G
$str66 ;
,66; <
$str99 B
,99B C
$str:: F
,::F G
$str<< 5
,<<5 6
$str?? 1
)AA 
)AA 
;AA 
}BB 	
}CC 
}DD ï
fC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\App_Start\FilterConfig.cs
	namespace 	
ProyectoTest
 
{ 
public 

class 
FilterConfig 
{ 
public 
static 
void !
RegisterGlobalFilters 0
(0 1"
GlobalFilterCollection1 G
filtersH O
)O P
{		 	
filters

 
.

 
Add

 
(

 
new

  
HandleErrorAttribute

 0
(

0 1
)

1 2
)

2 3
;

3 4
} 	
} 
} Û
eC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\App_Start\RouteConfig.cs
	namespace 	
ProyectoTest
 
{		 
public

 

class

 
RouteConfig

 
{ 
public 
static 
void 
RegisterRoutes )
() *
RouteCollection* 9
routes: @
)@ A
{ 	
routes 
. 
IgnoreRoute 
( 
$str ;
); <
;< =
routes 
. 
MapRoute 
( 
name 
: 
$str 
,  
url 
: 
$str 1
,1 2
defaults 
: 
new 
{ 

controller  *
=+ ,
$str- 5
,5 6
action7 =
=> ?
$str@ G
,G H
idI K
=L M
UrlParameterN Z
.Z [
Optional[ c
}d e
) 
; 
} 	
} 
} ù
lC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Controllers\PublicController.cs
	namespace 	
ProyectoTest
 
. 
Controllers "
{ 
public 

class 
PublicController !
:" #

Controller$ .
{ 
private 
static 
Usuario 
oUsuario '
;' (
public 
ActionResult 
Index !
(! "
)" #
{ 	
oUsuario 
= 
new 
Usuario "
(" #
)# $
;$ %
oUsuario 
. 
Correo 
= 
$str 0
;0 1
oUsuario 
. 
	IdUsuario 
=  
$num! "
;" #
oUsuario 
. 
Nombres 
= 
$str '
;' (
Session 
[ 
$str 
] 
=  
oUsuario! )
;) *
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
Index2 "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
}   
}"" ñƒ
jC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Controllers\HomeController.cs
	namespace 	
ProyectoTest
 
. 
Controllers "
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
public 
ActionResult 
Index !
(! "
)" #
{ 	
if 
( 
Session 
[ 
$str !
]! "
==# %
null& *
)* +
return 
RedirectToAction '
(' (
$str( /
,/ 0
$str1 8
)8 9
;9 :
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
	Categoria %
(% &
)& '
{ 	
if 
( 
Session 
[ 
$str !
]! "
==# %
null& *
)* +
return 
RedirectToAction '
(' (
$str( /
,/ 0
$str1 8
)8 9
;9 :
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
Marca !
(! "
)" #
{   	
if!! 
(!! 
Session!! 
[!! 
$str!! !
]!!! "
==!!# %
null!!& *
)!!* +
return"" 
RedirectToAction"" '
(""' (
$str""( /
,""/ 0
$str""1 8
)""8 9
;""9 :
return$$ 
View$$ 
($$ 
)$$ 
;$$ 
}%% 	
public'' 
ActionResult'' 
Tiendas'' #
(''# $
)''$ %
{(( 	
if)) 
()) 
Session)) 
[)) 
$str)) !
]))! "
==))# %
null))& *
)))* +
return** 
RedirectToAction** '
(**' (
$str**( /
,**/ 0
$str**1 8
)**8 9
;**9 :
return,, 
View,, 
(,, 
),, 
;,, 
}-- 	
public// 
ActionResult// 
Reserva// #
(//# $
)//$ %
{00 	
if11 
(11 
Session11 
[11 
$str11 !
]11! "
==11# %
null11& *
)11* +
return22 
RedirectToAction22 '
(22' (
$str22( /
,22/ 0
$str221 8
)228 9
;229 :
return44 
View44 
(44 
)44 
;44 
}55 	
public88 
ActionResult88 
Producto88 $
(88$ %
)88% &
{99 	
if:: 
(:: 
Session:: 
[:: 
$str:: !
]::! "
==::# %
null::& *
)::* +
return;; 
RedirectToAction;; '
(;;' (
$str;;( /
,;;/ 0
$str;;1 8
);;8 9
;;;9 :
return== 
View== 
(== 
)== 
;== 
}>> 	
public@@ 
ActionResult@@ 
Tienda@@ "
(@@" #
)@@# $
{AA 	
ifBB 
(BB 
SessionBB 
[BB 
$strBB !
]BB! "
==BB# %
nullBB& *
)BB* +
returnCC 
RedirectToActionCC '
(CC' (
$strCC( /
,CC/ 0
$strCC1 8
)CC8 9
;CC9 :
returnEE 
ViewEE 
(EE 
)EE 
;EE 
}FF 	
publicHH 
ActionResultHH 
ClientesHH $
(HH$ %
)HH% &
{II 	
ifJJ 
(JJ 
SessionJJ 
[JJ 
$strJJ !
]JJ! "
==JJ# %
nullJJ& *
)JJ* +
returnKK 
RedirectToActionKK '
(KK' (
$strKK( /
,KK/ 0
$strKK1 8
)KK8 9
;KK9 :
returnMM 
ViewMM 
(MM 
)MM 
;MM 
}NN 	
[PP 	
HttpGetPP	 
]PP 
publicQQ 

JsonResultQQ 
ListarCategoriaQQ )
(QQ) *
)QQ* +
{QQ, -
ListRR 
<RR 
	CategoriaRR 
>RR 
oListaRR "
=RR# $
newRR% (
ListRR) -
<RR- .
	CategoriaRR. 7
>RR7 8
(RR8 9
)RR9 :
;RR: ;
oListaSS 
=SS 
CategoriaLogicaSS $
.SS$ %
	InstanciaSS% .
.SS. /
ListarSS/ 5
(SS5 6
)SS6 7
;SS7 8
returnTT 
JsonTT 
(TT 
newTT 
{TT 
dataTT "
=TT# $
oListaTT% +
}TT, -
,TT- .
JsonRequestBehaviorTT/ B
.TTB C
AllowGetTTC K
)TTK L
;TTL M
}UU 	
[WW 	
HttpPostWW	 
]WW 
publicXX 

JsonResultXX 
GuardarCategoriaXX *
(XX* +
	CategoriaXX+ 4
objetoXX5 ;
)XX; <
{YY 	
boolZZ 
	respuestaZZ 
=ZZ 
falseZZ "
;ZZ" #
	respuesta[[ 
=[[ 
([[ 
objeto[[ 
.[[  
IdCategoria[[  +
==[[, .
$num[[/ 0
)[[0 1
?[[2 3
CategoriaLogica[[4 C
.[[C D
	Instancia[[D M
.[[M N
	Registrar[[N W
([[W X
objeto[[X ^
)[[^ _
:[[` a
CategoriaLogica[[b q
.[[q r
	Instancia[[r {
.[[{ |
	Modificar	[[| Ö
(
[[Ö Ü
objeto
[[Ü å
)
[[å ç
;
[[ç é
return\\ 
Json\\ 
(\\ 
new\\ 
{\\ 
	resultado\\ '
=\\( )
	respuesta\\* 3
}\\4 5
,\\5 6
JsonRequestBehavior\\7 J
.\\J K
AllowGet\\K S
)\\S T
;\\T U
}]] 	
[__ 	
HttpPost__	 
]__ 
public`` 

JsonResult`` 
EliminarCategoria`` +
(``+ ,
int``, /
id``0 2
)``2 3
{aa 	
boolbb 
	respuestabb 
=bb 
falsebb "
;bb" #
	respuestacc 
=cc 
CategoriaLogicacc '
.cc' (
	Instanciacc( 1
.cc1 2
Eliminarcc2 :
(cc: ;
idcc; =
)cc= >
;cc> ?
returndd 
Jsondd 
(dd 
newdd 
{dd 
	resultadodd '
=dd( )
	respuestadd* 3
}dd4 5
,dd5 6
JsonRequestBehaviordd7 J
.ddJ K
AllowGetddK S
)ddS T
;ddT U
}ee 	
[hh 	
HttpGethh	 
]hh 
publicii 

JsonResultii 
ListarMarcaii %
(ii% &
)ii& '
{jj 	
Listkk 
<kk 
Marcakk 
>kk 
oListakk 
=kk  
newkk! $
Listkk% )
<kk) *
Marcakk* /
>kk/ 0
(kk0 1
)kk1 2
;kk2 3
oListall 
=ll 
MarcaLogicall  
.ll  !
	Instanciall! *
.ll* +
Listarll+ 1
(ll1 2
)ll2 3
;ll3 4
returnmm 
Jsonmm 
(mm 
newmm 
{mm 
datamm "
=mm# $
oListamm% +
}mm, -
,mm- .
JsonRequestBehaviormm/ B
.mmB C
AllowGetmmC K
)mmK L
;mmL M
}nn 	
[pp 	
HttpPostpp	 
]pp 
publicqq 

JsonResultqq 
GuardarMarcaqq &
(qq& '
Marcaqq' ,
objetoqq- 3
)qq3 4
{rr 	
boolss 
	respuestass 
=ss 
falsess "
;ss" #
	respuestatt 
=tt 
(tt 
objetott 
.tt  
IdMarcatt  '
==tt( *
$numtt+ ,
)tt, -
?tt. /
MarcaLogicatt0 ;
.tt; <
	Instanciatt< E
.ttE F
	RegistrarttF O
(ttO P
objetottP V
)ttV W
:ttX Y
MarcaLogicattZ e
.tte f
	Instanciattf o
.tto p
	Modificarttp y
(tty z
objeto	ttz Ä
)
ttÄ Å
;
ttÅ Ç
returnuu 
Jsonuu 
(uu 
newuu 
{uu 
	resultadouu '
=uu( )
	respuestauu* 3
}uu4 5
,uu5 6
JsonRequestBehavioruu7 J
.uuJ K
AllowGetuuK S
)uuS T
;uuT U
}vv 	
[xx 	
HttpPostxx	 
]xx 
publicyy 

JsonResultyy 
EliminarMarcayy '
(yy' (
intyy( +
idyy, .
)yy. /
{zz 	
bool{{ 
	respuesta{{ 
={{ 
false{{ "
;{{" #
	respuesta|| 
=|| 
MarcaLogica|| #
.||# $
	Instancia||$ -
.||- .
Eliminar||. 6
(||6 7
id||7 9
)||9 :
;||: ;
return}} 
Json}} 
(}} 
new}} 
{}} 
	resultado}} '
=}}( )
	respuesta}}* 3
}}}4 5
,}}5 6
JsonRequestBehavior}}7 J
.}}J K
AllowGet}}K S
)}}S T
;}}T U
}~~ 	
[
ÄÄ 	
HttpGet
ÄÄ	 
]
ÄÄ 
public
ÅÅ 

JsonResult
ÅÅ 
ListarTiendas
ÅÅ '
(
ÅÅ' (
)
ÅÅ( )
{
ÇÇ 	
List
ÉÉ 
<
ÉÉ 
Tiendas
ÉÉ 
>
ÉÉ 
oLista
ÉÉ  
=
ÉÉ! "
new
ÉÉ# &
List
ÉÉ' +
<
ÉÉ+ ,
Tiendas
ÉÉ, 3
>
ÉÉ3 4
(
ÉÉ4 5
)
ÉÉ5 6
;
ÉÉ6 7
oLista
ÑÑ 
=
ÑÑ 
TiendasLogica
ÑÑ "
.
ÑÑ" #
	Instancia
ÑÑ# ,
.
ÑÑ, -
Listar
ÑÑ- 3
(
ÑÑ3 4
)
ÑÑ4 5
;
ÑÑ5 6
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
new
ÖÖ 
{
ÖÖ 
data
ÖÖ "
=
ÖÖ# $
oLista
ÖÖ% +
}
ÖÖ, -
,
ÖÖ- .!
JsonRequestBehavior
ÖÖ/ B
.
ÖÖB C
AllowGet
ÖÖC K
)
ÖÖK L
;
ÖÖL M
}
ÜÜ 	
[
àà 	
HttpGet
àà	 
]
àà 
public
ââ 

JsonResult
ââ 
ListarClientes
ââ (
(
ââ( )
)
ââ) *
{
ää 	
List
ãã 
<
ãã 
Cliente
ãã 
>
ãã 
oLista
ãã  
=
ãã! "
new
ãã# &
List
ãã' +
<
ãã+ ,
Cliente
ãã, 3
>
ãã3 4
(
ãã4 5
)
ãã5 6
;
ãã6 7
oLista
åå 
=
åå 
UsuarioLogica
åå "
.
åå" #
	Instancia
åå# ,
.
åå, -
ListarClientes
åå- ;
(
åå; <
)
åå< =
;
åå= >
return
çç 
Json
çç 
(
çç 
new
çç 
{
çç 
data
çç "
=
çç# $
oLista
çç% +
}
çç, -
,
çç- .!
JsonRequestBehavior
çç/ B
.
ççB C
AllowGet
ççC K
)
ççK L
;
ççL M
}
éé 	
[
ëë 	
HttpPost
ëë	 
]
ëë 
public
íí 

JsonResult
íí 
GuardarTiendas
íí (
(
íí( )
Tiendas
íí) 0
objeto
íí1 7
)
íí7 8
{
ìì 	
bool
îî 
	respuesta
îî 
=
îî 
false
îî "
;
îî" #
	respuesta
ïï 
=
ïï 
(
ïï 
objeto
ïï 
.
ïï  
	IdTiendas
ïï  )
==
ïï* ,
$num
ïï- .
)
ïï. /
?
ïï0 1
TiendasLogica
ïï2 ?
.
ïï? @
	Instancia
ïï@ I
.
ïïI J
	Registrar
ïïJ S
(
ïïS T
objeto
ïïT Z
)
ïïZ [
:
ïï\ ]
TiendasLogica
ïï^ k
.
ïïk l
	Instancia
ïïl u
.
ïïu v
	Modificar
ïïv 
(ïï Ä
objetoïïÄ Ü
)ïïÜ á
;ïïá à
return
ññ 
Json
ññ 
(
ññ 
new
ññ 
{
ññ 
	resultado
ññ '
=
ññ( )
	respuesta
ññ* 3
}
ññ4 5
,
ññ5 6!
JsonRequestBehavior
ññ7 J
.
ññJ K
AllowGet
ññK S
)
ññS T
;
ññT U
}
óó 	
[
öö 	
HttpPost
öö	 
]
öö 
public
õõ 

JsonResult
õõ 
EliminarTiendas
õõ )
(
õõ) *
int
õõ* -
id
õõ. 0
)
õõ0 1
{
úú 	
bool
ùù 
	respuesta
ùù 
=
ùù 
false
ùù "
;
ùù" #
	respuesta
ûû 
=
ûû 
TiendasLogica
ûû %
.
ûû% &
	Instancia
ûû& /
.
ûû/ 0
Eliminar
ûû0 8
(
ûû8 9
id
ûû9 ;
)
ûû; <
;
ûû< =
return
üü 
Json
üü 
(
üü 
new
üü 
{
üü 
	resultado
üü '
=
üü( )
	respuesta
üü* 3
}
üü4 5
,
üü5 6!
JsonRequestBehavior
üü7 J
.
üüJ K
AllowGet
üüK S
)
üüS T
;
üüT U
}
†† 	
[
¢¢ 	
HttpGet
¢¢	 
]
¢¢ 
public
££ 

JsonResult
££ 
ListarProducto
££ (
(
££( )
)
££) *
{
§§ 	
List
•• 
<
•• 
Producto
•• 
>
•• 
oLista
•• !
=
••" #
new
••$ '
List
••( ,
<
••, -
Producto
••- 5
>
••5 6
(
••6 7
)
••7 8
;
••8 9
oLista
¶¶ 
=
¶¶ 
ProductoLogica
¶¶ #
.
¶¶# $
	Instancia
¶¶$ -
.
¶¶- .
Listar
¶¶. 4
(
¶¶4 5
)
¶¶5 6
;
¶¶6 7
oLista
ßß 
=
ßß 
(
ßß 
from
ßß 
o
ßß 
in
ßß 
oLista
ßß  &
select
®® 
new
®®  
Producto
®®! )
(
®®) *
)
®®* +
{
©© 

IdProducto
™™ $
=
™™% &
o
™™' (
.
™™( )

IdProducto
™™) 3
,
™™3 4
Nombre
´´  
=
´´! "
o
´´# $
.
´´$ %
Nombre
´´% +
,
´´+ ,
Descripcion
¨¨ %
=
¨¨& '
o
¨¨( )
.
¨¨) *
Descripcion
¨¨* 5
,
¨¨5 6
OpcionesConCosto
≠≠ *
=
≠≠+ ,
o
≠≠- .
.
≠≠. /
OpcionesConCosto
≠≠/ ?
,
≠≠? @
OpcionesSinCosto
ÆÆ *
=
ÆÆ+ ,
o
ÆÆ- .
.
ÆÆ. /
OpcionesSinCosto
ÆÆ/ ?
,
ÆÆ? @
OpcionExcluyente
ØØ *
=
ØØ+ ,
o
ØØ- .
.
ØØ. /
OpcionExcluyente
ØØ/ ?
,
ØØ? @!
MaxOpcionesSinCosto
∞∞ -
=
∞∞. /
o
∞∞0 1
.
∞∞1 2!
MaxOpcionesSinCosto
∞∞2 E
,
∞∞E F
oMarca
±±  
=
±±! "
o
±±# $
.
±±$ %
oMarca
±±% +
,
±±+ ,

oCategoria
≤≤ $
=
≤≤% &
o
≤≤' (
.
≤≤( )

oCategoria
≤≤) 3
,
≤≤3 4
Precio
≥≥  
=
≥≥! "
o
≥≥# $
.
≥≥$ %
Precio
≥≥% +
,
≥≥+ ,

RutaImagen
¥¥ $
=
¥¥% &
o
¥¥' (
.
¥¥( )

RutaImagen
¥¥) 3
,
¥¥3 4
base64
µµ  
=
µµ! "

utilidades
µµ# -
.
µµ- .
convertirBase64
µµ. =
(
µµ= >
Server
µµ> D
.
µµD E
MapPath
µµE L
(
µµL M
o
µµM N
.
µµN O

RutaImagen
µµO Y
)
µµY Z
)
µµZ [
,
µµ[ \
	extension
∂∂ #
=
∂∂$ %
Path
∂∂& *
.
∂∂* +
GetExtension
∂∂+ 7
(
∂∂7 8
o
∂∂8 9
.
∂∂9 :

RutaImagen
∂∂: D
)
∂∂D E
.
∂∂E F
Replace
∂∂F M
(
∂∂M N
$str
∂∂N Q
,
∂∂Q R
$str
∂∂S U
)
∂∂U V
,
∂∂V W
Activo
∑∑  
=
∑∑! "
o
∑∑# $
.
∑∑$ %
Activo
∑∑% +
,
∑∑+ ,
}
∏∏ 
)
∏∏ 
.
∏∏ 
ToList
∏∏ 
(
∏∏  
)
∏∏  !
;
∏∏! "
var
ππ 

serializer
ππ 
=
ππ 
new
ππ  
System
ππ! '
.
ππ' (
Web
ππ( +
.
ππ+ ,
Script
ππ, 2
.
ππ2 3
Serialization
ππ3 @
.
ππ@ A"
JavaScriptSerializer
ππA U
(
ππU V
)
ππV W
;
ππW X
var
∫∫ 
json
∫∫ 
=
∫∫ 
Json
∫∫ 
(
∫∫ 
new
∫∫ 
{
∫∫  !
data
∫∫" &
=
∫∫' (
oLista
∫∫) /
}
∫∫0 1
,
∫∫1 2!
JsonRequestBehavior
∫∫3 F
.
∫∫F G
AllowGet
∫∫G O
)
∫∫O P
;
∫∫P Q
json
ªª 
.
ªª 
MaxJsonLength
ªª 
=
ªª  
$num
ªª! *
;
ªª* +
return
ºº 
json
ºº 
;
ºº 
}
ΩΩ 	
[
øø 	
HttpPost
øø	 
]
øø 
public
¿¿ 

JsonResult
¿¿ 
GuardarProducto
¿¿ )
(
¿¿) *
string
¿¿* 0
objeto
¿¿1 7
,
¿¿7 8 
HttpPostedFileBase
¿¿9 K
imagenArchivo
¿¿L Y
)
¿¿Y Z
{
¡¡ 	
Response
¬¬ 
	oresponse
¬¬ 
=
¬¬  
new
¬¬! $
Response
¬¬% -
(
¬¬- .
)
¬¬. /
{
¬¬0 1
	resultado
¬¬2 ;
=
¬¬< =
true
¬¬> B
,
¬¬B C
mensaje
¬¬D K
=
¬¬L M
$str
¬¬N P
}
¬¬Q R
;
¬¬R S
try
ƒƒ 
{
≈≈ 
Producto
∆∆ 
	oProducto
∆∆ "
=
∆∆# $
new
∆∆% (
Producto
∆∆) 1
(
∆∆1 2
)
∆∆2 3
;
∆∆3 4
	oProducto
«« 
=
«« 
JsonConvert
«« '
.
««' (
DeserializeObject
««( 9
<
««9 :
Producto
««: B
>
««B C
(
««C D
objeto
««D J
)
««J K
;
««K L
string
…… 
GuardarEnRuta
…… $
=
……% &
$str
……' =
;
……= >
string
   
physicalPath
   #
=
  $ %
Server
  & ,
.
  , -
MapPath
  - 4
(
  4 5
$str
  5 K
)
  K L
;
  L M
if
ÃÃ 
(
ÃÃ 
!
ÃÃ 
	Directory
ÃÃ 
.
ÃÃ 
Exists
ÃÃ %
(
ÃÃ% &
physicalPath
ÃÃ& 2
)
ÃÃ2 3
)
ÃÃ3 4
	Directory
ÕÕ 
.
ÕÕ 
CreateDirectory
ÕÕ -
(
ÕÕ- .
physicalPath
ÕÕ. :
)
ÕÕ: ;
;
ÕÕ; <
if
œœ 
(
œœ 
	oProducto
œœ 
.
œœ 

IdProducto
œœ (
==
œœ) +
$num
œœ, -
)
œœ- .
{
–– 
int
—— 
id
—— 
=
—— 
ProductoLogica
—— +
.
——+ ,
	Instancia
——, 5
.
——5 6
	Registrar
——6 ?
(
——? @
	oProducto
——@ I
)
——I J
;
——J K
	oProducto
““ 
.
““ 

IdProducto
““ (
=
““) *
id
““+ -
;
““- .
	oresponse
”” 
.
”” 
	resultado
”” '
=
””( )
	oProducto
””* 3
.
””3 4

IdProducto
””4 >
==
””? A
$num
””B C
?
””D E
false
””F K
:
””L M
true
””N R
;
””R S
if
‘‘ 
(
‘‘ 
	oProducto
‘‘ !
.
‘‘! "

IdProducto
‘‘" ,
==
‘‘- /
$num
‘‘0 1
)
‘‘1 2
{
’’ 
	oresponse
÷÷ !
.
÷÷! "
mensaje
÷÷" )
=
÷÷* +
$str
÷÷, d
+
÷÷e f
	oProducto
÷÷g p
.
÷÷p q

IdProducto
÷÷q {
;
÷÷{ |
}
◊◊ 
}
ÿÿ 
else
ŸŸ 
{
⁄⁄ 
	oresponse
€€ 
.
€€ 
	resultado
€€ '
=
€€( )
ProductoLogica
€€* 8
.
€€8 9
	Instancia
€€9 B
.
€€B C
	Modificar
€€C L
(
€€L M
	oProducto
€€M V
)
€€V W
;
€€W X
	oresponse
‹‹ 
.
‹‹ 
mensaje
‹‹ %
=
‹‹& '
$str
‹‹( `
+
‹‹a b
	oProducto
‹‹c l
.
‹‹l m

IdProducto
‹‹m w
;
‹‹w x
}
›› 
if
ﬂﬂ 
(
ﬂﬂ 
imagenArchivo
ﬂﬂ !
!=
ﬂﬂ" $
null
ﬂﬂ% )
&&
ﬂﬂ* ,
	oProducto
ﬂﬂ- 6
.
ﬂﬂ6 7

IdProducto
ﬂﬂ7 A
!=
ﬂﬂB D
$num
ﬂﬂE F
)
ﬂﬂF G
{
‡‡ 
string
·· 
	extension
·· $
=
··% &
Path
··' +
.
··+ ,
GetExtension
··, 8
(
··8 9
imagenArchivo
··9 F
.
··F G
FileName
··G O
)
··O P
;
··P Q
GuardarEnRuta
‚‚ !
=
‚‚" #
GuardarEnRuta
‚‚$ 1
+
‚‚1 2
$str
‚‚2 5
+
‚‚5 6
	oProducto
‚‚8 A
.
‚‚A B

IdProducto
‚‚B L
.
‚‚L M
ToString
‚‚M U
(
‚‚U V
)
‚‚V W
+
‚‚X Y
	extension
‚‚Z c
;
‚‚c d
	oProducto
„„ 
.
„„ 

RutaImagen
„„ (
=
„„) *
GuardarEnRuta
„„+ 8
;
„„8 9
imagenArchivo
ÂÂ !
.
ÂÂ! "
SaveAs
ÂÂ" (
(
ÂÂ( )
physicalPath
ÂÂ) 5
+
ÂÂ6 7
$str
ÂÂ8 ;
+
ÂÂ< =
	oProducto
ÂÂ> G
.
ÂÂG H

IdProducto
ÂÂH R
.
ÂÂR S
ToString
ÂÂS [
(
ÂÂ[ \
)
ÂÂ\ ]
+
ÂÂ^ _
	extension
ÂÂ` i
)
ÂÂi j
;
ÂÂj k
	oresponse
ÁÁ 
.
ÁÁ 
	resultado
ÁÁ '
=
ÁÁ( )
ProductoLogica
ÁÁ* 8
.
ÁÁ8 9
	Instancia
ÁÁ9 B
.
ÁÁB C"
ActualizarRutaImagen
ÁÁC W
(
ÁÁW X
	oProducto
ÁÁX a
)
ÁÁa b
;
ÁÁb c
}
ËË 
}
ÍÍ 
catch
ÎÎ 
(
ÎÎ 
	Exception
ÎÎ 
e
ÎÎ 
)
ÎÎ 
{
ÏÏ 
	oresponse
ÌÌ 
.
ÌÌ 
	resultado
ÌÌ #
=
ÌÌ$ %
false
ÌÌ& +
;
ÌÌ+ ,
	oresponse
ÓÓ 
.
ÓÓ 
mensaje
ÓÓ !
=
ÓÓ" #
e
ÓÓ$ %
.
ÓÓ% &
Message
ÓÓ& -
;
ÓÓ- .
}
ÔÔ 
return
ÒÒ 
Json
ÒÒ 
(
ÒÒ 
	oresponse
ÒÒ !
,
ÒÒ! "!
JsonRequestBehavior
ÒÒ# 6
.
ÒÒ6 7
AllowGet
ÒÒ7 ?
)
ÒÒ? @
;
ÒÒ@ A
}
ÚÚ 	
[
ÙÙ 	
HttpPost
ÙÙ	 
]
ÙÙ 
public
ıı 

JsonResult
ıı 
EliminarProducto
ıı *
(
ıı* +
int
ıı+ .
id
ıı/ 1
)
ıı1 2
{
ˆˆ 	
bool
˜˜ 
	respuesta
˜˜ 
=
˜˜ 
false
˜˜ "
;
˜˜" #
	respuesta
¯¯ 
=
¯¯ 
ProductoLogica
¯¯ &
.
¯¯& '
	Instancia
¯¯' 0
.
¯¯0 1
Eliminar
¯¯1 9
(
¯¯9 :
id
¯¯: <
)
¯¯< =
;
¯¯= >
return
˘˘ 
Json
˘˘ 
(
˘˘ 
new
˘˘ 
{
˘˘ 
	resultado
˘˘ '
=
˘˘( )
	respuesta
˘˘* 3
}
˘˘4 5
,
˘˘5 6!
JsonRequestBehavior
˘˘7 J
.
˘˘J K
AllowGet
˘˘K S
)
˘˘S T
;
˘˘T U
}
˙˙ 	
}
˚˚ 
public
˝˝ 

class
˝˝ 
Response
˝˝ 
{
˝˝ 
public
ˇˇ 
bool
ˇˇ 
	resultado
ˇˇ 
{
ˇˇ 
get
ˇˇ  #
;
ˇˇ# $
set
ˇˇ% (
;
ˇˇ( )
}
ˇˇ* +
public
ÄÄ 
string
ÄÄ 
mensaje
ÄÄ 
{
ÄÄ 
get
ÄÄ  #
;
ÄÄ# $
set
ÄÄ% (
;
ÄÄ( )
}
ÄÄ* +
}
ÅÅ 
}ÇÇ µ>
kC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Controllers\LoginController.cs
	namespace

 	
ProyectoTest


 
.

 
Controllers

 "
{ 
public 

class 
LoginController  
:! "

Controller# -
{ 
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[ 	
AllowAnonymous	 
] 
[ 	$
ValidateAntiForgeryToken	 !
]! "
public 
ActionResult 
Index !
(! "
string" (
NCorreo) 0
,0 1
string2 8
NContrasena9 D
)D E
{ 	
Usuario 
oUsuario 
= 
new "
Usuario# *
(* +
)+ ,
;, -
oUsuario 
= 
UsuarioLogica $
.$ %
	Instancia% .
.. /
Obtener/ 6
(6 7
NCorreo7 >
,> ?
NContrasena@ K
)K L
;L M
if 
( 
oUsuario 
!= 
null  
)  !
{ 
FormsAuthentication #
.# $
SetAuthCookie$ 1
(1 2
oUsuario2 :
.: ;
Correo; A
,A B
falseC H
)H I
;I J
Session 
[ 
$str !
]! "
=# $
oUsuario% -
;- .
if!! 
(!! 
oUsuario!! 
.!! 
EsAdministrador!! ,
==!!- /
true!!0 4
)!!4 5
{"" 
return## 
RedirectToAction## +
(##+ ,
$str##, 3
,##3 4
$str##5 ;
)##; <
;##< =
}$$ 
else%% 
{&& 
return'' 
RedirectToAction'' +
(''+ ,
$str'', 3
,''3 4
$str''5 =
)''= >
;''> ?
}(( 
})) 
else** 
{++ 
ViewBag,, 
.,, 
Error,, 
=,, 
$str,,  B
;,,B C
return-- 
View-- 
(-- 
)-- 
;-- 
}.. 
}// 	
public22 
ActionResult22 
Registrarse22 '
(22' (
)22( )
{33 	
return44 
View44 
(44 
new44 
Usuario44 #
(44# $
)44$ %
{44& '
Nombres44( /
=44/ 0
$str441 3
,443 4
	Apellidos444 =
=44= >
$str44? A
,44A B
Correo44B H
=44H I
$str44I K
,44K L

Contrasena44L V
=44V W
$str44W Y
,44Y Z
ConfirmarContrasena44Z m
=44m n
$str44n p
}44q r
)44r s
;44s t
}55 	
[77 	
HttpPost77	 
]77 
public88 
ActionResult88 
Registrarse88 '
(88' (
string88( .
NNombres88/ 7
,887 8
string889 ?

NApellidos88@ J
,88J K
string88L R
NCorreo88S Z
,88Z [
string88\ b
NContrasena88c n
,88n o
string88p v!
NConfirmarContrasena	88w ã
)
88ã å
{99 	
Usuario:: 
oUsuario:: 
=:: 
new:: "
Usuario::# *
(::* +
)::+ ,
{;; 
Nombres<< 
=<< 
NNombres<< "
,<<" #
	Apellidos== 
=== 

NApellidos== &
,==& '
Correo>> 
=>> 
NCorreo>>  
,>>  !

Contrasena?? 
=?? 
NContrasena?? (
,??( )
ConfirmarContrasena@@ #
=@@$ % 
NConfirmarContrasena@@& :
,@@: ;
EsAdministradorAA 
=AA  !
falseAA" '
}BB 
;BB 
ifDD 
(DD 
NContrasenaDD 
!=DD  
NConfirmarContrasenaDD 3
)DD3 4
{EE 
ViewBagFF 
.FF 
ErrorFF 
=FF 
$strFF  >
;FF> ?
returnGG 
ViewGG 
(GG 
oUsuarioGG $
)GG$ %
;GG% &
}HH 
elseII 
{II 
intLL 
idusuario_respuestaLL '
=LL( )
UsuarioLogicaLL* 7
.LL7 8
	InstanciaLL8 A
.LLA B
	RegistrarLLB K
(LLK L
oUsuarioLLL T
)LLT U
;LLU V
ifNN 
(NN 
idusuario_respuestaNN '
==NN( *
$numNN+ ,
)NN, -
{OO 
ViewBagPP 
.PP 
ErrorPP !
=PP" #
$strPP$ 8
;PP8 9
returnQQ 
ViewQQ 
(QQ  
)QQ  !
;QQ! "
}SS 
elseTT 
{TT 
returnUU 
RedirectToActionUU +
(UU+ ,
$strUU, 3
,UU3 4
$strUU5 <
)UU< =
;UU= >
}VV 
}WW 
}XX 	
[ZZ 	
HttpPostZZ	 
]ZZ 
public[[ 
ActionResult[[ 
RegistrarCliente[[ ,
([[, -
string[[- 3
Nombre[[4 :
,[[: ;
string[[< B
	Apellidos[[C L
,[[L M
string[[N T
Email[[U Z
,[[Z [
string[[\ b
Telefono[[c k
,[[k l
string[[m s

Cumpleanos[[t ~
,[[~ 
string
[[Ä Ü
Distrito
[[á è
,
[[è ê
int
[[ë î
Calificacion
[[ï °
,
[[° ¢
bool
[[£ ß 
RecibirPromociones
[[® ∫
)
[[∫ ª
{\\ 	
Cliente]] 
cliente]] 
=]] 
new]] !
Cliente]]" )
{^^ 
Nombre__ 
=__ 
Nombre__ 
,__  
	Apellidos`` 
=`` 
	Apellidos`` %
,``% &
Emailaa 
=aa 
Emailaa 
,aa 
Telefonobb 
=bb 
Telefonobb #
,bb# $

Cumpleanoscc 
=cc 

Cumpleanoscc '
,cc' (
Distritodd 
=dd 
Distritodd #
,dd# $
Calificacionee 
=ee 
Calificacionee +
,ee+ ,
RecibirPromocionesff "
=ff# $
RecibirPromocionesff% 7
}gg 
;gg 
UsuarioLogicajj 
clienteLogicajj '
=jj( )
newjj* -
UsuarioLogicajj. ;
(jj; <
)jj< =
;jj= >
intkk 
idClienteRegistradokk #
=kk$ %
clienteLogicakk& 3
.kk3 4
RegistrarClientekk4 D
(kkD E
clientekkE L
)kkL M
;kkM N
ifmm 
(mm 
idClienteRegistradomm #
>mm$ %
$nummm& '
)mm' (
{nn 
CorreoLogicaoo 
.oo 
	Instanciaoo &
.oo& '

EnviarValeoo' 1
(oo1 2
idClienteRegistradooo2 E
,ooE F
EmailooG L
)ooL M
;ooM N
returnqq 
RedirectToActionqq '
(qq' (
$strqq( /
,qq/ 0
$strqq1 8
)qq8 9
;qq9 :
}rr 
elsess 
{tt 
ViewBagvv 
.vv 
Errorvv 
=vv 
$strvv  4
;vv4 5
returnww 
Viewww 
(ww 
)ww 
;ww 
}xx 
}yy 	
}{{ 
}}} 
lC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Controllers\AcercaController.cs
	namespace 	
ProyectoTest
 
. 
Controllers "
{ 
public 

class 
AcercaController !
:" #

Controller$ .
{ 
private 
static 
Usuario 
oUsuario '
;' (
public 
ActionResult 
Index !
(! "
)" #
{ 	
if 
( 
Session 
[ 
$str !
]! "
==# %
null& *
)* +
return 
RedirectToAction '
(' (
$str( /
,/ 0
$str1 8
)8 9
;9 :
else 
oUsuario 
= 
( 
Usuario #
)# $
Session$ +
[+ ,
$str, 5
]5 6
;6 7
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
Termino #
(# $
)$ %
{ 	
if 
( 
Session 
[ 
$str !
]! "
==# %
null& *
)* +
return 
RedirectToAction '
(' (
$str( /
,/ 0
$str1 8
)8 9
;9 :
else   
oUsuario!! 
=!! 
(!! 
Usuario!! #
)!!# $
Session!!$ +
[!!+ ,
$str!!, 5
]!!5 6
;!!6 7
return## 
View## 
(## 
)## 
;## 
}$$ 	
public&& 
ActionResult&& 
Politica&& $
(&&$ %
)&&% &
{'' 	
if(( 
((( 
Session(( 
[(( 
$str(( !
]((! "
==((# %
null((& *
)((* +
return)) 
RedirectToAction)) '
())' (
$str))( /
,))/ 0
$str))1 8
)))8 9
;))9 :
else** 
oUsuario++ 
=++ 
(++ 
Usuario++ #
)++# $
Session++$ +
[+++ ,
$str++, 5
]++5 6
;++6 7
return-- 
View-- 
(-- 
)-- 
;-- 
}.. 	
}11 
}33 ˜¬
lC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Controllers\TiendaController.cs
	namespace 	
ProyectoTest
 
. 
Controllers "
{ 
public 

class 
TiendaController !
:" #

Controller$ .
{ 
private 
static 
Usuario 
oUsuario '
;' (
public 
tarjetaResponse 
datosTar '
=( )
new* -
tarjetaResponse. =
(= >
)> ?
;? @
public 
ActionResult 
Index !
(! "
)" #
{   	
if!! 
(!! 
Session!! 
[!! 
$str!! !
]!!! "
==!!# %
null!!& *
)!!* +
return"" 
RedirectToAction"" '
(""' (
$str""( /
,""/ 0
$str""1 8
)""8 9
;""9 :
else## 
oUsuario$$ 
=$$ 
($$ 
Usuario$$ #
)$$# $
Session$$$ +
[$$+ ,
$str$$, 5
]$$5 6
;$$6 7
return%% 
View%% 
(%% 
)%% 
;%% 
}&& 	
public)) 
ActionResult)) 
Producto)) $
())$ %
int))% (

idproducto))) 3
=))4 5
$num))6 7
)))7 8
{** 	
if++ 
(++ 
Session++ 
[++ 
$str++ !
]++! "
==++# %
null++& *
)++* +
return,, 
RedirectToAction,, '
(,,' (
$str,,( /
,,,/ 0
$str,,1 8
),,8 9
;,,9 :
else-- 
oUsuario.. 
=.. 
(.. 
Usuario.. #
)..# $
Session..$ +
[..+ ,
$str.., 5
]..5 6
;..6 7
Producto00 
	oProducto00 
=00  
new00! $
Producto00% -
(00- .
)00. /
;00/ 0
List11 
<11 
Producto11 
>11 
oLista11 !
=11" #
new11$ '
List11( ,
<11, -
Producto11- 5
>115 6
(116 7
)117 8
;118 9
oLista33 
=33 
ProductoLogica33 #
.33# $
	Instancia33$ -
.33- .
Listar33. 4
(334 5
)335 6
;336 7
	oProducto44 
=44 
(44 
from44 
o44 
in44  "
oLista44# )
where55 
o55  
.55  !

IdProducto55! +
==55, .

idproducto55/ 9
select66 
new66  #
Producto66$ ,
(66, -
)66- .
{77 

IdProducto88 '
=88( )
o88* +
.88+ ,

IdProducto88, 6
,886 7
Nombre99 #
=99$ %
o99& '
.99' (
Nombre99( .
,99. /
Descripcion:: (
=::) *
o::+ ,
.::, -
Descripcion::- 8
,::8 9
OpcionesConCosto;; -
=;;. /
o;;0 1
.;;1 2
OpcionesConCosto;;2 B
,;;B C
OpcionesSinCosto<< -
=<<. /
o<<0 1
.<<1 2
OpcionesSinCosto<<2 B
,<<B C
OpcionExcluyente== -
===. /
o==0 1
.==1 2
OpcionExcluyente==2 B
,==B C
MaxOpcionesSinCosto>> 0
=>>1 2
o>>3 4
.>>4 5
MaxOpcionesSinCosto>>5 H
,>>H I
oMarca?? #
=??$ %
o??& '
.??' (
oMarca??( .
,??. /

oCategoria@@ '
=@@( )
o@@* +
.@@+ ,

oCategoria@@, 6
,@@6 7
PrecioAA #
=AA$ %
oAA& '
.AA' (
PrecioAA( .
,AA. /

RutaImagenBB '
=BB( )
oBB* +
.BB+ ,

RutaImagenBB, 6
,BB6 7
base64CC #
=CC$ %

utilidadesCC& 0
.CC0 1
convertirBase64CC1 @
(CC@ A
ServerCCA G
.CCG H
MapPathCCH O
(CCO P
oCCP Q
.CCQ R

RutaImagenCCR \
)CC\ ]
)CC] ^
,CC^ _
	extensionDD &
=DD' (
PathDD) -
.DD- .
GetExtensionDD. :
(DD: ;
oDD; <
.DD< =

RutaImagenDD= G
)DDG H
.DDH I
ReplaceDDI P
(DDP Q
$strDDQ T
,DDT U
$strDDV X
)DDX Y
,DDY Z
ActivoEE #
=EE$ %
oEE& '
.EE' (
ActivoEE( .
,EE. /
}FF 
)FF 
.FF 
FirstOrDefaultFF *
(FF* +
)FF+ ,
;FF, -
returnHH 
ViewHH 
(HH 
	oProductoHH !
)HH! "
;HH" #
}II 	
publicLL 
ActionResultLL 
CarritoLL #
(LL# $
)LL$ %
{MM 	
ifNN 
(NN 
SessionNN 
[NN 
$strNN !
]NN! "
==NN# %
nullNN& *
)NN* +
returnOO 
RedirectToActionOO '
(OO' (
$strOO( /
,OO/ 0
$strOO1 8
)OO8 9
;OO9 :
elsePP 
oUsuarioQQ 
=QQ 
(QQ 
UsuarioQQ #
)QQ# $
SessionQQ$ +
[QQ+ ,
$strQQ, 5
]QQ5 6
;QQ6 7
returnRR 
ViewRR 
(RR 
)RR 
;RR 
}SS 	
publicVV 
ActionResultVV 
ComprasVV #
(VV# $
)VV$ %
{WW 	
ifXX 
(XX 
SessionXX 
[XX 
$strXX !
]XX! "
==XX# %
nullXX& *
)XX* +
returnYY 
RedirectToActionYY '
(YY' (
$strYY( /
,YY/ 0
$strYY1 8
)YY8 9
;YY9 :
elseZZ 
oUsuario[[ 
=[[ 
([[ 
Usuario[[ #
)[[# $
Session[[$ +
[[[+ ,
$str[[, 5
][[5 6
;[[6 7
return\\ 
View\\ 
(\\ 
)\\ 
;\\ 
}]] 	
[`` 	
HttpPost``	 
]`` 
publicaa 

JsonResultaa 
ListarProductoaa (
(aa( )
intaa) ,
idcategoriaaa- 8
=aa9 :
$numaa; <
,aa< =
stringaa> D
nombreaaE K
=aaL M
$straaN P
)aaP Q
{bb 	
Listcc 
<cc 
Productocc 
>cc 
oListacc !
=cc" #
newcc$ '
Listcc( ,
<cc, -
Productocc- 5
>cc5 6
(cc6 7
)cc7 8
;cc8 9
oListadd 
=dd 
ProductoLogicadd #
.dd# $
	Instanciadd$ -
.dd- .
Listardd. 4
(dd4 5
)dd5 6
;dd6 7
ifgg 
(gg 
idcategoriagg 
!=gg 
$numgg  
)gg  !
{hh 
oListaii 
=ii 
oListaii 
.ii  
Whereii  %
(ii% &
xii& '
=>ii( *
xii+ ,
.ii, -

oCategoriaii- 7
.ii7 8
IdCategoriaii8 C
==iiD F
idcategoriaiiG R
)iiR S
.iiS T
ToListiiT Z
(iiZ [
)ii[ \
;ii\ ]
}jj 
elsekk 
ifkk 
(kk 
nombrekk 
!=kk 
$strkk !
)kk! "
{ll 
oListamm 
=mm 
oListamm 
.mm  
Wheremm  %
(mm% &
xmm& '
=>mm( *
xmm+ ,
.mm, -
Nombremm- 3
.mm3 4
ToLowermm4 ;
(mm; <
)mm< =
.mm= >
Containsmm> F
(mmF G
nombremmG M
.mmM N
ToLowermmN U
(mmU V
)mmV W
)mmW X
)mmX Y
.mmY Z
ToListmmZ `
(mm` a
)mma b
;mmb c
}nn 
oListaoo 
=oo 
oListaoo 
.oo 
Whereoo !
(oo! "
xoo" #
=>oo$ &
xoo' (
.oo( )
Activooo) /
==oo0 2
trueoo3 7
)oo7 8
.oo8 9
ToListoo9 ?
(oo? @
)oo@ A
;ooA B
varpp 

serializerpp 
=pp 
newpp  
Systempp! '
.pp' (
Webpp( +
.pp+ ,
Scriptpp, 2
.pp2 3
Serializationpp3 @
.pp@ A 
JavaScriptSerializerppA U
(ppU V
)ppV W
;ppW X
varqq 
jsonqq 
=qq 
Jsonqq 
(qq 
newqq 
{qq  !
dataqq" &
=qq' (
oListaqq) /
}qq0 1
,qq1 2
JsonRequestBehaviorqq3 F
.qqF G
AllowGetqqG O
)qqO P
;qqP Q
jsonrr 
.rr 
MaxJsonLengthrr 
=rr  
$numrr! *
;rr* +
returnss 
jsonss 
;ss 
}tt 	
[ww 	
HttpGetww	 
]ww 
publicxx 

JsonResultxx 
ListarCategoriaxx )
(xx) *
)xx* +
{yy 	
Listzz 
<zz 
	Categoriazz 
>zz 
oListazz "
=zz# $
newzz% (
Listzz) -
<zz- .
	Categoriazz. 7
>zz7 8
(zz8 9
)zz9 :
;zz: ;
oLista{{ 
={{ 
CategoriaLogica{{ $
.{{$ %
	Instancia{{% .
.{{. /
Listar{{/ 5
({{5 6
){{6 7
;{{7 8
return|| 
Json|| 
(|| 
new|| 
{|| 
data|| "
=||# $
oLista||% +
}||, -
,||- .
JsonRequestBehavior||/ B
.||B C
AllowGet||C K
)||K L
;||L M
}}} 	
[
ÄÄ 	
HttpGet
ÄÄ	 
]
ÄÄ 
public
ÅÅ 

JsonResult
ÅÅ 
ListarTiendas
ÅÅ '
(
ÅÅ' (
)
ÅÅ( )
{
ÇÇ 	
List
ÉÉ 
<
ÉÉ 
Tiendas
ÉÉ 
>
ÉÉ 
oLista
ÉÉ  
=
ÉÉ! "
new
ÉÉ# &
List
ÉÉ' +
<
ÉÉ+ ,
Tiendas
ÉÉ, 3
>
ÉÉ3 4
(
ÉÉ4 5
)
ÉÉ5 6
;
ÉÉ6 7
oLista
ÑÑ 
=
ÑÑ 
TiendasLogica
ÑÑ "
.
ÑÑ" #
	Instancia
ÑÑ# ,
.
ÑÑ, -
Listar
ÑÑ- 3
(
ÑÑ3 4
)
ÑÑ4 5
;
ÑÑ5 6
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
new
ÖÖ 
{
ÖÖ 
data
ÖÖ "
=
ÖÖ# $
oLista
ÖÖ% +
}
ÖÖ, -
,
ÖÖ- .!
JsonRequestBehavior
ÖÖ/ B
.
ÖÖB C
AllowGet
ÖÖC K
)
ÖÖK L
;
ÖÖL M
}
ÜÜ 	
[
ââ 	
HttpGet
ââ	 
]
ââ 
public
ää 

JsonResult
ää !
ListarTiendasActivo
ää -
(
ää- .
)
ää. /
{
ãã 	
List
åå 
<
åå 
Tiendas
åå 
>
åå 
oLista
åå  
=
åå! "
new
åå# &
List
åå' +
<
åå+ ,
Tiendas
åå, 3
>
åå3 4
(
åå4 5
)
åå5 6
;
åå6 7
oLista
çç 
=
çç 
TiendasLogica
çç "
.
çç" #
	Instancia
çç# ,
.
çç, -!
ListarTiendasActivo
çç- @
(
çç@ A
)
ççA B
;
ççB C
return
éé 
Json
éé 
(
éé 
new
éé 
{
éé 
data
éé "
=
éé# $
oLista
éé% +
}
éé, -
,
éé- .!
JsonRequestBehavior
éé/ B
.
ééB C
AllowGet
ééC K
)
ééK L
;
ééL M
}
èè 	
[
ëë 	
HttpPost
ëë	 
]
ëë 
public
íí 

JsonResult
íí 
InsertarCarrito
íí )
(
íí) *
int
íí* -
	IdUsuario
íí. 7
,
íí7 8
int
íí9 <

IdProducto
íí= G
,
ííG H
int
ííI L
Cantidad
ííM U
,
ííU V
string
ííW ]
Adicionales
íí^ i
,
ííi j
decimal
íík r
PrecioExtra
íís ~
,
íí~ 
stringííÄ Ü
Observacionesííá î
)ííî ï
{
ìì 	
int
îî 

_respuesta
îî 
=
îî 
$num
îî 
;
îî 
Carrito
ïï 
oCarrito
ïï 
=
ïï 
new
ïï "
Carrito
ïï# *
(
ïï* +
)
ïï+ ,
{
ññ 
oUsuario
óó 
=
óó 
new
óó 
Usuario
óó &
(
óó& '
)
óó' (
{
óó) *
	IdUsuario
óó+ 4
=
óó5 6
	IdUsuario
óó7 @
}
óóA B
,
óóB C
	oProducto
òò 
=
òò 
new
òò 
Producto
òò  (
(
òò( )
)
òò) *
{
òò+ ,

IdProducto
òò- 7
=
òò8 9

IdProducto
òò: D
}
òòE F
,
òòF G
Cantidad
ôô 
=
ôô 
Cantidad
ôô #
,
ôô# $
Adicionales
öö 
=
öö 
Adicionales
öö )
,
öö) *
PrecioExtra
õõ 
=
õõ 
PrecioExtra
õõ )
,
õõ) *
Observaciones
úú 
=
úú 
Observaciones
úú  -
}
ùù 
;
ùù 

_respuesta
ûû 
=
ûû 
CarritoLogica
ûû &
.
ûû& '
	Instancia
ûû' 0
.
ûû0 1
	Registrar
ûû1 :
(
ûû: ;
oCarrito
ûû; C
)
ûûC D
;
ûûD E
return
üü 
Json
üü 
(
üü 
new
üü 
{
üü 
	respuesta
üü '
=
üü( )

_respuesta
üü* 4
}
üü5 6
,
üü6 7!
JsonRequestBehavior
üü8 K
.
üüK L
AllowGet
üüL T
)
üüT U
;
üüU V
}
†† 	
[
££ 	
HttpGet
££	 
]
££ 
public
§§ 

JsonResult
§§ 
CantidadCarrito
§§ )
(
§§) *
)
§§* +
{
•• 	
int
¶¶ 

_respuesta
¶¶ 
=
¶¶ 
$num
¶¶ 
;
¶¶ 
if
ßß 
(
ßß 
oUsuario
ßß 
!=
ßß 
null
ßß  
)
ßß  !

_respuesta
®® 
=
®® 
CarritoLogica
®® *
.
®®* +
	Instancia
®®+ 4
.
®®4 5
Cantidad
®®5 =
(
®®= >
oUsuario
®®> F
.
®®F G
	IdUsuario
®®G P
)
®®P Q
;
®®Q R
return
©© 
Json
©© 
(
©© 
new
©© 
{
©© 
	respuesta
©© '
=
©©( )

_respuesta
©©* 4
}
©©5 6
,
©©6 7!
JsonRequestBehavior
©©8 K
.
©©K L
AllowGet
©©L T
)
©©T U
;
©©U V
}
™™ 	
[
≠≠ 	
HttpGet
≠≠	 
]
≠≠ 
public
ÆÆ 

JsonResult
ÆÆ 
ObtenerCarrito
ÆÆ (
(
ÆÆ( )
)
ÆÆ) *
{
ØØ 	
List
∞∞ 
<
∞∞ 
Carrito
∞∞ 
>
∞∞ 
oLista
∞∞  
=
∞∞! "
CarritoLogica
∞∞# 0
.
∞∞0 1
	Instancia
∞∞1 :
.
∞∞: ;
Obtener
∞∞; B
(
∞∞B C
oUsuario
∞∞C K
.
∞∞K L
	IdUsuario
∞∞L U
)
∞∞U V
;
∞∞V W
if
≤≤ 
(
≤≤ 
oLista
≤≤ 
.
≤≤ 
Count
≤≤ 
!=
≤≤ 
$num
≤≤  !
)
≤≤! "
{
≥≥ 
oLista
¥¥ 
=
¥¥ 
(
¥¥ 
from
¥¥ 
d
¥¥  
in
¥¥! #
oLista
¥¥$ *
select
µµ  
new
µµ! $
Carrito
µµ% ,
(
µµ, -
)
µµ- .
{
∂∂ 
	IdCarrito
∑∑ '
=
∑∑( )
d
∑∑* +
.
∑∑+ ,
	IdCarrito
∑∑, 5
,
∑∑5 6
	oProducto
∏∏ '
=
∏∏( )
new
∏∏* -
Producto
∏∏. 6
(
∏∏6 7
)
∏∏7 8
{
ππ 

IdProducto
∫∫" ,
=
∫∫- .
d
∫∫/ 0
.
∫∫0 1
	oProducto
∫∫1 :
.
∫∫: ;

IdProducto
∫∫; E
,
∫∫E F
Nombre
ªª" (
=
ªª) *
d
ªª+ ,
.
ªª, -
	oProducto
ªª- 6
.
ªª6 7
Nombre
ªª7 =
,
ªª= >
oMarca
ºº" (
=
ºº) *
new
ºº+ .
Marca
ºº/ 4
(
ºº4 5
)
ºº5 6
{
ºº7 8
Descripcion
ºº9 D
=
ººE F
d
ººG H
.
ººH I
	oProducto
ººI R
.
ººR S
oMarca
ººS Y
.
ººY Z
Descripcion
ººZ e
}
ººf g
,
ººg h
Precio
ΩΩ" (
=
ΩΩ) *
d
ΩΩ+ ,
.
ΩΩ, -
	oProducto
ΩΩ- 6
.
ΩΩ6 7
Precio
ΩΩ7 =
,
ΩΩ= >

RutaImagen
ææ" ,
=
ææ- .
d
ææ/ 0
.
ææ0 1
	oProducto
ææ1 :
.
ææ: ;

RutaImagen
ææ; E
,
ææE F
base64
øø" (
=
øø) *

utilidades
øø+ 5
.
øø5 6
convertirBase64
øø6 E
(
øøE F
Server
øøF L
.
øøL M
MapPath
øøM T
(
øøT U
d
øøU V
.
øøV W
	oProducto
øøW `
.
øø` a

RutaImagen
øøa k
)
øøk l
)
øøl m
,
øøm n
	extension
¿¿" +
=
¿¿, -
Path
¿¿. 2
.
¿¿2 3
GetExtension
¿¿3 ?
(
¿¿? @
d
¿¿@ A
.
¿¿A B
	oProducto
¿¿B K
.
¿¿K L

RutaImagen
¿¿L V
)
¿¿V W
.
¿¿W X
Replace
¿¿X _
(
¿¿_ `
$str
¿¿` c
,
¿¿c d
$str
¿¿e g
)
¿¿g h
,
¿¿h i
}
¡¡ 
,
¡¡  
Cantidad
¬¬ &
=
¬¬' (
d
¬¬) *
.
¬¬* +
Cantidad
¬¬+ 3
,
¬¬3 4
Adicionales
√√ )
=
√√* +
d
√√, -
.
√√- .
Adicionales
√√. 9
,
√√9 :
PrecioExtra
ƒƒ )
=
ƒƒ* +
d
ƒƒ, -
.
ƒƒ- .
PrecioExtra
ƒƒ. 9
,
ƒƒ9 :
Observaciones
≈≈ +
=
≈≈, -
d
≈≈. /
.
≈≈/ 0
Observaciones
≈≈0 =
,
≈≈= >
PrecioEnvio
∆∆ )
=
∆∆* +
d
∆∆, -
.
∆∆- .
PrecioEnvio
∆∆. 9
}
«« 
)
«« 
.
«« 
ToList
«« #
(
««# $
)
««$ %
;
««% &
}
»» 
var
…… 

serializer
…… 
=
…… 
new
……  
System
……! '
.
……' (
Web
……( +
.
……+ ,
Script
……, 2
.
……2 3
Serialization
……3 @
.
……@ A"
JavaScriptSerializer
……A U
(
……U V
)
……V W
;
……W X
var
   
json
   
=
   
Json
   
(
   
new
   
{
    !
lista
  " '
=
  ( )
oLista
  * 0
}
  1 2
,
  2 3!
JsonRequestBehavior
  4 G
.
  G H
AllowGet
  H P
)
  P Q
;
  Q R
json
ÀÀ 
.
ÀÀ 
MaxJsonLength
ÀÀ 
=
ÀÀ  
$num
ÀÀ! *
;
ÀÀ* +
return
ÃÃ 
json
ÃÃ 
;
ÃÃ 
}
ÕÕ 	
[
–– 	
HttpPost
––	 
]
–– 
public
—— 

JsonResult
—— 
EliminarCarrito
—— )
(
——) *
string
——* 0
	IdCarrito
——1 :
,
——: ;
string
——< B

IdProducto
——C M
)
——M N
{
““ 	
bool
”” 
	respuesta
”” 
=
”” 
false
”” "
;
””" #
	respuesta
‘‘ 
=
‘‘ 
CarritoLogica
‘‘ %
.
‘‘% &
	Instancia
‘‘& /
.
‘‘/ 0
Eliminar
‘‘0 8
(
‘‘8 9
	IdCarrito
‘‘9 B
,
‘‘B C

IdProducto
‘‘D N
)
‘‘N O
;
‘‘O P
return
’’ 
Json
’’ 
(
’’ 
new
’’ 
{
’’ 
	resultado
’’ '
=
’’( )
	respuesta
’’* 3
}
’’4 5
,
’’5 6!
JsonRequestBehavior
’’7 J
.
’’J K
AllowGet
’’K S
)
’’S T
;
’’T U
}
÷÷ 	
public
ŸŸ 
ActionResult
ŸŸ 
CerrarSesion
ŸŸ (
(
ŸŸ( )
)
ŸŸ) *
{
⁄⁄ 	!
FormsAuthentication
€€ 
.
€€  
SignOut
€€  '
(
€€' (
)
€€( )
;
€€) *
Session
‹‹ 
[
‹‹ 
$str
‹‹ 
]
‹‹ 
=
‹‹  
null
‹‹! %
;
‹‹% &
return
›› 
RedirectToAction
›› #
(
››# $
$str
››$ +
,
››+ ,
$str
››- 5
)
››5 6
;
››6 7
}
ﬁﬁ 	
[
·· 	
HttpPost
··	 
]
·· 
public
‚‚ 

JsonResult
‚‚ !
ObtenerDepartamento
‚‚ -
(
‚‚- .
)
‚‚. /
{
„„ 	
List
‰‰ 
<
‰‰ 
Departamento
‰‰ 
>
‰‰ 
oLista
‰‰ %
=
‰‰& '
new
‰‰( +
List
‰‰, 0
<
‰‰0 1
Departamento
‰‰1 =
>
‰‰= >
(
‰‰> ?
)
‰‰? @
;
‰‰@ A
oLista
ÂÂ 
=
ÂÂ 
UbigeoLogica
ÂÂ !
.
ÂÂ! "
	Instancia
ÂÂ" +
.
ÂÂ+ ,!
ObtenerDepartamento
ÂÂ, ?
(
ÂÂ? @
)
ÂÂ@ A
;
ÂÂA B
return
ÊÊ 
Json
ÊÊ 
(
ÊÊ 
new
ÊÊ 
{
ÊÊ 
lista
ÊÊ #
=
ÊÊ$ %
oLista
ÊÊ& ,
}
ÊÊ- .
,
ÊÊ. /!
JsonRequestBehavior
ÊÊ0 C
.
ÊÊC D
AllowGet
ÊÊD L
)
ÊÊL M
;
ÊÊM N
}
ÁÁ 	
[
ÈÈ 	
HttpPost
ÈÈ	 
]
ÈÈ 
public
ÍÍ 

JsonResult
ÍÍ 
ObtenerProvincia
ÍÍ *
(
ÍÍ* +
string
ÍÍ+ 1
_IdDepartamento
ÍÍ2 A
)
ÍÍA B
{
ÎÎ 	
List
ÏÏ 
<
ÏÏ 
	Provincia
ÏÏ 
>
ÏÏ 
oLista
ÏÏ "
=
ÏÏ# $
new
ÏÏ% (
List
ÏÏ) -
<
ÏÏ- .
	Provincia
ÏÏ. 7
>
ÏÏ7 8
(
ÏÏ8 9
)
ÏÏ9 :
;
ÏÏ: ;
oLista
ÌÌ 
=
ÌÌ 
UbigeoLogica
ÌÌ !
.
ÌÌ! "
	Instancia
ÌÌ" +
.
ÌÌ+ ,
ObtenerProvincia
ÌÌ, <
(
ÌÌ< =
_IdDepartamento
ÌÌ= L
)
ÌÌL M
;
ÌÌM N
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
new
ÓÓ 
{
ÓÓ 
lista
ÓÓ #
=
ÓÓ$ %
oLista
ÓÓ& ,
}
ÓÓ- .
,
ÓÓ. /!
JsonRequestBehavior
ÓÓ0 C
.
ÓÓC D
AllowGet
ÓÓD L
)
ÓÓL M
;
ÓÓM N
}
ÔÔ 	
[
ÒÒ 	
HttpPost
ÒÒ	 
]
ÒÒ 
public
ÚÚ 

JsonResult
ÚÚ 
ObtenerDistrito
ÚÚ )
(
ÚÚ) *
string
ÚÚ* 0
_IdProvincia
ÚÚ1 =
,
ÚÚ= >
string
ÚÚ? E
_IdDepartamento
ÚÚF U
)
ÚÚU V
{
ÛÛ 	
List
ÙÙ 
<
ÙÙ 
Distrito
ÙÙ 
>
ÙÙ 
oLista
ÙÙ !
=
ÙÙ" #
new
ÙÙ$ '
List
ÙÙ( ,
<
ÙÙ, -
Distrito
ÙÙ- 5
>
ÙÙ5 6
(
ÙÙ6 7
)
ÙÙ7 8
;
ÙÙ8 9
oLista
ıı 
=
ıı 
UbigeoLogica
ıı !
.
ıı! "
	Instancia
ıı" +
.
ıı+ ,
ObtenerDistrito
ıı, ;
(
ıı; <
_IdProvincia
ıı< H
,
ııH I
_IdDepartamento
ııJ Y
)
ııY Z
;
ııZ [
return
ˆˆ 
Json
ˆˆ 
(
ˆˆ 
new
ˆˆ 
{
ˆˆ 
lista
ˆˆ #
=
ˆˆ$ %
oLista
ˆˆ& ,
}
ˆˆ- .
,
ˆˆ. /!
JsonRequestBehavior
ˆˆ0 C
.
ˆˆC D
AllowGet
ˆˆD L
)
ˆˆL M
;
ˆˆM N
}
˜˜ 	
[
˙˙ 	
HttpPost
˙˙	 
]
˙˙ 
public
˚˚ 

JsonResult
˚˚ 
RegistrarCompra
˚˚ )
(
˚˚) *
Compra
˚˚* 0
oCompra
˚˚1 8
)
˚˚8 9
{
¸¸ 	
bool
˝˝ 
	respuesta
˝˝ 
=
˝˝ 
false
˝˝ "
;
˝˝" #
oCompra
˛˛ 
.
˛˛ 
	IdUsuario
˛˛ 
=
˛˛ 
oUsuario
˛˛  (
.
˛˛( )
	IdUsuario
˛˛) 2
;
˛˛2 3
	respuesta
ˇˇ 
=
ˇˇ 
CompraLogica
ˇˇ $
.
ˇˇ$ %
	Instancia
ˇˇ% .
.
ˇˇ. /
	Registrar
ˇˇ/ 8
(
ˇˇ8 9
oCompra
ˇˇ9 @
)
ˇˇ@ A
;
ˇˇA B
if
ÅÅ 
(
ÅÅ 
	respuesta
ÅÅ 
)
ÅÅ 
{
ÇÇ 
CorreoLogica
ÉÉ 
.
ÉÉ 
	Instancia
ÉÉ &
.
ÉÉ& '
EnviarCorreo
ÉÉ' 3
(
ÉÉ3 4
oCompra
ÉÉ4 ;
)
ÉÉ; <
;
ÉÉ< =
return
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
new
ÖÖ 
{
ÖÖ  !
	resultado
ÖÖ" +
=
ÖÖ, -
true
ÖÖ. 2
,
ÖÖ2 3
mensaje
ÖÖ4 ;
=
ÖÖ< =
$strÖÖ> Ü
}ÖÖá à
,ÖÖà â#
JsonRequestBehaviorÖÖä ù
.ÖÖù û
AllowGetÖÖû ¶
)ÖÖ¶ ß
;ÖÖß ®
}
ÜÜ 
else
áá 
{
àà 
return
ââ 
Json
ââ 
(
ââ 
new
ââ 
{
ââ  !
	resultado
ââ" +
=
ââ, -
false
ââ. 3
,
ââ3 4
mensaje
ââ5 <
=
ââ= >
$str
ââ? `
}
ââa b
,
ââb c!
JsonRequestBehavior
ââd w
.
ââw x
AllowGetââx Ä
)ââÄ Å
;ââÅ Ç
}
ää 
}
ãã 	
[
éé 	
HttpPost
éé	 
]
éé 
public
èè 
ActionResult
èè !
CambiarEstadoCompra
èè /
(
èè/ 0
int
èè0 3
idCompra
èè4 <
,
èè< =
string
èè> D
nuevoEstado
èèE P
)
èèP Q
{
êê 	
try
ëë 
{
íí 
using
ìì 
(
ìì 
SqlConnection
ìì $

connection
ìì% /
=
ìì0 1
new
ìì2 5
SqlConnection
ìì6 C
(
ììC D
Conexion
ììD L
.
ììL M
CN
ììM O
)
ììO P
)
ììP Q
{
îî 

connection
ïï 
.
ïï 
Open
ïï #
(
ïï# $
)
ïï$ %
;
ïï% &

SqlCommand
ññ 
cmd
ññ "
=
ññ# $
new
ññ% (

SqlCommand
ññ) 3
(
ññ3 4
$str
ññ4 O
,
ññO P

connection
ññQ [
)
ññ[ \
;
ññ\ ]
cmd
óó 
.
óó 
CommandType
óó #
=
óó$ %
CommandType
óó& 1
.
óó1 2
StoredProcedure
óó2 A
;
óóA B
cmd
òò 
.
òò 

Parameters
òò "
.
òò" #
AddWithValue
òò# /
(
òò/ 0
$str
òò0 ;
,
òò; <
idCompra
òò= E
)
òòE F
;
òòF G
cmd
ôô 
.
ôô 

Parameters
ôô "
.
ôô" #
AddWithValue
ôô# /
(
ôô/ 0
$str
ôô0 >
,
ôô> ?
nuevoEstado
ôô@ K
)
ôôK L
;
ôôL M
cmd
öö 
.
öö 
ExecuteNonQuery
öö '
(
öö' (
)
öö( )
;
öö) *
return
õõ 
Json
õõ 
(
õõ  
new
õõ  #
{
õõ$ %
success
õõ& -
=
õõ. /
true
õõ0 4
,
õõ4 5
message
õõ6 =
=
õõ> ?
$str
õõ@ m
}
õõm n
)
õõn o
;
õõo p
}
úú 
}
ùù 
catch
ûû 
(
ûû 
	Exception
ûû 
ex
ûû 
)
ûû  
{
üü 
return
†† 
Json
†† 
(
†† 
new
†† 
{
††  !
success
††" )
=
††* +
false
††, 1
,
††1 2
message
††3 :
=
††; <
$str
††= g
,
††g h
ex
††i k
}
††k l
)
††l m
;
††m n
}
°° 
}
¢¢ 	
[
§§ 	
HttpGet
§§	 
]
§§ 
public
•• 

JsonResult
•• 
ObtenerCompraUsr
•• *
(
••* +
)
••+ ,
{
¶¶ 	
List
ßß 
<
ßß 
Compra
ßß 
>
ßß 
oLista
ßß 
=
ßß  !
new
ßß" %
List
ßß& *
<
ßß* +
Compra
ßß+ 1
>
ßß1 2
(
ßß2 3
)
ßß3 4
;
ßß4 5
oLista
©© 
=
©© 
CarritoLogica
©© "
.
©©" #
	Instancia
©©# ,
.
©©, -"
ObtenerCompraUsuario
©©- A
(
©©A B
oUsuario
©©B J
.
©©J K
	IdUsuario
©©K T
)
©©T U
;
©©U V
oLista
´´ 
=
´´ 
(
´´ 
from
´´ 
c
´´ 
in
´´ 
oLista
´´  &
select
¨¨ 
new
¨¨  
Compra
¨¨! '
(
¨¨' (
)
¨¨( )
{
≠≠ 
IdCompra
ÆÆ "
=
ÆÆ# $
c
ÆÆ% &
.
ÆÆ& '
IdCompra
ÆÆ' /
,
ÆÆ/ 0
Estado
ØØ  
=
ØØ! "
c
ØØ# $
.
ØØ$ %
Estado
ØØ% +
,
ØØ+ ,

Referencia
∞∞ $
=
∞∞% &
c
∞∞' (
.
∞∞( )

Referencia
∞∞) 3
,
∞∞3 4
	FormaPago
±± #
=
±±$ %
c
±±& '
.
±±' (
	FormaPago
±±( 1
,
±±1 2
Nombre
≤≤  
=
≤≤! "
c
≤≤# $
.
≤≤$ %
Nombre
≤≤% +
,
≤≤+ ,"
DocumentoFacturacion
≥≥ .
=
≥≥/ 0
c
≥≥1 2
.
≥≥2 3"
DocumentoFacturacion
≥≥3 G
,
≥≥G H
Telefono
¥¥ "
=
¥¥# $
c
¥¥% &
.
¥¥& '
Telefono
¥¥' /
,
¥¥/ 0
	Direccion
µµ #
=
µµ$ %
c
µµ& '
.
µµ' (
	Direccion
µµ( 1
,
µµ1 2
Correo
∂∂  
=
∂∂! "
c
∂∂# $
.
∂∂$ %
Correo
∂∂% +
,
∂∂+ ,
Total
∑∑ 
=
∑∑  !
c
∑∑" #
.
∑∑# $
Total
∑∑$ )
,
∑∑) *

FechaTexto
∏∏ $
=
∏∏% &
c
∏∏' (
.
∏∏( )

FechaTexto
∏∏) 3
,
∏∏3 4

HoraRecojo
ππ $
=
ππ% &
c
ππ' (
.
ππ( )

HoraRecojo
ππ) 3
,
ππ3 4
Tipo
∫∫ 
=
∫∫  
c
∫∫! "
.
∫∫" #
Tipo
∫∫# '
,
∫∫' (
oDetalleCompra
ªª (
=
ªª) *
(
ªª+ ,
from
ªª, 0
dc
ªª1 3
in
ªª4 6
c
ªª7 8
.
ªª8 9
oDetalleCompra
ªª9 G
select
ºº, 2
new
ºº3 6
DetalleCompra
ºº7 D
(
ººD E
)
ººE F
{
ΩΩ, -
	oProducto
ææ0 9
=
ææ: ;
new
ææ< ?
Producto
ææ@ H
(
ææH I
)
ææI J
{
øø0 1
oMarca
¿¿4 :
=
¿¿; <
new
¿¿= @
Marca
¿¿A F
(
¿¿F G
)
¿¿G H
{
¿¿I J
Descripcion
¿¿K V
=
¿¿W X
dc
¿¿Y [
.
¿¿[ \
	oProducto
¿¿\ e
.
¿¿e f
oMarca
¿¿f l
.
¿¿l m
Descripcion
¿¿m x
}
¿¿y z
,
¿¿z {
Nombre
¡¡4 :
=
¡¡; <
dc
¡¡= ?
.
¡¡? @
	oProducto
¡¡@ I
.
¡¡I J
Nombre
¡¡J P
,
¡¡P Q

RutaImagen
¬¬4 >
=
¬¬? @
dc
¬¬A C
.
¬¬C D
	oProducto
¬¬D M
.
¬¬M N

RutaImagen
¬¬N X
,
¬¬X Y
base64
√√4 :
=
√√; <

utilidades
√√= G
.
√√G H
convertirBase64
√√H W
(
√√W X
Server
√√X ^
.
√√^ _
MapPath
√√_ f
(
√√f g
dc
√√g i
.
√√i j
	oProducto
√√j s
.
√√s t

RutaImagen
√√t ~
)
√√~ 
)√√ Ä
,√√Ä Å
	extension
ƒƒ4 =
=
ƒƒ> ?
Path
ƒƒ@ D
.
ƒƒD E
GetExtension
ƒƒE Q
(
ƒƒQ R
dc
ƒƒR T
.
ƒƒT U
	oProducto
ƒƒU ^
.
ƒƒ^ _

RutaImagen
ƒƒ_ i
)
ƒƒi j
.
ƒƒj k
Replace
ƒƒk r
(
ƒƒr s
$str
ƒƒs v
,
ƒƒv w
$str
ƒƒx z
)
ƒƒz {
,
ƒƒ{ |
}
≈≈0 1
,
≈≈1 2
Adicionales
∆∆0 ;
=
∆∆< =
dc
∆∆> @
.
∆∆@ A
Adicionales
∆∆A L
,
∆∆L M
Total
««0 5
=
««6 7
dc
««8 :
.
««: ;
Total
««; @
,
««@ A
PrecioExtra
»»0 ;
=
»»< =
dc
»»> @
.
»»@ A
PrecioExtra
»»A L
,
»»L M
Cantidad
……0 8
=
……9 :
dc
……; =
.
……= >
Cantidad
……> F
,
……F G
ObservacionesDC
  0 ?
=
  @ A
dc
  B D
.
  D E
ObservacionesDC
  E T
}
ÀÀ, -
)
ÀÀ- .
.
ÀÀ. /
ToList
ÀÀ/ 5
(
ÀÀ5 6
)
ÀÀ6 7
}
ÃÃ 
)
ÃÃ 
.
ÃÃ 
ToList
ÃÃ 
(
ÃÃ  
)
ÃÃ  !
;
ÃÃ! "
oLista
ŒŒ 
=
ŒŒ 
oLista
ŒŒ 
.
ŒŒ 
OrderByDescending
ŒŒ -
(
ŒŒ- .
c
ŒŒ. /
=>
ŒŒ0 2
c
ŒŒ3 4
.
ŒŒ4 5

FechaTexto
ŒŒ5 ?
)
ŒŒ? @
.
ŒŒ@ A
ToList
ŒŒA G
(
ŒŒG H
)
ŒŒH I
;
ŒŒI J
var
–– 

serializer
–– 
=
–– 
new
––  
System
––! '
.
––' (
Web
––( +
.
––+ ,
Script
––, 2
.
––2 3
Serialization
––3 @
.
––@ A"
JavaScriptSerializer
––A U
(
––U V
)
––V W
;
––W X
var
““ 
json
““ 
=
““ 
Json
““ 
(
““ 
new
““ 
{
““  !
lista
““" '
=
““( )
oLista
““* 0
}
““1 2
,
““2 3!
JsonRequestBehavior
““4 G
.
““G H
AllowGet
““H P
)
““P Q
;
““Q R
json
”” 
.
”” 
MaxJsonLength
”” 
=
””  
$num
””! *
;
””* +
return
‘‘ 
json
‘‘ 
;
‘‘ 
}
’’ 	
[
◊◊ 	
HttpGet
◊◊	 
]
◊◊ 
public
ÿÿ 

JsonResult
ÿÿ 
ObtenerCompra
ÿÿ '
(
ÿÿ' (
)
ÿÿ( )
{
ŸŸ 	
List
⁄⁄ 
<
⁄⁄ 
Compra
⁄⁄ 
>
⁄⁄ 
oLista
⁄⁄ 
=
⁄⁄  !
new
⁄⁄" %
List
⁄⁄& *
<
⁄⁄* +
Compra
⁄⁄+ 1
>
⁄⁄1 2
(
⁄⁄2 3
)
⁄⁄3 4
;
⁄⁄4 5
oLista
‹‹ 
=
‹‹ 
CarritoLogica
‹‹ "
.
‹‹" #
	Instancia
‹‹# ,
.
‹‹, -
ObtenerCompra
‹‹- :
(
‹‹: ;
)
‹‹; <
;
‹‹< =
oLista
ﬁﬁ 
=
ﬁﬁ 
(
ﬁﬁ 
from
ﬁﬁ 
c
ﬁﬁ 
in
ﬁﬁ 
oLista
ﬁﬁ  &
select
ﬂﬂ 
new
ﬂﬂ  
Compra
ﬂﬂ! '
(
ﬂﬂ' (
)
ﬂﬂ( )
{
‡‡ 
IdCompra
·· "
=
··# $
c
··% &
.
··& '
IdCompra
··' /
,
··/ 0
Estado
‚‚  
=
‚‚! "
c
‚‚# $
.
‚‚$ %
Estado
‚‚% +
,
‚‚+ ,

Referencia
„„ $
=
„„% &
c
„„' (
.
„„( )

Referencia
„„) 3
,
„„3 4
	FormaPago
‰‰ #
=
‰‰$ %
c
‰‰& '
.
‰‰' (
	FormaPago
‰‰( 1
,
‰‰1 2
Nombre
ÂÂ  
=
ÂÂ! "
c
ÂÂ# $
.
ÂÂ$ %
Nombre
ÂÂ% +
,
ÂÂ+ ,"
DocumentoFacturacion
ÊÊ .
=
ÊÊ/ 0
c
ÊÊ1 2
.
ÊÊ2 3"
DocumentoFacturacion
ÊÊ3 G
,
ÊÊG H
Telefono
ÁÁ "
=
ÁÁ# $
c
ÁÁ% &
.
ÁÁ& '
Telefono
ÁÁ' /
,
ÁÁ/ 0
	Direccion
ËË #
=
ËË$ %
c
ËË& '
.
ËË' (
	Direccion
ËË( 1
,
ËË1 2
Correo
ÈÈ  
=
ÈÈ! "
c
ÈÈ# $
.
ÈÈ$ %
Correo
ÈÈ% +
,
ÈÈ+ ,
Total
ÍÍ 
=
ÍÍ  !
c
ÍÍ" #
.
ÍÍ# $
Total
ÍÍ$ )
,
ÍÍ) *

FechaTexto
ÎÎ $
=
ÎÎ% &
c
ÎÎ' (
.
ÎÎ( )

FechaTexto
ÎÎ) 3
,
ÎÎ3 4

HoraRecojo
ÏÏ $
=
ÏÏ% &
c
ÏÏ' (
.
ÏÏ( )

HoraRecojo
ÏÏ) 3
,
ÏÏ3 4
Tipo
ÌÌ 
=
ÌÌ  
c
ÌÌ! "
.
ÌÌ" #
Tipo
ÌÌ# '
,
ÌÌ' (
oDetalleCompra
ÓÓ (
=
ÓÓ) *
(
ÓÓ+ ,
from
ÓÓ, 0
dc
ÓÓ1 3
in
ÓÓ4 6
c
ÓÓ7 8
.
ÓÓ8 9
oDetalleCompra
ÓÓ9 G
select
ÔÔ, 2
new
ÔÔ3 6
DetalleCompra
ÔÔ7 D
(
ÔÔD E
)
ÔÔE F
{
, -
	oProducto
ÒÒ0 9
=
ÒÒ: ;
new
ÒÒ< ?
Producto
ÒÒ@ H
(
ÒÒH I
)
ÒÒI J
{
ÚÚ0 1
oMarca
ÛÛ4 :
=
ÛÛ; <
new
ÛÛ= @
Marca
ÛÛA F
(
ÛÛF G
)
ÛÛG H
{
ÛÛI J
Descripcion
ÛÛK V
=
ÛÛW X
dc
ÛÛY [
.
ÛÛ[ \
	oProducto
ÛÛ\ e
.
ÛÛe f
oMarca
ÛÛf l
.
ÛÛl m
Descripcion
ÛÛm x
}
ÛÛy z
,
ÛÛz {
Nombre
ÙÙ4 :
=
ÙÙ; <
dc
ÙÙ= ?
.
ÙÙ? @
	oProducto
ÙÙ@ I
.
ÙÙI J
Nombre
ÙÙJ P
,
ÙÙP Q

RutaImagen
ıı4 >
=
ıı? @
dc
ııA C
.
ııC D
	oProducto
ııD M
.
ııM N

RutaImagen
ııN X
,
ııX Y
base64
ˆˆ4 :
=
ˆˆ; <

utilidades
ˆˆ= G
.
ˆˆG H
convertirBase64
ˆˆH W
(
ˆˆW X
Server
ˆˆX ^
.
ˆˆ^ _
MapPath
ˆˆ_ f
(
ˆˆf g
dc
ˆˆg i
.
ˆˆi j
	oProducto
ˆˆj s
.
ˆˆs t

RutaImagen
ˆˆt ~
)
ˆˆ~ 
)ˆˆ Ä
,ˆˆÄ Å
	extension
˜˜4 =
=
˜˜> ?
Path
˜˜@ D
.
˜˜D E
GetExtension
˜˜E Q
(
˜˜Q R
dc
˜˜R T
.
˜˜T U
	oProducto
˜˜U ^
.
˜˜^ _

RutaImagen
˜˜_ i
)
˜˜i j
.
˜˜j k
Replace
˜˜k r
(
˜˜r s
$str
˜˜s v
,
˜˜v w
$str
˜˜x z
)
˜˜z {
,
˜˜{ |
}
¯¯0 1
,
¯¯1 2
Adicionales
˘˘0 ;
=
˘˘< =
dc
˘˘> @
.
˘˘@ A
Adicionales
˘˘A L
,
˘˘L M
Total
˙˙0 5
=
˙˙6 7
dc
˙˙8 :
.
˙˙: ;
Total
˙˙; @
,
˙˙@ A
PrecioExtra
˚˚0 ;
=
˚˚< =
dc
˚˚> @
.
˚˚@ A
PrecioExtra
˚˚A L
,
˚˚L M
Cantidad
¸¸0 8
=
¸¸9 :
dc
¸¸; =
.
¸¸= >
Cantidad
¸¸> F
,
¸¸F G
ObservacionesDC
˝˝0 ?
=
˝˝@ A
dc
˝˝B D
.
˝˝D E
ObservacionesDC
˝˝E T
}
˛˛, -
)
˛˛- .
.
˛˛. /
ToList
˛˛/ 5
(
˛˛5 6
)
˛˛6 7
}
ˇˇ 
)
ˇˇ 
.
ˇˇ 
ToList
ˇˇ 
(
ˇˇ  
)
ˇˇ  !
;
ˇˇ! "
oLista
ÅÅ 
=
ÅÅ 
oLista
ÅÅ 
.
ÅÅ 
OrderByDescending
ÅÅ -
(
ÅÅ- .
c
ÅÅ. /
=>
ÅÅ0 2
c
ÅÅ3 4
.
ÅÅ4 5

FechaTexto
ÅÅ5 ?
)
ÅÅ? @
.
ÅÅ@ A
ToList
ÅÅA G
(
ÅÅG H
)
ÅÅH I
;
ÅÅI J
var
ÉÉ 

serializer
ÉÉ 
=
ÉÉ 
new
ÉÉ  
System
ÉÉ! '
.
ÉÉ' (
Web
ÉÉ( +
.
ÉÉ+ ,
Script
ÉÉ, 2
.
ÉÉ2 3
Serialization
ÉÉ3 @
.
ÉÉ@ A"
JavaScriptSerializer
ÉÉA U
(
ÉÉU V
)
ÉÉV W
;
ÉÉW X
var
ÖÖ 
json
ÖÖ 
=
ÖÖ 
Json
ÖÖ 
(
ÖÖ 
new
ÖÖ 
{
ÖÖ  !
lista
ÖÖ" '
=
ÖÖ( )
oLista
ÖÖ* 0
}
ÖÖ1 2
,
ÖÖ2 3!
JsonRequestBehavior
ÖÖ4 G
.
ÖÖG H
AllowGet
ÖÖH P
)
ÖÖP Q
;
ÖÖQ R
json
ÜÜ 
.
ÜÜ 
MaxJsonLength
ÜÜ 
=
ÜÜ  
$num
ÜÜ! *
;
ÜÜ* +
return
áá 
json
áá 
;
áá 
}
àà 	
[
ãã 	
HttpGet
ãã	 
]
ãã 
[
åå 	
AllowAnonymous
åå	 
]
åå 
public
çç 

JsonResult
çç $
ObtenerProximoIdCompra
çç 0
(
çç0 1
)
çç1 2
{
éé 	
int
èè 
proximoIdCompra
èè 
=
èè  !
$num
èè" #
;
èè# $
using
êê 
(
êê 
SqlConnection
êê  
	oConexion
êê! *
=
êê+ ,
new
êê- 0
SqlConnection
êê1 >
(
êê> ?
Conexion
êê? G
.
êêG H
CN
êêH J
)
êêJ K
)
êêK L
{
ëë 
try
íí 
{
ìì 

SqlCommand
îî 
cmd
îî "
=
îî# $
new
îî% (

SqlCommand
îî) 3
(
îî3 4
$str
îî4 V
,
îîV W
	oConexion
îîX a
)
îîa b
;
îîb c
	oConexion
ïï 
.
ïï 
Open
ïï "
(
ïï" #
)
ïï# $
;
ïï$ %
object
ññ 
result
ññ !
=
ññ" #
cmd
ññ$ '
.
ññ' (
ExecuteScalar
ññ( 5
(
ññ5 6
)
ññ6 7
;
ññ7 8
if
òò 
(
òò 
result
òò 
!=
òò !
DBNull
òò" (
.
òò( )
Value
òò) .
)
òò. /
{
ôô 
proximoIdCompra
öö '
=
öö( )
Convert
öö* 1
.
öö1 2
ToInt32
öö2 9
(
öö9 :
result
öö: @
)
öö@ A
+
ööB C
$num
ööD E
;
ööE F
}
õõ 
}
úú 
catch
ùù 
(
ùù 
	Exception
ùù  
ex
ùù! #
)
ùù# $
{
ûû 
proximoIdCompra
üü #
=
üü$ %
$num
üü& '
;
üü' (
}
†† 
}
°° 
return
¢¢ 
Json
¢¢ 
(
¢¢ 
proximoIdCompra
¢¢ '
,
¢¢' (!
JsonRequestBehavior
¢¢) <
.
¢¢< =
AllowGet
¢¢= E
)
¢¢E F
;
¢¢F G
}
££ 	
[
¶¶ 	
HttpPost
¶¶	 
]
¶¶ 
[
ßß 	
AllowAnonymous
ßß	 
]
ßß 
[
®® 	
Route
®®	 
(
®® 
$str
®® "
)
®®" #
]
®®# $
public
©© 
void
©© 
apiswebhook
©© 
(
©©  
string
©©  &
id
©©' )
,
©©) *
tarjetaResponse
©©+ :
dato
©©; ?
)
©©? @
{
™™ 	
try
´´ 
{
¨¨ 
var
≠≠ 
dataid
≠≠ 
=
≠≠ 
id
≠≠ 
;
≠≠  
datosTar
ÆÆ 
=
ÆÆ 
dato
ÆÆ 
;
ÆÆ  
}
ØØ 
catch
∞∞ 
(
∞∞ 
	Exception
∞∞ 
ex
∞∞ 
)
∞∞  
{
∞∞! "
throw
∞∞# (
ex
∞∞) +
;
∞∞+ ,
}
∞∞- .
}
±± 	
[
¥¥ 	
HttpPost
¥¥	 
]
¥¥ 
[
µµ 	
AllowAnonymous
µµ	 
]
µµ 
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
string
∂∂  
>
∂∂  !
Login
∂∂" '
(
∂∂' (
)
∂∂( )
{
∑∑ 	
string
∏∏ 
url
∏∏ 
=
∏∏ 
$str
∏∏ X
;
∏∏X Y
string
ππ 
credenciales
ππ 
=
ππ  !
Convert
ππ" )
.
ππ) *
ToBase64String
ππ* 8
(
ππ8 9
Encoding
ππ9 A
.
ππA B
UTF8
ππB F
.
ππF G
GetBytes
ππG O
(
ππO P
$str
ππP ~
)
ππ~ 
)ππ Ä
;ππÄ Å
return
∫∫ 
await
∫∫ 
PostDataAsync
∫∫ &
(
∫∫& '
url
∫∫' *
,
∫∫* +
$str
∫∫, 4
+
∫∫5 6
credenciales
∫∫7 C
,
∫∫C D
null
∫∫E I
)
∫∫I J
;
∫∫J K
}
ªª 	
[
ΩΩ 	
HttpPost
ΩΩ	 
]
ΩΩ 
[
ææ 	
AllowAnonymous
ææ	 
]
ææ 
public
øø 
async
øø 
Task
øø 
<
øø 
string
øø  
>
øø  !
Autorize
øø" *
(
øø* +
[
øø+ ,
System
øø, 2
.
øø2 3
Web
øø3 6
.
øø6 7
Http
øø7 ;
.
øø; <
FromBody
øø< D
]
øøD E

NiubizData
øøF P
data
øøQ U
,
øøU V
string
øøW ]
key
øø^ a
)
øøa b
{
¿¿ 	
string
¬¬ 

merchantId
¬¬ 
=
¬¬ 
$str
¬¬  +
;
¬¬+ ,
string
√√ 
url
√√ 
=
√√ 
$"
√√ 
$str
√√ i
{
√√i j

merchantId
√√j t
}
√√t u
"
√√u v
;
√√v w
return
ƒƒ 
await
ƒƒ 
PostDataAsync
ƒƒ &
(
ƒƒ& '
url
ƒƒ' *
,
ƒƒ* +
key
ƒƒ, /
,
ƒƒ/ 0
JsonConvert
ƒƒ1 <
.
ƒƒ< =
SerializeObject
ƒƒ= L
(
ƒƒL M
data
ƒƒM Q
)
ƒƒQ R
)
ƒƒR S
;
ƒƒS T
}
≈≈ 	
[
«« 	
HttpPost
««	 
]
«« 
[
»» 	
AllowAnonymous
»»	 
]
»» 
public
…… 
async
…… 
Task
…… 
<
…… 
string
……  
>
……  !
Pay
……" %
(
……% &
[
……& '
System
……' -
.
……- .
Web
……. 1
.
……1 2
Http
……2 6
.
……6 7
FromBody
……7 ?
]
……? @
PAY
……A D
data
……E I
,
……I J
string
……K Q
key
……R U
)
……U V
{
   	
string
ÃÃ 

merchantId
ÃÃ 
=
ÃÃ 
$str
ÃÃ  +
;
ÃÃ+ ,
string
ÕÕ 
url
ÕÕ 
=
ÕÕ 
$"
ÕÕ 
$str
ÕÕ m
{
ÕÕm n

merchantId
ÕÕn x
}
ÕÕx y
"
ÕÕy z
;
ÕÕz {
return
ŒŒ 
await
ŒŒ 
PostDataAsync
ŒŒ &
(
ŒŒ& '
url
ŒŒ' *
,
ŒŒ* +
key
ŒŒ, /
,
ŒŒ/ 0
JsonConvert
ŒŒ1 <
.
ŒŒ< =
SerializeObject
ŒŒ= L
(
ŒŒL M
data
ŒŒM Q
)
ŒŒQ R
)
ŒŒR S
;
ŒŒS T
}
œœ 	
[
—— 	
	NonAction
——	 
]
—— 
public
““ 
static
““ 
async
““ 
Task
““  
<
““  !
string
““! '
>
““' (
PostDataAsync
““) 6
(
““6 7
string
““7 =
url
““> A
,
““A B
string
““C I
token
““J O
,
““O P
string
““Q W
postData
““X `
)
““` a
{
”” 	
using
‘‘ 
(
‘‘ 

HttpClient
‘‘ 
client
‘‘ $
=
‘‘% &
new
‘‘' *

HttpClient
‘‘+ 5
(
‘‘5 6
)
‘‘6 7
)
‘‘7 8
{
’’  
HttpRequestMessage
÷÷ "
request
÷÷# *
=
÷÷+ ,
new
÷÷- 0 
HttpRequestMessage
÷÷1 C
(
÷÷C D

HttpMethod
÷÷D N
.
÷÷N O
Post
÷÷O S
,
÷÷S T
url
÷÷U X
)
÷÷X Y
;
÷÷Y Z
request
◊◊ 
.
◊◊ 
Headers
◊◊ 
.
◊◊  
Add
◊◊  #
(
◊◊# $
$str
◊◊$ 3
,
◊◊3 4
token
◊◊5 :
)
◊◊: ;
;
◊◊; <
if
ÿÿ 
(
ÿÿ 
postData
ÿÿ 
!=
ÿÿ 
null
ÿÿ  $
)
ÿÿ$ %
{
ŸŸ 
request
⁄⁄ 
.
⁄⁄ 
Content
⁄⁄ #
=
⁄⁄$ %
new
⁄⁄& )
StringContent
⁄⁄* 7
(
⁄⁄7 8
postData
⁄⁄8 @
,
⁄⁄@ A
Encoding
⁄⁄B J
.
⁄⁄J K
UTF8
⁄⁄K O
,
⁄⁄O P
$str
⁄⁄Q c
)
⁄⁄c d
;
⁄⁄d e
}
€€ !
HttpResponseMessage
‹‹ #
response
‹‹$ ,
=
‹‹- .
await
‹‹/ 4
client
‹‹5 ;
.
‹‹; <
	SendAsync
‹‹< E
(
‹‹E F
request
‹‹F M
)
‹‹M N
;
‹‹N O
if
ﬁﬁ 
(
ﬁﬁ 
response
ﬁﬁ 
.
ﬁﬁ !
IsSuccessStatusCode
ﬁﬁ 0
)
ﬁﬁ0 1
{
ﬂﬂ 
return
‡‡ 
await
‡‡  
response
‡‡! )
.
‡‡) *
Content
‡‡* 1
.
‡‡1 2
ReadAsStringAsync
‡‡2 C
(
‡‡C D
)
‡‡D E
;
‡‡E F
}
·· 
else
‚‚ 
{
„„ 
throw
‰‰ 
new
‰‰ 
	Exception
‰‰ '
(
‰‰' (
$"
‰‰( *
$str
‰‰* S
{
‰‰S T
response
‰‰T \
.
‰‰\ ]

StatusCode
‰‰] g
}
‰‰g h
"
‰‰h i
)
‰‰i j
;
‰‰j k
}
ÂÂ 
}
ÊÊ 
}
ÁÁ 	
}
ËË 
}ÈÈ 
publicÎÎ 
class
ÎÎ 
	Antifraud
ÎÎ 
{ÏÏ 
public
ÌÌ 

string
ÌÌ 
clientIp
ÌÌ 
{
ÌÌ 
get
ÌÌ  
;
ÌÌ  !
set
ÌÌ" %
;
ÌÌ% &
}
ÌÌ' (
public
ÓÓ 
 
MerchantDefineData
ÓÓ  
merchantDefineData
ÓÓ 0
{
ÓÓ1 2
get
ÓÓ3 6
;
ÓÓ6 7
set
ÓÓ8 ;
;
ÓÓ; <
}
ÓÓ= >
}ÔÔ 
publicÒÒ 
class
ÒÒ  
MerchantDefineData
ÒÒ 
{ÚÚ 
public
ÛÛ 

string
ÛÛ 
MDD4
ÛÛ 
{
ÛÛ 
get
ÛÛ 
;
ÛÛ 
set
ÛÛ !
;
ÛÛ! "
}
ÛÛ# $
public
ÙÙ 

int
ÙÙ 
MDD21
ÙÙ 
{
ÙÙ 
get
ÙÙ 
;
ÙÙ 
set
ÙÙ 
;
ÙÙ  
}
ÙÙ! "
public
ıı 

string
ıı 
MDD32
ıı 
{
ıı 
get
ıı 
;
ıı 
set
ıı "
;
ıı" #
}
ıı$ %
public
ˆˆ 

string
ˆˆ 
MDD75
ˆˆ 
{
ˆˆ 
get
ˆˆ 
;
ˆˆ 
set
ˆˆ "
;
ˆˆ" #
}
ˆˆ$ %
public
˜˜ 

int
˜˜ 
MDD77
˜˜ 
{
˜˜ 
get
˜˜ 
;
˜˜ 
set
˜˜ 
;
˜˜  
}
˜˜! "
}¯¯ 
public˘˘ 
class
˘˘ #
dataEnviadaDesdeFront
˘˘ "
{˙˙ 
public
˚˚ 

string
˚˚ 
Token
˚˚ 
{
˚˚ 
get
˚˚ 
;
˚˚ 
set
˚˚ "
;
˚˚" #
}
˚˚$ %
public
¸¸ 


NiubizData
¸¸ 
Data
¸¸ 
{
¸¸ 
get
¸¸  
;
¸¸  !
set
¸¸" %
;
¸¸% &
}
¸¸' (
}˝˝ 
public˛˛ 
class
˛˛ 

NiubizData
˛˛ 
{ˇˇ 
public
ÄÄ 

string
ÄÄ 
channel
ÄÄ 
{
ÄÄ 
get
ÄÄ 
;
ÄÄ  
set
ÄÄ! $
;
ÄÄ$ %
}
ÄÄ& '
public
ÅÅ 

double
ÅÅ 
amount
ÅÅ 
{
ÅÅ 
get
ÅÅ 
;
ÅÅ 
set
ÅÅ  #
;
ÅÅ# $
}
ÅÅ% &
public
ÇÇ 

double
ÇÇ !
recurrenceMaxAmount
ÇÇ %
{
ÇÇ& '
get
ÇÇ( +
;
ÇÇ+ ,
set
ÇÇ- 0
;
ÇÇ0 1
}
ÇÇ2 3
public
ÉÉ 

	Antifraud
ÉÉ 
	antifraud
ÉÉ 
{
ÉÉ  
get
ÉÉ! $
;
ÉÉ$ %
set
ÉÉ& )
;
ÉÉ) *
}
ÉÉ+ ,
}ÑÑ 
publicáá 
class
áá 

CardHolder
áá 
{àà 
public
àà 
string
àà 
documentType
àà 
{
àà  !
get
àà" %
;
àà% &
set
àà' *
;
àà* +
}
àà, -
public
ââ 

string
ââ 
documentNumber
ââ  
{
ââ! "
get
ââ# &
;
ââ& '
set
ââ( +
;
ââ+ ,
}
ââ- .
}ää 
publicåå 
class
åå 
Order
åå 
{çç 
public
éé 

string
éé 
tokenId
éé 
{
éé 
get
éé 
;
éé  
set
éé! $
;
éé$ %
}
éé& '
public
èè 

int
èè 
purchaseNumber
èè 
{
èè 
get
èè  #
;
èè# $
set
èè% (
;
èè( )
}
èè* +
public
êê 

double
êê 
amount
êê 
{
êê 
get
êê 
;
êê 
set
êê  #
;
êê# $
}
êê% &
public
ëë 

string
ëë 
currency
ëë 
{
ëë 
get
ëë  
;
ëë  !
set
ëë" %
;
ëë% &
}
ëë' (
public
íí 

string
íí 
	productId
íí 
{
íí 
get
íí !
;
íí! "
set
íí# &
;
íí& '
}
íí( )
public
ìì 

int
ìì 
installment
ìì 
{
ìì 
get
ìì  
;
ìì  !
set
ìì" %
;
ìì% &
}
ìì' (
=
ìì) *
$num
ìì+ ,
;
ìì, -
}îî 
publicññ 
class
ññ 

Recurrence
ññ 
{óó 
public
òò 

string
òò 
type
òò 
{
òò 
get
òò 
;
òò 
set
òò !
;
òò! "
}
òò# $
public
ôô 

string
ôô 
	frequency
ôô 
{
ôô 
get
ôô !
;
ôô! "
set
ôô# &
;
ôô& '
}
ôô( )
public
öö 

string
öö 
beneficiaryId
öö 
{
öö  !
get
öö" %
;
öö% &
set
öö' *
;
öö* +
}
öö, -
public
õõ 

string
õõ "
beneficiaryFirstName
õõ &
{
õõ' (
get
õõ) ,
;
õõ, -
set
õõ. 1
;
õõ1 2
}
õõ3 4
public
úú 

string
úú !
beneficiaryLastName
úú %
{
úú& '
get
úú( +
;
úú+ ,
set
úú- 0
;
úú0 1
}
úú2 3
public
ùù 

double
ùù 
	maxAmount
ùù 
{
ùù 
get
ùù !
;
ùù! "
set
ùù# &
;
ùù& '
}
ùù( )
public
ûû 

double
ûû 
amount
ûû 
{
ûû 
get
ûû 
;
ûû 
set
ûû  #
;
ûû# $
}
ûû% &
}üü 
public°° 
class
°° 
PAY
°° 
{¢¢ 
public
££ 

string
££ 
channel
££ 
{
££ 
get
££ 
;
££  
set
££! $
;
££$ %
}
££& '
public
§§ 

string
§§ 
captureType
§§ 
{
§§ 
get
§§  #
;
§§# $
set
§§% (
;
§§( )
}
§§* +
public
•• 

bool
•• 
	countable
•• 
{
•• 
get
•• 
;
••  
set
••! $
;
••$ %
}
••& '
public
¶¶ 

Order
¶¶ 
order
¶¶ 
{
¶¶ 
get
¶¶ 
;
¶¶ 
set
¶¶ !
;
¶¶! "
}
¶¶# $
public
ßß 


CardHolder
ßß 

cardHolder
ßß  
{
ßß! "
get
ßß# &
;
ßß& '
set
ßß( +
;
ßß+ ,
}
ßß- .
public
®® 


Recurrence
®® 

recurrence
®®  
{
®®! "
get
®®# &
;
®®& '
set
®®( +
;
®®+ ,
}
®®- .
}©© Ü	
[C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Global.asax.cs
	namespace		 	
ProyectoTest		
 
{

 
public 

class 
MvcApplication 
:  !
System" (
.( )
Web) ,
., -
HttpApplication- <
{ 
	protected 
void 
Application_Start (
(( )
)) *
{ 	
AreaRegistration 
. 
RegisterAllAreas -
(- .
). /
;/ 0
FilterConfig 
. !
RegisterGlobalFilters .
(. /
GlobalFilters/ <
.< =
Filters= D
)D E
;E F
RouteConfig 
. 
RegisterRoutes &
(& '

RouteTable' 1
.1 2
Routes2 8
)8 9
;9 :
BundleConfig 
. 
RegisterBundles (
(( )
BundleTable) 4
.4 5
Bundles5 <
)< =
;= >
} 	
} 
} ∞É
dC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\CarritoLogica.cs
	namespace 	
ProyectoTest
 
. 
Logica 
{ 
public 

class 
CarritoLogica 
{ 
private 
static 
CarritoLogica $

_instancia% /
=0 1
null2 6
;6 7
public 
CarritoLogica 
( 
) 
{ 	
} 	
public 
static 
CarritoLogica #
	Instancia$ -
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{ 

_instancia 
=  
new! $
CarritoLogica% 2
(2 3
)3 4
;4 5
}   
return"" 

_instancia"" !
;""! "
}## 
}$$ 	
public&& 
int&& 
	Registrar&& 
(&& 
Carrito&& $
oCarrito&&% -
)&&- .
{'' 	
int(( 
	respuesta(( 
=(( 
$num(( 
;(( 
using)) 
()) 
SqlConnection))  
	oConexion))! *
=))+ ,
new))- 0
SqlConnection))1 >
())> ?
Conexion))? G
.))G H
CN))H J
)))J K
)))K L
{** 
try++ 
{,, 

SqlCommand-- 
cmd-- "
=--# $
new--% (

SqlCommand--) 3
(--3 4
$str--4 H
,--H I
	oConexion--J S
)--S T
;--T U
cmd.. 
... 

Parameters.. "
..." #
AddWithValue..# /
(../ 0
$str..0 ;
,..; <
oCarrito..= E
...E F
oUsuario..F N
...N O
	IdUsuario..O X
)..X Y
;..Y Z
cmd// 
.// 

Parameters// "
.//" #
AddWithValue//# /
(/// 0
$str//0 <
,//< =
oCarrito//> F
.//F G
	oProducto//G P
.//P Q

IdProducto//Q [
)//[ \
;//\ ]
cmd00 
.00 

Parameters00 "
.00" #
AddWithValue00# /
(00/ 0
$str000 :
,00: ;
oCarrito00< D
.00D E
Cantidad00E M
)00M N
;00N O
cmd11 
.11 

Parameters11 "
.11" #
AddWithValue11# /
(11/ 0
$str110 =
,11= >
oCarrito11? G
.11G H
Adicionales11H S
)11S T
;11T U
cmd22 
.22 

Parameters22 "
.22" #
AddWithValue22# /
(22/ 0
$str220 =
,22= >
oCarrito22? G
.22G H
PrecioExtra22H S
)22S T
;22T U
cmd33 
.33 

Parameters33 "
.33" #
AddWithValue33# /
(33/ 0
$str330 ?
,33? @
oCarrito33A I
.33I J
Observaciones33J W
)33W X
;33X Y
cmd44 
.44 

Parameters44 "
.44" #
Add44# &
(44& '
$str44' 2
,442 3
	SqlDbType444 =
.44= >
Int44> A
)44A B
.44B C
	Direction44C L
=44M N
ParameterDirection44O a
.44a b
Output44b h
;44h i
cmd55 
.55 
CommandType55 #
=55$ %
CommandType55& 1
.551 2
StoredProcedure552 A
;55A B
	oConexion77 
.77 
Open77 "
(77" #
)77# $
;77$ %
cmd88 
.88 
ExecuteNonQuery88 '
(88' (
)88( )
;88) *
	respuesta99 
=99 
Convert99  '
.99' (
ToInt3299( /
(99/ 0
cmd990 3
.993 4

Parameters994 >
[99> ?
$str99? J
]99J K
.99K L
Value99L Q
)99Q R
;99R S
}:: 
catch;; 
(;; 
	Exception;;  
ex;;! #
);;# $
{<< 
	respuesta== 
=== 
$num==  !
;==! "
}>> 
}?? 
return@@ 
	respuesta@@ 
;@@ 
}AA 	
publicCC 
intCC 
CantidadCC 
(CC 
intCC 
	idusuarioCC  )
)CC) *
{DD 	
intEE 
	respuestaEE 
=EE 
$numEE 
;EE 
usingFF 
(FF 
SqlConnectionFF  
	oConexionFF! *
=FF+ ,
newFF- 0
SqlConnectionFF1 >
(FF> ?
ConexionFF? G
.FFG H
CNFFH J
)FFJ K
)FFK L
{GG 
tryHH 
{II 

SqlCommandKK 
cmdKK "
=KK# $
newKK% (

SqlCommandKK) 3
(KK3 4
$strKK4 t
,KKt u
	oConexionKKv 
)	KK Ä
;
KKÄ Å
cmdLL 
.LL 

ParametersLL "
.LL" #
AddWithValueLL# /
(LL/ 0
$strLL0 <
,LL< =
	idusuarioLL> G
)LLG H
;LLH I
cmdMM 
.MM 
CommandTypeMM #
=MM$ %
CommandTypeMM& 1
.MM1 2
TextMM2 6
;MM6 7
	oConexionOO 
.OO 
OpenOO "
(OO" #
)OO# $
;OO$ %
	respuestaPP 
=PP 
ConvertPP  '
.PP' (
ToInt32PP( /
(PP/ 0
cmdPP0 3
.PP3 4
ExecuteScalarPP4 A
(PPA B
)PPB C
.PPC D
ToStringPPD L
(PPL M
)PPM N
)PPN O
;PPO P
}RR 
catchSS 
(SS 
	ExceptionSS  
exSS! #
)SS# $
{TT 
	respuestaUU 
=UU 
$numUU  !
;UU! "
}VV 
}WW 
returnXX 
	respuestaXX 
;XX 
}YY 	
public[[ 
List[[ 
<[[ 
Carrito[[ 
>[[ 
Obtener[[ $
([[$ %
int[[% (

_idusuario[[) 3
)[[3 4
{\\ 	
List]] 
<]] 
Carrito]] 
>]] 
lst]] 
=]] 
new]]  #
List]]$ (
<]]( )
Carrito]]) 0
>]]0 1
(]]1 2
)]]2 3
;]]3 4
using^^ 
(^^ 
SqlConnection^^  
	oConexion^^! *
=^^+ ,
new^^- 0
SqlConnection^^1 >
(^^> ?
Conexion^^? G
.^^G H
CN^^H J
)^^J K
)^^K L
{__ 
try`` 
{aa 

SqlCommandbb 
cmdbb "
=bb# $
newbb% (

SqlCommandbb) 3
(bb3 4
$strbb4 G
,bbG H
	oConexionbbI R
)bbR S
;bbS T
cmdcc 
.cc 

Parameterscc "
.cc" #
AddWithValuecc# /
(cc/ 0
$strcc0 ;
,cc; <

_idusuariocc= G
)ccG H
;ccH I
cmddd 
.dd 
CommandTypedd #
=dd$ %
CommandTypedd& 1
.dd1 2
StoredProceduredd2 A
;ddA B
	oConexionff 
.ff 
Openff "
(ff" #
)ff# $
;ff$ %
usinghh 
(hh 
SqlDataReaderhh (
drhh) +
=hh, -
cmdhh. 1
.hh1 2
ExecuteReaderhh2 ?
(hh? @
)hh@ A
)hhA B
{ii 
whilejj 
(jj 
drjj !
.jj! "
Readjj" &
(jj& '
)jj' (
)jj( )
{kk 
lstll 
.ll  
Addll  #
(ll# $
newll$ '
Carritoll( /
(ll/ 0
)ll0 1
{mm 
	IdCarritonn  )
=nn* +
Convertnn, 3
.nn3 4
ToInt32nn4 ;
(nn; <
drnn< >
[nn> ?
$strnn? J
]nnJ K
)nnK L
,nnL M
	oProductooo  )
=oo* +
newoo, /
Productooo0 8
(oo8 9
)oo9 :
{pp  !

IdProductoqq$ .
=qq/ 0
Convertqq1 8
.qq8 9
ToInt32qq9 @
(qq@ A
drqqA C
[qqC D
$strqqD P
]qqP Q
)qqQ R
,qqR S
Nombrerr$ *
=rr+ ,
drrr- /
[rr/ 0
$strrr0 8
]rr8 9
.rr9 :
ToStringrr: B
(rrB C
)rrC D
,rrD E
oMarcass$ *
=ss+ ,
newss- 0
Marcass1 6
(ss6 7
)ss7 8
{ss9 :
Descripcionss; F
=ssG H
drssI K
[ssK L
$strssL Y
]ssY Z
.ssZ [
ToStringss[ c
(ssc d
)ssd e
}ssf g
,ssg h
Preciott$ *
=tt+ ,
Converttt- 4
.tt4 5
	ToDecimaltt5 >
(tt> ?
drtt? A
[ttA B
$strttB J
]ttJ K
,ttK L
CultureInfottM X
.ttX Y
InvariantCulturettY i
)tti j
,ttj k

RutaImagenuu$ .
=uu/ 0
druu1 3
[uu3 4
$struu4 @
]uu@ A
.uuA B
ToStringuuB J
(uuJ K
)uuK L
}vv  !
,vv! "
Cantidadxx  (
=xx) *
Convertxx+ 2
.xx2 3
ToInt32xx3 :
(xx: ;
drxx; =
[xx= >
$strxx> H
]xxH I
)xxI J
,xxJ K
Adicionalesyy  +
=yy, -
dryy. 0
[yy0 1
$stryy1 >
]yy> ?
.yy? @
ToStringyy@ H
(yyH I
)yyI J
,yyJ K
PrecioExtrazz  +
=zz, -
Convertzz. 5
.zz5 6
	ToDecimalzz6 ?
(zz? @
drzz@ B
[zzB C
$strzzC P
]zzP Q
,zzQ R
CultureInfozzS ^
.zz^ _
InvariantCulturezz_ o
)zzo p
,zzp q
Observaciones{{  -
={{. /
dr{{0 2
[{{2 3
$str{{3 B
]{{B C
.{{C D
ToString{{D L
({{L M
){{M N
,{{N O
PrecioEnvio||  +
=||, -
Convert||. 5
.||5 6
	ToDecimal||6 ?
(||? @
dr||@ B
[||B C
$str||C P
]||P Q
,||Q R
CultureInfo||S ^
.||^ _
InvariantCulture||_ o
)||o p
}}} 
)}} 
;}} 
}~~ 
} 
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ  
ex
ÅÅ! #
)
ÅÅ# $
{
ÇÇ 
lst
ÉÉ 
=
ÉÉ 
new
ÉÉ 
List
ÉÉ "
<
ÉÉ" #
Carrito
ÉÉ# *
>
ÉÉ* +
(
ÉÉ+ ,
)
ÉÉ, -
;
ÉÉ- .
}
ÑÑ 
}
ÖÖ 
return
ÜÜ 
lst
ÜÜ 
;
ÜÜ 
}
áá 	
public
ää 
bool
ää 
Eliminar
ää 
(
ää 
string
ää #
	IdCarrito
ää$ -
,
ää- .
string
ää/ 5

IdProducto
ää6 @
)
ää@ A
{
ãã 	
bool
åå 
	respuesta
åå 
=
åå 
true
åå !
;
åå! "
using
çç 
(
çç 
SqlConnection
çç  
	oConexion
çç! *
=
çç+ ,
new
çç- 0
SqlConnection
çç1 >
(
çç> ?
Conexion
çç? G
.
ççG H
CN
ççH J
)
ççJ K
)
ççK L
{
éé 
try
èè 
{
êê 
StringBuilder
ëë !
query
ëë" '
=
ëë( )
new
ëë* -
StringBuilder
ëë. ;
(
ëë; <
)
ëë< =
;
ëë= >
query
íí 
.
íí 

AppendLine
íí $
(
íí$ %
$str
íí% W
)
ííW X
;
ííX Y

SqlCommand
ìì 
cmd
ìì "
=
ìì# $
new
ìì% (

SqlCommand
ìì) 3
(
ìì3 4
query
ìì4 9
.
ìì9 :
ToString
ìì: B
(
ììB C
)
ììC D
,
ììD E
	oConexion
ììF O
)
ììO P
;
ììP Q
cmd
îî 
.
îî 

Parameters
îî "
.
îî" #
AddWithValue
îî# /
(
îî/ 0
$str
îî0 <
,
îî< =
	IdCarrito
îî> G
)
îîG H
;
îîH I
cmd
ïï 
.
ïï 

Parameters
ïï "
.
ïï" #
AddWithValue
ïï# /
(
ïï/ 0
$str
ïï0 =
,
ïï= >

IdProducto
ïï? I
)
ïïI J
;
ïïJ K
cmd
ññ 
.
ññ 
CommandType
ññ #
=
ññ$ %
CommandType
ññ& 1
.
ññ1 2
Text
ññ2 6
;
ññ6 7
	oConexion
óó 
.
óó 
Open
óó "
(
óó" #
)
óó# $
;
óó$ %
cmd
òò 
.
òò 
ExecuteNonQuery
òò '
(
òò' (
)
òò( )
;
òò) *
}
ôô 
catch
öö 
(
öö 
	Exception
öö  
ex
öö! #
)
öö# $
{
õõ 
	respuesta
úú 
=
úú 
false
úú  %
;
úú% &
}
ùù 
}
ûû 
return
üü 
	respuesta
üü 
;
üü 
}
†† 	
public
¢¢ 
List
¢¢ 
<
¢¢ 
Compra
¢¢ 
>
¢¢ "
ObtenerCompraUsuario
¢¢ 0
(
¢¢0 1
int
¢¢1 4
	IdUsuario
¢¢5 >
)
¢¢> ?
{
££ 	
List
§§ 
<
§§ 
Compra
§§ 
>
§§ 
rptDetalleCompra
§§ )
=
§§* +
new
§§, /
List
§§0 4
<
§§4 5
Compra
§§5 ;
>
§§; <
(
§§< =
)
§§= >
;
§§> ?
using
•• 
(
•• 
SqlConnection
••  
	oConexion
••! *
=
••+ ,
new
••- 0
SqlConnection
••1 >
(
••> ?
Conexion
••? G
.
••G H
CN
••H J
)
••J K
)
••K L
{
¶¶ 

SqlCommand
ßß 
cmd
ßß 
=
ßß  
new
ßß! $

SqlCommand
ßß% /
(
ßß/ 0
$str
ßß0 I
,
ßßI J
	oConexion
ßßK T
)
ßßT U
;
ßßU V
cmd
®® 
.
®® 

Parameters
®® 
.
®® 
AddWithValue
®® +
(
®®+ ,
$str
®®, 8
,
®®8 9
	IdUsuario
®®: C
)
®®C D
;
®®D E
cmd
©© 
.
©© 
CommandType
©© 
=
©©  !
CommandType
©©" -
.
©©- .
StoredProcedure
©©. =
;
©©= >
try
¨¨ 
{
≠≠ 
	oConexion
ÆÆ 
.
ÆÆ 
Open
ÆÆ "
(
ÆÆ" #
)
ÆÆ# $
;
ÆÆ$ %
using
ØØ 
(
ØØ 
	XmlReader
ØØ $
dr
ØØ% '
=
ØØ( )
cmd
ØØ* -
.
ØØ- .
ExecuteXmlReader
ØØ. >
(
ØØ> ?
)
ØØ? @
)
ØØ@ A
{
∞∞ 
while
±± 
(
±± 
dr
±± !
.
±±! "
Read
±±" &
(
±±& '
)
±±' (
)
±±( )
{
≤≤ 
	XDocument
≥≥ %
doc
≥≥& )
=
≥≥* +
	XDocument
≥≥, 5
.
≥≥5 6
Load
≥≥6 :
(
≥≥: ;
dr
≥≥; =
)
≥≥= >
;
≥≥> ?
if
¥¥ 
(
¥¥  
doc
¥¥  #
.
¥¥# $
Element
¥¥$ +
(
¥¥+ ,
$str
¥¥, 2
)
¥¥2 3
!=
¥¥4 6
null
¥¥7 ;
)
¥¥; <
{
µµ 
rptDetalleCompra
∂∂  0
=
∂∂1 2
(
∂∂3 4
from
∂∂4 8
c
∂∂9 :
in
∂∂; =
doc
∂∂> A
.
∂∂A B
Element
∂∂B I
(
∂∂I J
$str
∂∂J P
)
∂∂P Q
.
∂∂Q R
Elements
∂∂R Z
(
∂∂Z [
$str
∂∂[ c
)
∂∂c d
select
∑∑4 :
new
∑∑; >
Compra
∑∑? E
(
∑∑E F
)
∑∑F G
{
∏∏4 5
IdCompra
ππ8 @
=
ππA B
Convert
ππC J
.
ππJ K
ToInt32
ππK R
(
ππR S
c
ππS T
.
ππT U
Element
ππU \
(
ππ\ ]
$str
ππ] g
)
ππg h
.
ππh i
Value
ππi n
)
ππn o
,
ππo p
Estado
∫∫8 >
=
∫∫? @
c
∫∫A B
.
∫∫B C
Element
∫∫C J
(
∫∫J K
$str
∫∫K S
)
∫∫S T
.
∫∫T U
Value
∫∫U Z
,
∫∫Z [

Referencia
ªª8 B
=
ªªC D
c
ªªE F
.
ªªF G
Element
ªªG N
(
ªªN O
$str
ªªO [
)
ªª[ \
.
ªª\ ]
Value
ªª] b
,
ªªb c
	FormaPago
ºº8 A
=
ººB C
c
ººD E
.
ººE F
Element
ººF M
(
ººM N
$str
ººN Y
)
ººY Z
.
ººZ [
Value
ºº[ `
,
ºº` a
Nombre
ΩΩ8 >
=
ΩΩ? @
c
ΩΩA B
.
ΩΩB C
Element
ΩΩC J
(
ΩΩJ K
$str
ΩΩK S
)
ΩΩS T
.
ΩΩT U
Value
ΩΩU Z
,
ΩΩZ ["
DocumentoFacturacion
ææ8 L
=
ææM N
c
ææO P
.
ææP Q
Element
ææQ X
(
ææX Y
$str
ææY o
)
ææo p
.
ææp q
Value
ææq v
,
ææv w
Telefono
øø8 @
=
øøA B
c
øøC D
.
øøD E
Element
øøE L
(
øøL M
$str
øøM W
)
øøW X
.
øøX Y
Value
øøY ^
,
øø^ _
	Direccion
¿¿8 A
=
¿¿B C
c
¿¿D E
.
¿¿E F
Element
¿¿F M
(
¿¿M N
$str
¿¿N Y
)
¿¿Y Z
.
¿¿Z [
Value
¿¿[ `
,
¿¿` a
Correo
¡¡8 >
=
¡¡? @
c
¡¡A B
.
¡¡B C
Element
¡¡C J
(
¡¡J K
$str
¡¡K S
)
¡¡S T
.
¡¡T U
Value
¡¡U Z
,
¡¡Z [
Total
¬¬8 =
=
¬¬> ?
Convert
¬¬@ G
.
¬¬G H
	ToDecimal
¬¬H Q
(
¬¬Q R
c
¬¬R S
.
¬¬S T
Element
¬¬T [
(
¬¬[ \
$str
¬¬\ c
)
¬¬c d
.
¬¬d e
Value
¬¬e j
,
¬¬j k
new
¬¬l o
CultureInfo
¬¬p {
(
¬¬{ |
$str¬¬| É
)¬¬É Ñ
)¬¬Ñ Ö
,¬¬Ö Ü

FechaTexto
√√8 B
=
√√C D
c
√√E F
.
√√F G
Element
√√G N
(
√√N O
$str
√√O V
)
√√V W
.
√√W X
Value
√√X ]
,
√√] ^

HoraRecojo
ƒƒ8 B
=
ƒƒC D
c
ƒƒE F
.
ƒƒF G
Element
ƒƒG N
(
ƒƒN O
$str
ƒƒO [
)
ƒƒ[ \
.
ƒƒ\ ]
Value
ƒƒ] b
,
ƒƒb c
Tipo
≈≈8 <
=
≈≈= >
c
≈≈? @
.
≈≈@ A
Element
≈≈A H
(
≈≈H I
$str
≈≈I O
)
≈≈O P
.
≈≈P Q
Value
≈≈Q V
,
≈≈V W
oDetalleCompra
∆∆8 F
=
∆∆G H
(
∆∆I J
from
∆∆J N
d
∆∆O P
in
∆∆Q S
c
∆∆T U
.
∆∆U V
Element
∆∆V ]
(
∆∆] ^
$str
∆∆^ p
)
∆∆p q
.
∆∆q r
Elements
∆∆r z
(
∆∆z {
$str∆∆{ Ö
)∆∆Ö Ü
select
««J P
new
««Q T
DetalleCompra
««U b
(
««b c
)
««c d
{
»»J K
	oProducto
……N W
=
……X Y
new
……Z ]
Producto
……^ f
(
……f g
)
……g h
{
  N O
oMarca
ÀÀR X
=
ÀÀY Z
new
ÀÀ[ ^
Marca
ÀÀ_ d
(
ÀÀd e
)
ÀÀe f
{
ÀÀg h
Descripcion
ÀÀi t
=
ÀÀu v
d
ÀÀw x
.
ÀÀx y
ElementÀÀy Ä
(ÀÀÄ Å
$strÀÀÅ é
)ÀÀé è
.ÀÀè ê
ValueÀÀê ï
}ÀÀñ ó
,ÀÀó ò
Nombre
ÃÃR X
=
ÃÃY Z
d
ÃÃ[ \
.
ÃÃ\ ]
Element
ÃÃ] d
(
ÃÃd e
$str
ÃÃe m
)
ÃÃm n
.
ÃÃn o
Value
ÃÃo t
,
ÃÃt u

RutaImagen
ÕÕR \
=
ÕÕ] ^
d
ÕÕ_ `
.
ÕÕ` a
Element
ÕÕa h
(
ÕÕh i
$str
ÕÕi u
)
ÕÕu v
.
ÕÕv w
Value
ÕÕw |
}
ŒŒN O
,
ŒŒO P
Adicionales
œœN Y
=
œœZ [
d
œœ\ ]
.
œœ] ^
Element
œœ^ e
(
œœe f
$str
œœf s
)
œœs t
.
œœt u
Value
œœu z
,
œœz {
Total
––N S
=
––T U
Convert
––V ]
.
––] ^
	ToDecimal
––^ g
(
––g h
d
––h i
.
––i j
Element
––j q
(
––q r
$str
––r y
)
––y z
.
––z {
Value––{ Ä
,––Ä Å
new––Ç Ö
CultureInfo––Ü ë
(––ë í
$str––í ô
)––ô ö
)––ö õ
,––õ ú
PrecioExtra
——N Y
=
——Z [
Convert
——\ c
.
——c d
	ToDecimal
——d m
(
——m n
d
——n o
.
——o p
Element
——p w
(
——w x
$str——x Ö
)——Ö Ü
.——Ü á
Value——á å
,——å ç
new——é ë
CultureInfo——í ù
(——ù û
$str——û •
)——• ¶
)——¶ ß
,——ß ®
Cantidad
““N V
=
““W X
Convert
““Y `
.
““` a
ToInt32
““a h
(
““h i
d
““i j
.
““j k
Element
““k r
(
““r s
$str
““s }
)
““} ~
.
““~ 
Value““ Ñ
)““Ñ Ö
,““Ö Ü
ObservacionesDC
””N ]
=
””^ _
d
””` a
.
””a b
Element
””b i
(
””i j
$str
””j {
)
””{ |
.
””| }
Value””} Ç
,””Ç É
}
‘‘J K
)
‘‘K L
.
‘‘L M
ToList
‘‘M S
(
‘‘S T
)
‘‘T U
}
’’4 5
)
’’5 6
.
’’6 7
ToList
’’7 =
(
’’= >
)
’’> ?
;
’’? @
}
÷÷ 
else
◊◊  
{
ÿÿ 
rptDetalleCompra
ŸŸ  0
=
ŸŸ1 2
new
ŸŸ3 6
List
ŸŸ7 ;
<
ŸŸ; <
Compra
ŸŸ< B
>
ŸŸB C
(
ŸŸC D
)
ŸŸD E
;
ŸŸE F
}
⁄⁄ 
}
€€ 
dr
‹‹ 
.
‹‹ 
Close
‹‹  
(
‹‹  !
)
‹‹! "
;
‹‹" #
}
›› 
return
ﬁﬁ 
rptDetalleCompra
ﬁﬁ +
;
ﬁﬁ+ ,
}
ﬂﬂ 
catch
‡‡ 
(
‡‡ 
	Exception
‡‡  
ex
‡‡! #
)
‡‡# $
{
·· 
rptDetalleCompra
‚‚ $
=
‚‚% &
null
‚‚' +
;
‚‚+ ,
return
„„ 
rptDetalleCompra
„„ +
;
„„+ ,
}
‰‰ 
}
ÂÂ 
}
ÊÊ 	
public
ËË 
List
ËË 
<
ËË 
Compra
ËË 
>
ËË 
ObtenerCompra
ËË )
(
ËË) *
)
ËË* +
{
ÈÈ 	
List
ÍÍ 
<
ÍÍ 
Compra
ÍÍ 
>
ÍÍ 
rptDetalleCompra
ÍÍ )
=
ÍÍ* +
new
ÍÍ, /
List
ÍÍ0 4
<
ÍÍ4 5
Compra
ÍÍ5 ;
>
ÍÍ; <
(
ÍÍ< =
)
ÍÍ= >
;
ÍÍ> ?
using
ÎÎ 
(
ÎÎ 
SqlConnection
ÎÎ  
	oConexion
ÎÎ! *
=
ÎÎ+ ,
new
ÎÎ- 0
SqlConnection
ÎÎ1 >
(
ÎÎ> ?
Conexion
ÎÎ? G
.
ÎÎG H
CN
ÎÎH J
)
ÎÎJ K
)
ÎÎK L
{
ÏÏ 

SqlCommand
ÌÌ 
cmd
ÌÌ 
=
ÌÌ  
new
ÌÌ! $

SqlCommand
ÌÌ% /
(
ÌÌ/ 0
$str
ÌÌ0 B
,
ÌÌB C
	oConexion
ÌÌD M
)
ÌÌM N
;
ÌÌN O
cmd
ÓÓ 
.
ÓÓ 
CommandType
ÓÓ 
=
ÓÓ  !
CommandType
ÓÓ" -
.
ÓÓ- .
StoredProcedure
ÓÓ. =
;
ÓÓ= >
try
ÔÔ 
{
 
	oConexion
ÒÒ 
.
ÒÒ 
Open
ÒÒ "
(
ÒÒ" #
)
ÒÒ# $
;
ÒÒ$ %
using
ÚÚ 
(
ÚÚ 
	XmlReader
ÚÚ $
dr
ÚÚ% '
=
ÚÚ( )
cmd
ÚÚ* -
.
ÚÚ- .
ExecuteXmlReader
ÚÚ. >
(
ÚÚ> ?
)
ÚÚ? @
)
ÚÚ@ A
{
ÛÛ 
while
ÙÙ 
(
ÙÙ 
dr
ÙÙ !
.
ÙÙ! "
Read
ÙÙ" &
(
ÙÙ& '
)
ÙÙ' (
)
ÙÙ( )
{
ıı 
	XDocument
ˆˆ %
doc
ˆˆ& )
=
ˆˆ* +
	XDocument
ˆˆ, 5
.
ˆˆ5 6
Load
ˆˆ6 :
(
ˆˆ: ;
dr
ˆˆ; =
)
ˆˆ= >
;
ˆˆ> ?
if
˜˜ 
(
˜˜  
doc
˜˜  #
.
˜˜# $
Element
˜˜$ +
(
˜˜+ ,
$str
˜˜, 2
)
˜˜2 3
!=
˜˜4 6
null
˜˜7 ;
)
˜˜; <
{
¯¯ 
rptDetalleCompra
˘˘  0
=
˘˘1 2
(
˘˘3 4
from
˘˘4 8
c
˘˘9 :
in
˘˘; =
doc
˘˘> A
.
˘˘A B
Element
˘˘B I
(
˘˘I J
$str
˘˘J P
)
˘˘P Q
.
˘˘Q R
Elements
˘˘R Z
(
˘˘Z [
$str
˘˘[ c
)
˘˘c d
select
˙˙4 :
new
˙˙; >
Compra
˙˙? E
(
˙˙E F
)
˙˙F G
{
˚˚4 5
IdCompra
¸¸8 @
=
¸¸A B
Convert
¸¸C J
.
¸¸J K
ToInt32
¸¸K R
(
¸¸R S
c
¸¸S T
.
¸¸T U
Element
¸¸U \
(
¸¸\ ]
$str
¸¸] g
)
¸¸g h
.
¸¸h i
Value
¸¸i n
)
¸¸n o
,
¸¸o p
Estado
˝˝8 >
=
˝˝? @
c
˝˝A B
.
˝˝B C
Element
˝˝C J
(
˝˝J K
$str
˝˝K S
)
˝˝S T
.
˝˝T U
Value
˝˝U Z
,
˝˝Z [

Referencia
˛˛8 B
=
˛˛C D
c
˛˛E F
.
˛˛F G
Element
˛˛G N
(
˛˛N O
$str
˛˛O [
)
˛˛[ \
.
˛˛\ ]
Value
˛˛] b
,
˛˛b c
	FormaPago
ˇˇ8 A
=
ˇˇB C
c
ˇˇD E
.
ˇˇE F
Element
ˇˇF M
(
ˇˇM N
$str
ˇˇN Y
)
ˇˇY Z
.
ˇˇZ [
Value
ˇˇ[ `
,
ˇˇ` a
Nombre
ÄÄ8 >
=
ÄÄ? @
c
ÄÄA B
.
ÄÄB C
Element
ÄÄC J
(
ÄÄJ K
$str
ÄÄK S
)
ÄÄS T
.
ÄÄT U
Value
ÄÄU Z
,
ÄÄZ ["
DocumentoFacturacion
ÅÅ8 L
=
ÅÅM N
c
ÅÅO P
.
ÅÅP Q
Element
ÅÅQ X
(
ÅÅX Y
$str
ÅÅY o
)
ÅÅo p
.
ÅÅp q
Value
ÅÅq v
,
ÅÅv w
Telefono
ÇÇ8 @
=
ÇÇA B
c
ÇÇC D
.
ÇÇD E
Element
ÇÇE L
(
ÇÇL M
$str
ÇÇM W
)
ÇÇW X
.
ÇÇX Y
Value
ÇÇY ^
,
ÇÇ^ _
	Direccion
ÉÉ8 A
=
ÉÉB C
c
ÉÉD E
.
ÉÉE F
Element
ÉÉF M
(
ÉÉM N
$str
ÉÉN Y
)
ÉÉY Z
.
ÉÉZ [
Value
ÉÉ[ `
,
ÉÉ` a
Correo
ÑÑ8 >
=
ÑÑ? @
c
ÑÑA B
.
ÑÑB C
Element
ÑÑC J
(
ÑÑJ K
$str
ÑÑK S
)
ÑÑS T
.
ÑÑT U
Value
ÑÑU Z
,
ÑÑZ [
Total
ÖÖ8 =
=
ÖÖ> ?
Convert
ÖÖ@ G
.
ÖÖG H
	ToDecimal
ÖÖH Q
(
ÖÖQ R
c
ÖÖR S
.
ÖÖS T
Element
ÖÖT [
(
ÖÖ[ \
$str
ÖÖ\ c
)
ÖÖc d
.
ÖÖd e
Value
ÖÖe j
,
ÖÖj k
new
ÖÖl o
CultureInfo
ÖÖp {
(
ÖÖ{ |
$strÖÖ| É
)ÖÖÉ Ñ
)ÖÖÑ Ö
,ÖÖÖ Ü

FechaTexto
ÜÜ8 B
=
ÜÜC D
c
ÜÜE F
.
ÜÜF G
Element
ÜÜG N
(
ÜÜN O
$str
ÜÜO V
)
ÜÜV W
.
ÜÜW X
Value
ÜÜX ]
,
ÜÜ] ^

HoraRecojo
áá8 B
=
ááC D
c
ááE F
.
ááF G
Element
ááG N
(
ááN O
$str
ááO [
)
áá[ \
.
áá\ ]
Value
áá] b
,
ááb c
Tipo
àà8 <
=
àà= >
c
àà? @
.
àà@ A
Element
ààA H
(
ààH I
$str
ààI O
)
ààO P
.
ààP Q
Value
ààQ V
,
ààV W
oDetalleCompra
ââ8 F
=
ââG H
(
ââI J
from
ââJ N
d
ââO P
in
ââQ S
c
ââT U
.
ââU V
Element
ââV ]
(
ââ] ^
$str
ââ^ p
)
ââp q
.
ââq r
Elements
ââr z
(
ââz {
$strââ{ Ö
)ââÖ Ü
select
ääJ P
new
ääQ T
DetalleCompra
ääU b
(
ääb c
)
ääc d
{
ããJ K
	oProducto
ååN W
=
ååX Y
new
ååZ ]
Producto
åå^ f
(
ååf g
)
ååg h
{
ççN O
oMarca
ééR X
=
ééY Z
new
éé[ ^
Marca
éé_ d
(
ééd e
)
éée f
{
éég h
Descripcion
ééi t
=
ééu v
d
ééw x
.
ééx y
Elementééy Ä
(ééÄ Å
$strééÅ é
)ééé è
.ééè ê
Valueééê ï
}ééñ ó
,ééó ò
Nombre
èèR X
=
èèY Z
d
èè[ \
.
èè\ ]
Element
èè] d
(
èèd e
$str
èèe m
)
èèm n
.
èèn o
Value
èèo t
,
èèt u

RutaImagen
êêR \
=
êê] ^
d
êê_ `
.
êê` a
Element
êêa h
(
êêh i
$str
êêi u
)
êêu v
.
êêv w
Value
êêw |
}
ëëN O
,
ëëO P
Adicionales
ííN Y
=
ííZ [
d
íí\ ]
.
íí] ^
Element
íí^ e
(
ííe f
$str
ííf s
)
íís t
.
íít u
Value
ííu z
,
ííz {
Total
ììN S
=
ììT U
Convert
ììV ]
.
ìì] ^
	ToDecimal
ìì^ g
(
ììg h
d
ììh i
.
ììi j
Element
ììj q
(
ììq r
$str
ììr y
)
ììy z
.
ììz {
Valueìì{ Ä
,ììÄ Å
newììÇ Ö
CultureInfoììÜ ë
(ììë í
$strììí ô
)ììô ö
)ììö õ
,ììõ ú
PrecioExtra
îîN Y
=
îîZ [
Convert
îî\ c
.
îîc d
	ToDecimal
îîd m
(
îîm n
d
îîn o
.
îîo p
Element
îîp w
(
îîw x
$strîîx Ö
)îîÖ Ü
.îîÜ á
Valueîîá å
,îîå ç
newîîé ë
CultureInfoîîí ù
(îîù û
$strîîû •
)îî• ¶
)îî¶ ß
,îîß ®
Cantidad
ïïN V
=
ïïW X
Convert
ïïY `
.
ïï` a
ToInt32
ïïa h
(
ïïh i
d
ïïi j
.
ïïj k
Element
ïïk r
(
ïïr s
$str
ïïs }
)
ïï} ~
.
ïï~ 
Valueïï Ñ
)ïïÑ Ö
,ïïÖ Ü
ObservacionesDC
ññN ]
=
ññ^ _
d
ññ` a
.
ñña b
Element
ññb i
(
ññi j
$str
ññj {
)
ññ{ |
.
ññ| }
Valueññ} Ç
,ññÇ É
}
óóJ K
)
óóK L
.
óóL M
ToList
óóM S
(
óóS T
)
óóT U
}
òò4 5
)
òò5 6
.
òò6 7
ToList
òò7 =
(
òò= >
)
òò> ?
;
òò? @
}
ôô 
else
öö  
{
õõ 
rptDetalleCompra
úú  0
=
úú1 2
new
úú3 6
List
úú7 ;
<
úú; <
Compra
úú< B
>
úúB C
(
úúC D
)
úúD E
;
úúE F
}
ùù 
}
ûû 
dr
üü 
.
üü 
Close
üü  
(
üü  !
)
üü! "
;
üü" #
}
†† 
return
°° 
rptDetalleCompra
°° +
;
°°+ ,
}
¢¢ 
catch
££ 
(
££ 
	Exception
££  
ex
££! #
)
££# $
{
§§ 
rptDetalleCompra
•• $
=
••% &
null
••' +
;
••+ ,
return
¶¶ 
rptDetalleCompra
¶¶ +
;
¶¶+ ,
}
ßß 
}
®® 
}
©© 	
}
´´ 
}¨¨ ∫S
fC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\CategoriaLogica.cs
	namespace		 	
ProyectoTest		
 
.		 
Logica		 
{

 
public 

class 
CategoriaLogica  
{ 
private 
static 
CategoriaLogica &

_instancia' 1
=2 3
null4 8
;8 9
public 
CategoriaLogica 
( 
)  
{! "
} 	
public 
static 
CategoriaLogica %
	Instancia& /
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{ 

_instancia 
=  
new! $
CategoriaLogica% 4
(4 5
)5 6
;6 7
} 
return 

_instancia !
;! "
} 
} 	
public   
List   
<   
	Categoria   
>   
Listar   %
(  % &
)  & '
{  ( )
List"" 
<"" 
	Categoria"" 
>"" 
rptListaCategoria"" -
="". /
new""0 3
List""4 8
<""8 9
	Categoria""9 B
>""B C
(""C D
)""D E
;""E F
using## 
(## 
SqlConnection##  
	oConexion##! *
=##+ ,
new##- 0
SqlConnection##1 >
(##> ?
Conexion##? G
.##G H
CN##H J
)##J K
)##K L
{$$ 

SqlCommand%% 
cmd%% 
=%%  
new%%! $

SqlCommand%%% /
(%%/ 0
$str%%0 E
,%%E F
	oConexion%%G P
)%%P Q
;%%Q R
cmd&& 
.&& 
CommandType&& 
=&&  !
CommandType&&" -
.&&- .
StoredProcedure&&. =
;&&= >
try(( 
{)) 
	oConexion** 
.** 
Open** "
(**" #
)**# $
;**$ %
SqlDataReader++ !
dr++" $
=++% &
cmd++' *
.++* +
ExecuteReader+++ 8
(++8 9
)++9 :
;++: ;
while-- 
(-- 
dr-- 
.-- 
Read-- "
(--" #
)--# $
)--$ %
{.. 
rptListaCategoria// )
.//) *
Add//* -
(//- .
new//. 1
	Categoria//2 ;
(//; <
)//< =
{00 
IdCategoria11 '
=11( )
Convert11* 1
.111 2
ToInt32112 9
(119 :
dr11: <
[11< =
$str11= J
]11J K
.11K L
ToString11L T
(11T U
)11U V
)11V W
,11W X
Descripcion22 '
=22( )
dr22* ,
[22, -
$str22- :
]22: ;
.22; <
ToString22< D
(22D E
)22E F
,22F G
Activo33 "
=33# $
Convert33% ,
.33, -
	ToBoolean33- 6
(336 7
dr337 9
[339 :
$str33: B
]33B C
.33C D
ToString33D L
(33L M
)33M N
)33N O
}44 
)44 
;44 
}55 
dr66 
.66 
Close66 
(66 
)66 
;66 
return88 
rptListaCategoria88 ,
;88, -
}:: 
catch;; 
(;; 
	Exception;;  
ex;;! #
);;# $
{<< 
rptListaCategoria== %
===& '
null==( ,
;==, -
return>> 
rptListaCategoria>> ,
;>>, -
}?? 
}@@ 
}AA 	
publicDD 
boolDD 
	RegistrarDD 
(DD 
	CategoriaDD '

oCategoriaDD( 2
)DD2 3
{EE 	
boolFF 
	respuestaFF 
=FF 
trueFF !
;FF! "
usingGG 
(GG 
SqlConnectionGG  
	oConexionGG! *
=GG+ ,
newGG- 0
SqlConnectionGG1 >
(GG> ?
ConexionGG? G
.GGG H
CNGGH J
)GGJ K
)GGK L
{HH 
tryII 
{JJ 

SqlCommandKK 
cmdKK "
=KK# $
newKK% (

SqlCommandKK) 3
(KK3 4
$strKK4 K
,KKK L
	oConexionKKM V
)KKV W
;KKW X
cmdLL 
.LL 

ParametersLL "
.LL" #
AddWithValueLL# /
(LL/ 0
$strLL0 =
,LL= >

oCategoriaLL? I
.LLI J
DescripcionLLJ U
)LLU V
;LLV W
cmdMM 
.MM 

ParametersMM "
.MM" #
AddMM# &
(MM& '
$strMM' 2
,MM2 3
	SqlDbTypeMM4 =
.MM= >
BitMM> A
)MMA B
.MMB C
	DirectionMMC L
=MMM N
ParameterDirectionMMO a
.MMa b
OutputMMb h
;MMh i
cmdNN 
.NN 
CommandTypeNN #
=NN$ %
CommandTypeNN& 1
.NN1 2
StoredProcedureNN2 A
;NNA B
	oConexionPP 
.PP 
OpenPP "
(PP" #
)PP# $
;PP$ %
cmdRR 
.RR 
ExecuteNonQueryRR '
(RR' (
)RR( )
;RR) *
	respuestaTT 
=TT 
ConvertTT  '
.TT' (
	ToBooleanTT( 1
(TT1 2
cmdTT2 5
.TT5 6

ParametersTT6 @
[TT@ A
$strTTA L
]TTL M
.TTM N
ValueTTN S
)TTS T
;TTT U
}VV 
catchWW 
(WW 
	ExceptionWW  
exWW! #
)WW# $
{XX 
	respuestaYY 
=YY 
falseYY  %
;YY% &
}ZZ 
}[[ 
return\\ 
	respuesta\\ 
;\\ 
}]] 	
public__ 
bool__ 
	Modificar__ 
(__ 
	Categoria__ '

oCategoria__( 2
)__2 3
{`` 	
boolaa 
	respuestaaa 
=aa 
trueaa !
;aa! "
usingbb 
(bb 
SqlConnectionbb  
	oConexionbb! *
=bb+ ,
newbb- 0
SqlConnectionbb1 >
(bb> ?
Conexionbb? G
.bbG H
CNbbH J
)bbJ K
)bbK L
{cc 
trydd 
{ee 

SqlCommandff 
cmdff "
=ff# $
newff% (

SqlCommandff) 3
(ff3 4
$strff4 K
,ffK L
	oConexionffM V
)ffV W
;ffW X
cmdgg 
.gg 

Parametersgg "
.gg" #
AddWithValuegg# /
(gg/ 0
$strgg0 =
,gg= >

oCategoriagg? I
.ggI J
IdCategoriaggJ U
)ggU V
;ggV W
cmdhh 
.hh 

Parametershh "
.hh" #
AddWithValuehh# /
(hh/ 0
$strhh0 =
,hh= >

oCategoriahh? I
.hhI J
DescripcionhhJ U
)hhU V
;hhV W
cmdii 
.ii 

Parametersii "
.ii" #
AddWithValueii# /
(ii/ 0
$strii0 8
,ii8 9

oCategoriaii: D
.iiD E
ActivoiiE K
)iiK L
;iiL M
cmdjj 
.jj 

Parametersjj "
.jj" #
Addjj# &
(jj& '
$strjj' 2
,jj2 3
	SqlDbTypejj4 =
.jj= >
Bitjj> A
)jjA B
.jjB C
	DirectionjjC L
=jjM N
ParameterDirectionjjO a
.jja b
Outputjjb h
;jjh i
cmdll 
.ll 
CommandTypell #
=ll$ %
CommandTypell& 1
.ll1 2
StoredProcedurell2 A
;llA B
	oConexionnn 
.nn 
Opennn "
(nn" #
)nn# $
;nn$ %
cmdpp 
.pp 
ExecuteNonQuerypp '
(pp' (
)pp( )
;pp) *
	respuestarr 
=rr 
Convertrr  '
.rr' (
	ToBooleanrr( 1
(rr1 2
cmdrr2 5
.rr5 6

Parametersrr6 @
[rr@ A
$strrrA L
]rrL M
.rrM N
ValuerrN S
)rrS T
;rrT U
}tt 
catchuu 
(uu 
	Exceptionuu  
exuu! #
)uu# $
{vv 
	respuestaww 
=ww 
falseww  %
;ww% &
}xx 
}zz 
return|| 
	respuesta|| 
;|| 
}~~ 	
public
ÄÄ 
bool
ÄÄ 
Eliminar
ÄÄ 
(
ÄÄ 
int
ÄÄ  
id
ÄÄ! #
)
ÄÄ# $
{
ÅÅ 	
bool
ÇÇ 
	respuesta
ÇÇ 
=
ÇÇ 
true
ÇÇ !
;
ÇÇ! "
using
ÉÉ 
(
ÉÉ 
SqlConnection
ÉÉ  
	oConexion
ÉÉ! *
=
ÉÉ+ ,
new
ÉÉ- 0
SqlConnection
ÉÉ1 >
(
ÉÉ> ?
Conexion
ÉÉ? G
.
ÉÉG H
CN
ÉÉH J
)
ÉÉJ K
)
ÉÉK L
{
ÑÑ 
try
ÖÖ 
{
ÜÜ 

SqlCommand
áá 
cmd
áá "
=
áá# $
new
áá% (

SqlCommand
áá) 3
(
áá3 4
$str
áá4 c
,
áác d
	oConexion
ááe n
)
áán o
;
ááo p
cmd
àà 
.
àà 

Parameters
àà "
.
àà" #
AddWithValue
àà# /
(
àà/ 0
$str
àà0 5
,
àà5 6
id
àà7 9
)
àà9 :
;
àà: ;
cmd
ââ 
.
ââ 
CommandType
ââ #
=
ââ$ %
CommandType
ââ& 1
.
ââ1 2
Text
ââ2 6
;
ââ6 7
	oConexion
ãã 
.
ãã 
Open
ãã "
(
ãã" #
)
ãã# $
;
ãã$ %
cmd
çç 
.
çç 
ExecuteNonQuery
çç '
(
çç' (
)
çç( )
;
çç) *
	respuesta
èè 
=
èè 
true
èè  $
;
èè$ %
}
ëë 
catch
íí 
(
íí 
	Exception
íí  
ex
íí! #
)
íí# $
{
ìì 
	respuesta
îî 
=
îî 
false
îî  %
;
îî% &
}
ïï 
}
óó 
return
ôô 
	respuesta
ôô 
;
ôô 
}
õõ 	
}
ùù 
}ûû ÆQ
cC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\CompraLogica.cs
	namespace

 	
ProyectoTest


 
.

 
Logica

 
{ 
public 

class 
CompraLogica 
{ 
private 
static 
CompraLogica #

_instancia$ .
=/ 0
null1 5
;5 6
public 
CompraLogica 
( 
) 
{ 	
} 	
public 
static 
CompraLogica "
	Instancia# ,
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{ 

_instancia 
=  
new! $
CompraLogica% 1
(1 2
)2 3
;3 4
} 
return 

_instancia !
;! "
} 
}   	
public"" 
bool"" 
	Registrar"" 
("" 
Compra"" $
oCompra""% ,
)"", -
{## 	
bool$$ 
	respuesta$$ 
=$$ 
false$$ "
;$$" #
using%% 
(%% 
SqlConnection%%  
	oConexion%%! *
=%%+ ,
new%%- 0
SqlConnection%%1 >
(%%> ?
Conexion%%? G
.%%G H
CN%%H J
)%%J K
)%%K L
{&& 
try'' 
{(( 
StringBuilder)) !
query))" '
=))( )
new))* -
StringBuilder)). ;
()); <
)))< =
;))= >
foreach** 
(** 
DetalleCompra** *
dc**+ -
in**. 0
oCompra**1 8
.**8 9
oDetalleCompra**9 G
)**G H
{++ 
query,, 
.,, 

AppendLine,, (
(,,( )
$str	,,) ¥
+
,,µ ∂
dc
,,∑ π
.
,,π ∫

IdProducto
,,∫ ƒ
+
,,≈ ∆
$str
,,«  
+
,,À Ã
dc
,,Õ œ
.
,,œ –
Cantidad
,,– ÿ
+
,,Ÿ ⁄
$str
,,€ ﬁ
+
,,ﬂ ‡
dc
,,· „
.
,,„ ‰
Total
,,‰ È
+
,,Í Î
$str
,,Ï 
+
,,Ò Ú
dc
,,Û ı
.
,,ı ˆ
Nombre
,,ˆ ¸
+
,,˝ ˛
$str
,,ˇ Ñ
+
,,Ö Ü
dc
,,á â
.
,,â ä
Adicionales
,,ä ï
+
,,ñ ó
$str
,,ò ú
+
,,ù û
dc
,,ü °
.
,,° ¢
PrecioExtra
,,¢ ≠
+
,,Æ Ø
$str
,,∞ ¥
+
,,µ ∂
dc
,,∑ π
.
,,π ∫
ObservacionesDC
,,∫ …
+
,,  À
$str
,,Ã –
)
,,– —
;
,,— “
}-- 

SqlCommand// 
cmd// "
=//# $
new//% (

SqlCommand//) 3
(//3 4
$str//4 H
,//H I
	oConexion//J S
)//S T
;//T U
cmd00 
.00 

Parameters00 "
.00" #
AddWithValue00# /
(00/ 0
$str000 ;
,00; <
oCompra00= D
.00D E
	IdUsuario00E N
)00N O
;00O P
cmd11 
.11 

Parameters11 "
.11" #
AddWithValue11# /
(11/ 0
$str110 ?
,11? @
oCompra11A H
.11H I
TotalProducto11I V
)11V W
;11W X
cmd22 
.22 

Parameters22 "
.22" #
AddWithValue22# /
(22/ 0
$str220 7
,227 8
oCompra229 @
.22@ A
Total22A F
)22F G
;22G H
cmd33 
.33 

Parameters33 "
.33" #
AddWithValue33# /
(33/ 0
$str330 ;
,33; <
oCompra33= D
.33D E
	Direccion33E N
)33N O
;33O P
cmd44 
.44 

Parameters44 "
.44" #
AddWithValue44# /
(44/ 0
$str440 8
,448 9
oCompra44: A
.44A B
Nombre44B H
)44H I
;44I J
cmd55 
.55 

Parameters55 "
.55" #
AddWithValue55# /
(55/ 0
$str550 :
,55: ;
oCompra55< C
.55C D
Telefono55D L
)55L M
;55M N
cmd66 
.66 

Parameters66 "
.66" #
AddWithValue66# /
(66/ 0
$str660 8
,668 9
oCompra66: A
.66A B
Correo66B H
)66H I
;66I J
cmd77 
.77 

Parameters77 "
.77" #
AddWithValue77# /
(77/ 0
$str770 <
,77< =
oCompra77> E
.77E F

Referencia77F P
)77P Q
;77Q R
cmd88 
.88 

Parameters88 "
.88" #
AddWithValue88# /
(88/ 0
$str880 F
,88F G
oCompra88H O
.88O P 
DocumentoFacturacion88P d
)88d e
;88e f
cmd99 
.99 

Parameters99 "
.99" #
AddWithValue99# /
(99/ 0
$str990 ;
,99; <
oCompra99= D
.99D E
	FormaPago99E N
)99N O
;99O P
cmd:: 
.:: 

Parameters:: "
.::" #
AddWithValue::# /
(::/ 0
$str::0 <
,::< =
oCompra::> E
.::E F

HoraRecojo::F P
)::P Q
;::Q R
cmd;; 
.;; 

Parameters;; "
.;;" #
AddWithValue;;# /
(;;/ 0
$str;;0 6
,;;6 7
oCompra;;8 ?
.;;? @
Tipo;;@ D
);;D E
;;;E F
cmd<< 
.<< 

Parameters<< "
.<<" #
AddWithValue<<# /
(<</ 0
$str<<0 D
,<<D E
query<<F K
.<<K L
ToString<<L T
(<<T U
)<<U V
)<<V W
;<<W X
cmd== 
.== 

Parameters== "
.==" #
Add==# &
(==& '
$str==' 2
,==2 3
	SqlDbType==4 =
.=== >
Bit==> A
)==A B
.==B C
	Direction==C L
===M N
ParameterDirection==O a
.==a b
Output==b h
;==h i
cmd>> 
.>> 

Parameters>> "
.>>" #
Add>># &
(>>& '
$str>>' 1
,>>1 2
	SqlDbType>>3 <
.>>< =
Int>>= @
)>>@ A
.>>A B
	Direction>>B K
=>>L M
ParameterDirection>>N `
.>>` a
Output>>a g
;>>g h
cmd?? 
.?? 
CommandType?? #
=??$ %
CommandType??& 1
.??1 2
StoredProcedure??2 A
;??A B
	oConexionAA 
.AA 
OpenAA "
(AA" #
)AA# $
;AA$ %
cmdBB 
.BB 
ExecuteNonQueryBB '
(BB' (
)BB( )
;BB) *
	respuestaCC 
=CC 
ConvertCC  '
.CC' (
	ToBooleanCC( 1
(CC1 2
cmdCC2 5
.CC5 6

ParametersCC6 @
[CC@ A
$strCCA L
]CCL M
.CCM N
ValueCCN S
)CCS T
;CCT U
oCompraDD 
.DD 
IdCompraDD $
=DD% &
ConvertDD' .
.DD. /
ToInt32DD/ 6
(DD6 7
cmdDD7 :
.DD: ;

ParametersDD; E
[DDE F
$strDDF P
]DDP Q
.DDQ R
ValueDDR W
)DDW X
;DDX Y
}EE 
catchFF 
(FF 
	ExceptionFF  
exFF! #
)FF# $
{GG 
	respuestaHH 
=HH 
falseHH  %
;HH% &
}II 
}JJ 
returnKK 
	respuestaKK 
;KK 
}LL 	
publicOO 
boolOO "
ActualizarEstadoCompraOO *
(OO* +
intOO+ .
idCompraOO/ 7
,OO7 8
stringOO9 ?
nuevoEstadoOO@ K
)OOK L
{PP 	
tryQQ 
{RR 
usingSS 
(SS 
SqlConnectionSS $
	oConexionSS% .
=SS/ 0
newSS1 4
SqlConnectionSS5 B
(SSB C
ConexionSSC K
.SSK L
CNSSL N
)SSN O
)SSO P
{TT 

SqlCommandUU 
cmdUU "
=UU# $
newUU% (

SqlCommandUU) 3
(UU3 4
$strUU4 O
,UUO P
	oConexionUUQ Z
)UUZ [
;UU[ \
cmdVV 
.VV 

ParametersVV "
.VV" #
AddWithValueVV# /
(VV/ 0
$strVV0 :
,VV: ;
idCompraVV< D
)VVD E
;VVE F
cmdWW 
.WW 

ParametersWW "
.WW" #
AddWithValueWW# /
(WW/ 0
$strWW0 8
,WW8 9
nuevoEstadoWW: E
)WWE F
;WWF G
cmdXX 
.XX 

ParametersXX "
.XX" #
AddXX# &
(XX& '
$strXX' 2
,XX2 3
	SqlDbTypeXX4 =
.XX= >
BitXX> A
)XXA B
.XXB C
	DirectionXXC L
=XXM N
ParameterDirectionXXO a
.XXa b
OutputXXb h
;XXh i
cmdYY 
.YY 
CommandTypeYY #
=YY$ %
CommandTypeYY& 1
.YY1 2
StoredProcedureYY2 A
;YYA B
	oConexion[[ 
.[[ 
Open[[ "
([[" #
)[[# $
;[[$ %
cmd\\ 
.\\ 
ExecuteNonQuery\\ '
(\\' (
)\\( )
;\\) *
bool]] 
	resultado]] "
=]]# $
Convert]]% ,
.]], -
	ToBoolean]]- 6
(]]6 7
cmd]]7 :
.]]: ;

Parameters]]; E
[]]E F
$str]]F Q
]]]Q R
.]]R S
Value]]S X
)]]X Y
;]]Y Z
return__ 
	resultado__ $
;__$ %
}`` 
}aa 
catchbb 
(bb 
	Exceptionbb 
exbb 
)bb  
{cc 
throwee 
exee 
;ee 
}ff 
}gg 	
}kk 
}ll ß
_C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\Conexion.cs
	namespace 	
ProyectoTest
 
. 
Logica 
{ 
public		 

class		 
Conexion		 
{

 
public 
static 
string 
CN 
=  !
$str	" ó
;
ó ò
} 
} ÿR
bC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\MarcaLogica.cs
	namespace		 	
ProyectoTest		
 
.		 
Logica		 
{

 
public 

class 
MarcaLogica 
{ 
private 
static 
MarcaLogica "

_instancia# -
=. /
null0 4
;4 5
public 
MarcaLogica 
( 
) 
{ 	
} 	
public 
static 
MarcaLogica !
	Instancia" +
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{ 

_instancia 
=  
new! $
MarcaLogica% 0
(0 1
)1 2
;2 3
} 
return 

_instancia !
;! "
} 
} 	
public!! 
List!! 
<!! 
Marca!! 
>!! 
Listar!! !
(!!! "
)!!" #
{"" 	
List$$ 
<$$ 
Marca$$ 
>$$ 
rptListaMarca$$ %
=$$& '
new$$( +
List$$, 0
<$$0 1
Marca$$1 6
>$$6 7
($$7 8
)$$8 9
;$$9 :
using%% 
(%% 
SqlConnection%%  
	oConexion%%! *
=%%+ ,
new%%- 0
SqlConnection%%1 >
(%%> ?
Conexion%%? G
.%%G H
CN%%H J
)%%J K
)%%K L
{&& 

SqlCommand'' 
cmd'' 
=''  
new''! $

SqlCommand''% /
(''/ 0
$str''0 A
,''A B
	oConexion''C L
)''L M
;''M N
cmd(( 
.(( 
CommandType(( 
=((  !
CommandType((" -
.((- .
StoredProcedure((. =
;((= >
try** 
{++ 
	oConexion,, 
.,, 
Open,, "
(,," #
),,# $
;,,$ %
SqlDataReader-- !
dr--" $
=--% &
cmd--' *
.--* +
ExecuteReader--+ 8
(--8 9
)--9 :
;--: ;
while// 
(// 
dr// 
.// 
Read// "
(//" #
)//# $
)//$ %
{00 
rptListaMarca11 %
.11% &
Add11& )
(11) *
new11* -
Marca11. 3
(113 4
)114 5
{22 
IdMarca33 #
=33$ %
Convert33& -
.33- .
ToInt3233. 5
(335 6
dr336 8
[338 9
$str339 B
]33B C
.33C D
ToString33D L
(33L M
)33M N
)33N O
,33O P
Descripcion44 '
=44( )
dr44* ,
[44, -
$str44- :
]44: ;
.44; <
ToString44< D
(44D E
)44E F
,44F G
Activo55 "
=55# $
Convert55% ,
.55, -
	ToBoolean55- 6
(556 7
dr557 9
[559 :
$str55: B
]55B C
.55C D
ToString55D L
(55L M
)55M N
)55N O
}66 
)66 
;66 
}77 
dr88 
.88 
Close88 
(88 
)88 
;88 
return:: 
rptListaMarca:: (
;::( )
}<< 
catch== 
(== 
	Exception==  
ex==! #
)==# $
{>> 
rptListaMarca?? !
=??" #
null??$ (
;??( )
return@@ 
rptListaMarca@@ (
;@@( )
}AA 
}BB 
}CC 	
publicFF 
boolFF 
	RegistrarFF 
(FF 
MarcaFF #
oMarcaFF$ *
)FF* +
{GG 	
boolHH 
	respuestaHH 
=HH 
trueHH !
;HH! "
usingII 
(II 
SqlConnectionII  
	oConexionII! *
=II+ ,
newII- 0
SqlConnectionII1 >
(II> ?
ConexionII? G
.IIG H
CNIIH J
)IIJ K
)IIK L
{JJ 
tryKK 
{LL 

SqlCommandMM 
cmdMM "
=MM# $
newMM% (

SqlCommandMM) 3
(MM3 4
$strMM4 G
,MMG H
	oConexionMMI R
)MMR S
;MMS T
cmdNN 
.NN 

ParametersNN "
.NN" #
AddWithValueNN# /
(NN/ 0
$strNN0 =
,NN= >
oMarcaNN? E
.NNE F
DescripcionNNF Q
)NNQ R
;NNR S
cmdOO 
.OO 

ParametersOO "
.OO" #
AddOO# &
(OO& '
$strOO' 2
,OO2 3
	SqlDbTypeOO4 =
.OO= >
BitOO> A
)OOA B
.OOB C
	DirectionOOC L
=OOM N
ParameterDirectionOOO a
.OOa b
OutputOOb h
;OOh i
cmdPP 
.PP 
CommandTypePP #
=PP$ %
CommandTypePP& 1
.PP1 2
StoredProcedurePP2 A
;PPA B
	oConexionRR 
.RR 
OpenRR "
(RR" #
)RR# $
;RR$ %
cmdTT 
.TT 
ExecuteNonQueryTT '
(TT' (
)TT( )
;TT) *
	respuestaVV 
=VV 
ConvertVV  '
.VV' (
	ToBooleanVV( 1
(VV1 2
cmdVV2 5
.VV5 6

ParametersVV6 @
[VV@ A
$strVVA L
]VVL M
.VVM N
ValueVVN S
)VVS T
;VVT U
}XX 
catchYY 
(YY 
	ExceptionYY  
exYY! #
)YY# $
{ZZ 
	respuesta[[ 
=[[ 
false[[  %
;[[% &
}\\ 
}]] 
return^^ 
	respuesta^^ 
;^^ 
}__ 	
publicaa 
boolaa 
	Modificaraa 
(aa 
Marcaaa #
oMarcaaa$ *
)aa* +
{bb 	
boolcc 
	respuestacc 
=cc 
truecc !
;cc! "
usingdd 
(dd 
SqlConnectiondd  
	oConexiondd! *
=dd+ ,
newdd- 0
SqlConnectiondd1 >
(dd> ?
Conexiondd? G
.ddG H
CNddH J
)ddJ K
)ddK L
{ee 
tryff 
{gg 

SqlCommandhh 
cmdhh "
=hh# $
newhh% (

SqlCommandhh) 3
(hh3 4
$strhh4 G
,hhG H
	oConexionhhI R
)hhR S
;hhS T
cmdii 
.ii 

Parametersii "
.ii" #
AddWithValueii# /
(ii/ 0
$strii0 9
,ii9 :
oMarcaii; A
.iiA B
IdMarcaiiB I
)iiI J
;iiJ K
cmdjj 
.jj 

Parametersjj "
.jj" #
AddWithValuejj# /
(jj/ 0
$strjj0 =
,jj= >
oMarcajj? E
.jjE F
DescripcionjjF Q
)jjQ R
;jjR S
cmdkk 
.kk 

Parameterskk "
.kk" #
AddWithValuekk# /
(kk/ 0
$strkk0 8
,kk8 9
oMarcakk: @
.kk@ A
ActivokkA G
)kkG H
;kkH I
cmdll 
.ll 

Parametersll "
.ll" #
Addll# &
(ll& '
$strll' 2
,ll2 3
	SqlDbTypell4 =
.ll= >
Bitll> A
)llA B
.llB C
	DirectionllC L
=llM N
ParameterDirectionllO a
.lla b
Outputllb h
;llh i
cmdnn 
.nn 
CommandTypenn #
=nn$ %
CommandTypenn& 1
.nn1 2
StoredProcedurenn2 A
;nnA B
	oConexionpp 
.pp 
Openpp "
(pp" #
)pp# $
;pp$ %
cmdrr 
.rr 
ExecuteNonQueryrr '
(rr' (
)rr( )
;rr) *
	respuestatt 
=tt 
Converttt  '
.tt' (
	ToBooleantt( 1
(tt1 2
cmdtt2 5
.tt5 6

Parameterstt6 @
[tt@ A
$strttA L
]ttL M
.ttM N
ValuettN S
)ttS T
;ttT U
}vv 
catchww 
(ww 
	Exceptionww  
exww! #
)ww# $
{xx 
	respuestayy 
=yy 
falseyy  %
;yy% &
}zz 
}|| 
return~~ 
	respuesta~~ 
;~~ 
}
ÄÄ 	
public
ÇÇ 
bool
ÇÇ 
Eliminar
ÇÇ 
(
ÇÇ 
int
ÇÇ  
id
ÇÇ! #
)
ÇÇ# $
{
ÉÉ 	
bool
ÑÑ 
	respuesta
ÑÑ 
=
ÑÑ 
true
ÑÑ !
;
ÑÑ! "
using
ÖÖ 
(
ÖÖ 
SqlConnection
ÖÖ  
	oConexion
ÖÖ! *
=
ÖÖ+ ,
new
ÖÖ- 0
SqlConnection
ÖÖ1 >
(
ÖÖ> ?
Conexion
ÖÖ? G
.
ÖÖG H
CN
ÖÖH J
)
ÖÖJ K
)
ÖÖK L
{
ÜÜ 
try
áá 
{
àà 

SqlCommand
ââ 
cmd
ââ "
=
ââ# $
new
ââ% (

SqlCommand
ââ) 3
(
ââ3 4
$str
ââ4 [
,
ââ[ \
	oConexion
ââ] f
)
ââf g
;
ââg h
cmd
ää 
.
ää 

Parameters
ää "
.
ää" #
AddWithValue
ää# /
(
ää/ 0
$str
ää0 5
,
ää5 6
id
ää7 9
)
ää9 :
;
ää: ;
cmd
ãã 
.
ãã 
CommandType
ãã #
=
ãã$ %
CommandType
ãã& 1
.
ãã1 2
Text
ãã2 6
;
ãã6 7
	oConexion
çç 
.
çç 
Open
çç "
(
çç" #
)
çç# $
;
çç$ %
cmd
èè 
.
èè 
ExecuteNonQuery
èè '
(
èè' (
)
èè( )
;
èè) *
	respuesta
ëë 
=
ëë 
true
ëë  $
;
ëë$ %
}
ìì 
catch
îî 
(
îî 
	Exception
îî  
ex
îî! #
)
îî# $
{
ïï 
	respuesta
ññ 
=
ññ 
false
ññ  %
;
ññ% &
}
óó 
}
ôô 
return
õõ 
	respuesta
õõ 
;
õõ 
}
ùù 	
}
ûû 
}üü ±£
eC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\ProductoLogica.cs
	namespace

 	
ProyectoTest


 
.

 
Logica

 
{ 
public 

class 
ProductoLogica 
{ 
private 
static 
ProductoLogica %

_instancia& 0
=1 2
null3 7
;7 8
public 
ProductoLogica 
( 
) 
{ 	
} 	
public 
static 
ProductoLogica $
	Instancia% .
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{ 

_instancia 
=  
new! $
ProductoLogica% 3
(3 4
)4 5
;5 6
} 
return 

_instancia !
;! "
} 
}   	
public"" 
List"" 
<"" 
Producto"" 
>"" 
Listar"" $
(""$ %
)""% &
{## 	
List%% 
<%% 
Producto%% 
>%% 
rptListaProducto%% +
=%%, -
new%%. 1
List%%2 6
<%%6 7
Producto%%7 ?
>%%? @
(%%@ A
)%%A B
;%%B C
using&& 
(&& 
SqlConnection&&  
	oConexion&&! *
=&&+ ,
new&&- 0
SqlConnection&&1 >
(&&> ?
Conexion&&? G
.&&G H
CN&&H J
)&&J K
)&&K L
{'' 

SqlCommand(( 
cmd(( 
=((  
new((! $

SqlCommand((% /
(((/ 0
$str((0 D
,((D E
	oConexion((F O
)((O P
;((P Q
cmd)) 
.)) 
CommandType)) 
=))  !
CommandType))" -
.))- .
StoredProcedure)). =
;))= >
try++ 
{,, 
	oConexion-- 
.-- 
Open-- "
(--" #
)--# $
;--$ %
SqlDataReader.. !
dr.." $
=..% &
cmd..' *
...* +
ExecuteReader..+ 8
(..8 9
)..9 :
;..: ;
while00 
(00 
dr00 
.00 
Read00 "
(00" #
)00# $
)00$ %
{11 
rptListaProducto22 (
.22( )
Add22) ,
(22, -
new22- 0
Producto221 9
(229 :
)22: ;
{33 

IdProducto44 &
=44' (
Convert44) 0
.440 1
ToInt32441 8
(448 9
dr449 ;
[44; <
$str44< H
]44H I
.44I J
ToString44J R
(44R S
)44S T
)44T U
,44U V
Nombre55 "
=55# $
dr55% '
[55' (
$str55( 0
]550 1
.551 2
ToString552 :
(55: ;
)55; <
,55< =
Descripcion66 '
=66( )
dr66* ,
[66, -
$str66- :
]66: ;
.66; <
ToString66< D
(66D E
)66E F
,66F G
OpcionesConCosto77 ,
=77- .
dr77/ 1
[771 2
$str772 D
]77D E
.77E F
ToString77F N
(77N O
)77O P
,77P Q
OpcionesSinCosto88 ,
=88- .
dr88/ 1
[881 2
$str882 D
]88D E
.88E F
ToString88F N
(88N O
)88O P
,88P Q
OpcionExcluyente99 ,
=99- .
dr99/ 1
[991 2
$str992 D
]99D E
.99E F
ToString99F N
(99N O
)99O P
,99P Q
MaxOpcionesSinCosto:: /
=::0 1
Convert::2 9
.::9 :
ToInt32::: A
(::A B
dr::B D
[::D E
$str::E Z
]::Z [
.::[ \
ToString::\ d
(::d e
)::e f
)::f g
,::g h
oMarca;; "
=;;# $
new;;% (
Marca;;) .
(;;. /
);;/ 0
{;;1 2
IdMarca;;3 :
=;;; <
Convert;;= D
.;;D E
ToInt32;;E L
(;;L M
dr;;M O
[;;O P
$str;;P Y
];;Y Z
.;;Z [
ToString;;[ c
(;;c d
);;d e
);;e f
,;;f g
Descripcion;;h s
=;;t u
dr;;v x
[;;x y
$str	;;y ã
]
;;ã å
.
;;å ç
ToString
;;ç ï
(
;;ï ñ
)
;;ñ ó
}
;;ò ô
,
;;ô ö

oCategoria<< &
=<<' (
new<<) ,
	Categoria<<- 6
(<<6 7
)<<7 8
{<<9 :
IdCategoria<<; F
=<<G H
Convert<<I P
.<<P Q
ToInt32<<Q X
(<<X Y
dr<<Y [
[<<[ \
$str<<\ i
]<<i j
.<<j k
ToString<<k s
(<<s t
)<<t u
)<<u v
,<<v w
Descripcion	<<x É
=
<<Ñ Ö
dr
<<Ü à
[
<<à â
$str
<<â ü
]
<<ü †
.
<<† °
ToString
<<° ©
(
<<© ™
)
<<™ ´
}
<<¨ ≠
,
<<≠ Æ
Precio== "
===# $
Convert==% ,
.==, -
	ToDecimal==- 6
(==6 7
dr==7 9
[==9 :
$str==: B
]==B C
.==C D
ToString==D L
(==L M
)==M N
,==N O
new==P S
CultureInfo==T _
(==_ `
$str==` g
)==g h
)==h i
,==i j

RutaImagen>> &
=>>' (
dr>>) +
[>>+ ,
$str>>, 8
]>>8 9
.>>9 :
ToString>>: B
(>>B C
)>>C D
,>>D E
Activo@@ "
=@@# $
Convert@@% ,
.@@, -
	ToBoolean@@- 6
(@@6 7
dr@@7 9
[@@9 :
$str@@: B
]@@B C
.@@C D
ToString@@D L
(@@L M
)@@M N
)@@N O
,@@O P
}AA 
)AA 
;AA 
}BB 
drCC 
.CC 
CloseCC 
(CC 
)CC 
;CC 
returnEE 
rptListaProductoEE +
;EE+ ,
}GG 
catchHH 
(HH 
	ExceptionHH  
)HH  !
{II 
rptListaProductoJJ $
=JJ% &
nullJJ' +
;JJ+ ,
returnKK 
rptListaProductoKK +
;KK+ ,
}LL 
}MM 
}NN 	
publicRR 
intRR 
	RegistrarRR 
(RR 
ProductoRR %
	oProductoRR& /
)RR/ 0
{SS 	
intTT 
	respuestaTT 
=TT 
$numTT 
;TT 
usingUU 
(UU 
SqlConnectionUU  
	oConexionUU! *
=UU+ ,
newUU- 0
SqlConnectionUU1 >
(UU> ?
ConexionUU? G
.UUG H
CNUUH J
)UUJ K
)UUK L
{VV 
tryWW 
{XX 
	oConexionZZ 
.ZZ 
OpenZZ "
(ZZ" #
)ZZ# $
;ZZ$ %
string\\ 
	sqlInsert\\ (
=\\) *
$str	\\+ Õ
+
\\Œ œ
$str	]]+  
+
]]À Ã
$str^^+ D
;^^D E
using`` 
(`` 

SqlCommand`` )
command``* 1
=``2 3
new``4 7

SqlCommand``8 B
(``B C
	sqlInsert``C L
,``L M
	oConexion``N W
)``W X
)``X Y
{aa 
commandcc #
.cc# $

Parameterscc$ .
.cc. /
AddWithValuecc/ ;
(cc; <
$strcc< E
,ccE F
	oProductoccG P
.ccP Q
NombreccQ W
)ccW X
;ccX Y
commanddd #
.dd# $

Parametersdd$ .
.dd. /
AddWithValuedd/ ;
(dd; <
$strdd< J
,ddJ K
	oProductoddL U
.ddU V
DescripcionddV a
)dda b
;ddb c
commandee #
.ee# $

Parametersee$ .
.ee. /
AddWithValueee/ ;
(ee; <
$stree< F
,eeF G
	oProductoeeH Q
.eeQ R
oMarcaeeR X
.eeX Y
IdMarcaeeY `
)ee` a
;eea b
commandff #
.ff# $

Parametersff$ .
.ff. /
AddWithValueff/ ;
(ff; <
$strff< J
,ffJ K
	oProductoffL U
.ffU V

oCategoriaffV `
.ff` a
IdCategoriaffa l
)ffl m
;ffm n
commandgg #
.gg# $

Parametersgg$ .
.gg. /
AddWithValuegg/ ;
(gg; <
$strgg< E
,ggE F
	oProductoggG P
.ggP Q
PrecioggQ W
)ggW X
;ggX Y
commandhh #
.hh# $

Parametershh$ .
.hh. /
AddWithValuehh/ ;
(hh; <
$strhh< I
,hhI J
	oProductohhK T
.hhT U

RutaImagenhhU _
)hh_ `
;hh` a
commandii #
.ii# $

Parametersii$ .
.ii. /
AddWithValueii/ ;
(ii; <
$strii< O
,iiO P
stringiiQ W
.iiW X
IsNullOrEmptyiiX e
(iie f
	oProductoiif o
.iio p
OpcionesConCosto	iip Ä
)
iiÄ Å
?
iiÇ É
(
iiÑ Ö
object
iiÖ ã
)
iiã å
DBNull
iiå í
.
iií ì
Value
iiì ò
:
iiô ö
	oProducto
iiõ §
.
ii§ •
OpcionesConCosto
ii• µ
)
iiµ ∂
;
ii∂ ∑
commandjj #
.jj# $

Parametersjj$ .
.jj. /
AddWithValuejj/ ;
(jj; <
$strjj< O
,jjO P
stringjjQ W
.jjW X
IsNullOrEmptyjjX e
(jje f
	oProductojjf o
.jjo p
OpcionesSinCosto	jjp Ä
)
jjÄ Å
?
jjÇ É
(
jjÑ Ö
object
jjÖ ã
)
jjã å
DBNull
jjå í
.
jjí ì
Value
jjì ò
:
jjô ö
	oProducto
jjõ §
.
jj§ •
OpcionesSinCosto
jj• µ
)
jjµ ∂
;
jj∂ ∑
commandkk #
.kk# $

Parameterskk$ .
.kk. /
AddWithValuekk/ ;
(kk; <
$strkk< O
,kkO P
stringkkQ W
.kkW X
IsNullOrEmptykkX e
(kke f
	oProductokkf o
.kko p
OpcionExcluyente	kkp Ä
)
kkÄ Å
?
kkÇ É
(
kkÑ Ö
object
kkÖ ã
)
kkã å
DBNull
kkå í
.
kkí ì
Value
kkì ò
:
kkô ö
	oProducto
kkõ §
.
kk§ •
OpcionExcluyente
kk• µ
)
kkµ ∂
;
kk∂ ∑
commandll #
.ll# $

Parametersll$ .
.ll. /
AddWithValuell/ ;
(ll; <
$strll< R
,llR S
	oProductollT ]
.ll] ^
MaxOpcionesSinCostoll^ q
)llq r
;llr s
intoo 
newProductIdoo  ,
=oo- .
Convertoo/ 6
.oo6 7
ToInt32oo7 >
(oo> ?
commandoo? F
.ooF G
ExecuteScalarooG T
(ooT U
)ooU V
)ooV W
;ooW X
returnqq "
newProductIdqq$ 0
;qq0 1
}
ÜÜ 
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ  
)
ââ  !
{
ää 
	respuesta
ãã 
=
ãã 
$num
ãã  !
;
ãã! "
}
åå 
}
çç 
return
éé 
	respuesta
éé 
;
éé 
}
èè 	
public
íí 
bool
íí 
	Modificar
íí 
(
íí 
Producto
íí &
	oProducto
íí' 0
)
íí0 1
{
ìì 	
bool
îî 
	respuesta
îî 
=
îî 
false
îî "
;
îî" #
using
ïï 
(
ïï 
SqlConnection
ïï  
	oConexion
ïï! *
=
ïï+ ,
new
ïï- 0
SqlConnection
ïï1 >
(
ïï> ?
Conexion
ïï? G
.
ïïG H
CN
ïïH J
)
ïïJ K
)
ïïK L
{
ññ 
try
óó 
{
òò 

SqlCommand
ôô 
cmd
ôô "
=
ôô# $
new
ôô% (

SqlCommand
ôô) 3
(
ôô3 4
$str
ôô4 G
,
ôôG H
	oConexion
ôôI R
)
ôôR S
;
ôôS T
cmd
öö 
.
öö 

Parameters
öö "
.
öö" #
AddWithValue
öö# /
(
öö/ 0
$str
öö0 <
,
öö< =
	oProducto
öö> G
.
ööG H

IdProducto
ööH R
)
ööR S
;
ööS T
cmd
õõ 
.
õõ 

Parameters
õõ "
.
õõ" #
AddWithValue
õõ# /
(
õõ/ 0
$str
õõ0 8
,
õõ8 9
	oProducto
õõ: C
.
õõC D
Nombre
õõD J
)
õõJ K
;
õõK L
cmd
úú 
.
úú 

Parameters
úú "
.
úú" #
AddWithValue
úú# /
(
úú/ 0
$str
úú0 =
,
úú= >
	oProducto
úú? H
.
úúH I
Descripcion
úúI T
)
úúT U
;
úúU V
cmd
ùù 
.
ùù 

Parameters
ùù "
.
ùù" #
AddWithValue
ùù# /
(
ùù/ 0
$str
ùù0 9
,
ùù9 :
	oProducto
ùù; D
.
ùùD E
oMarca
ùùE K
.
ùùK L
IdMarca
ùùL S
)
ùùS T
;
ùùT U
cmd
ûû 
.
ûû 

Parameters
ûû "
.
ûû" #
AddWithValue
ûû# /
(
ûû/ 0
$str
ûû0 =
,
ûû= >
	oProducto
ûû? H
.
ûûH I

oCategoria
ûûI S
.
ûûS T
IdCategoria
ûûT _
)
ûû_ `
;
ûû` a
cmd
üü 
.
üü 

Parameters
üü "
.
üü" #
AddWithValue
üü# /
(
üü/ 0
$str
üü0 8
,
üü8 9
	oProducto
üü: C
.
üüC D
Precio
üüD J
)
üüJ K
;
üüK L
cmd
†† 
.
†† 

Parameters
†† "
.
††" #
AddWithValue
††# /
(
††/ 0
$str
††0 B
,
††B C
	oProducto
††D M
.
††M N
OpcionesConCosto
††N ^
)
††^ _
;
††_ `
cmd
°° 
.
°° 

Parameters
°° "
.
°°" #
AddWithValue
°°# /
(
°°/ 0
$str
°°0 B
,
°°B C
	oProducto
°°D M
.
°°M N
OpcionesSinCosto
°°N ^
)
°°^ _
;
°°_ `
cmd
¢¢ 
.
¢¢ 

Parameters
¢¢ "
.
¢¢" #
AddWithValue
¢¢# /
(
¢¢/ 0
$str
¢¢0 B
,
¢¢B C
	oProducto
¢¢D M
.
¢¢M N
OpcionExcluyente
¢¢N ^
)
¢¢^ _
;
¢¢_ `
cmd
££ 
.
££ 

Parameters
££ "
.
££" #
AddWithValue
££# /
(
££/ 0
$str
££0 8
,
££8 9
	oProducto
££: C
.
££C D
Activo
££D J
)
££J K
;
££K L
cmd
§§ 
.
§§ 

Parameters
§§ "
.
§§" #
AddWithValue
§§# /
(
§§/ 0
$str
§§0 E
,
§§E F
	oProducto
§§G P
.
§§P Q!
MaxOpcionesSinCosto
§§Q d
)
§§d e
;
§§e f
cmd
•• 
.
•• 

Parameters
•• "
.
••" #
Add
••# &
(
••& '
$str
••' 2
,
••2 3
	SqlDbType
••4 =
.
••= >
Int
••> A
)
••A B
.
••B C
	Direction
••C L
=
••M N 
ParameterDirection
••O a
.
••a b
Output
••b h
;
••h i
cmd
¶¶ 
.
¶¶ 
CommandType
¶¶ #
=
¶¶$ %
CommandType
¶¶& 1
.
¶¶1 2
StoredProcedure
¶¶2 A
;
¶¶A B
	oConexion
®® 
.
®® 
Open
®® "
(
®®" #
)
®®# $
;
®®$ %
cmd
™™ 
.
™™ 
ExecuteNonQuery
™™ '
(
™™' (
)
™™( )
;
™™) *
	respuesta
¨¨ 
=
¨¨ 
Convert
¨¨  '
.
¨¨' (
	ToBoolean
¨¨( 1
(
¨¨1 2
cmd
¨¨2 5
.
¨¨5 6

Parameters
¨¨6 @
[
¨¨@ A
$str
¨¨A L
]
¨¨L M
.
¨¨M N
Value
¨¨N S
)
¨¨S T
;
¨¨T U
}
ÆÆ 
catch
ØØ 
(
ØØ 
	Exception
ØØ  
)
ØØ  !
{
∞∞ 
	respuesta
±± 
=
±± 
false
±±  %
;
±±% &
}
≤≤ 
}
≥≥ 
return
¥¥ 
	respuesta
¥¥ 
;
¥¥ 
}
µµ 	
public
∏∏ 
bool
∏∏ "
ActualizarRutaImagen
∏∏ (
(
∏∏( )
Producto
∏∏) 1
	oProducto
∏∏2 ;
)
∏∏; <
{
ππ 	
bool
∫∫ 
	respuesta
∫∫ 
=
∫∫ 
true
∫∫ !
;
∫∫! "
using
ªª 
(
ªª 
SqlConnection
ªª  
	oConexion
ªª! *
=
ªª+ ,
new
ªª- 0
SqlConnection
ªª1 >
(
ªª> ?
Conexion
ªª? G
.
ªªG H
CN
ªªH J
)
ªªJ K
)
ªªK L
{
ºº 
try
ΩΩ 
{
ææ 

SqlCommand
øø 
cmd
øø "
=
øø# $
new
øø% (

SqlCommand
øø) 3
(
øø3 4
$str
øø4 M
,
øøM N
	oConexion
øøO X
)
øøX Y
;
øøY Z
cmd
¿¿ 
.
¿¿ 

Parameters
¿¿ "
.
¿¿" #
AddWithValue
¿¿# /
(
¿¿/ 0
$str
¿¿0 <
,
¿¿< =
	oProducto
¿¿> G
.
¿¿G H

IdProducto
¿¿H R
)
¿¿R S
;
¿¿S T
cmd
¡¡ 
.
¡¡ 

Parameters
¡¡ "
.
¡¡" #
AddWithValue
¡¡# /
(
¡¡/ 0
$str
¡¡0 <
,
¡¡< =
	oProducto
¡¡> G
.
¡¡G H

RutaImagen
¡¡H R
)
¡¡R S
;
¡¡S T
cmd
¬¬ 
.
¬¬ 
CommandType
¬¬ #
=
¬¬$ %
CommandType
¬¬& 1
.
¬¬1 2
StoredProcedure
¬¬2 A
;
¬¬A B
	oConexion
√√ 
.
√√ 
Open
√√ "
(
√√" #
)
√√# $
;
√√$ %
cmd
ƒƒ 
.
ƒƒ 
ExecuteNonQuery
ƒƒ '
(
ƒƒ' (
)
ƒƒ( )
;
ƒƒ) *
}
≈≈ 
catch
∆∆ 
(
∆∆ 
	Exception
∆∆  
)
∆∆  !
{
«« 
	respuesta
»» 
=
»» 
false
»»  %
;
»»% &
}
…… 
}
   
return
ÀÀ 
	respuesta
ÀÀ 
;
ÀÀ 
}
ÃÃ 	
public
ŒŒ 
bool
ŒŒ 
Eliminar
ŒŒ 
(
ŒŒ 
int
ŒŒ  
id
ŒŒ! #
)
ŒŒ# $
{
œœ 	
bool
–– 
	respuesta
–– 
=
–– 
true
–– !
;
––! "
using
—— 
(
—— 
SqlConnection
——  
	oConexion
——! *
=
——+ ,
new
——- 0
SqlConnection
——1 >
(
——> ?
Conexion
——? G
.
——G H
CN
——H J
)
——J K
)
——K L
{
““ 
try
”” 
{
‘‘ 

SqlCommand
’’ 
cmd
’’ "
=
’’# $
new
’’% (

SqlCommand
’’) 3
(
’’3 4
$str
’’4 a
,
’’a b
	oConexion
’’c l
)
’’l m
;
’’m n
cmd
÷÷ 
.
÷÷ 

Parameters
÷÷ "
.
÷÷" #
AddWithValue
÷÷# /
(
÷÷/ 0
$str
÷÷0 5
,
÷÷5 6
id
÷÷7 9
)
÷÷9 :
;
÷÷: ;
cmd
◊◊ 
.
◊◊ 
CommandType
◊◊ #
=
◊◊$ %
CommandType
◊◊& 1
.
◊◊1 2
Text
◊◊2 6
;
◊◊6 7
	oConexion
ŸŸ 
.
ŸŸ 
Open
ŸŸ "
(
ŸŸ" #
)
ŸŸ# $
;
ŸŸ$ %
cmd
€€ 
.
€€ 
ExecuteNonQuery
€€ '
(
€€' (
)
€€( )
;
€€) *
	respuesta
›› 
=
›› 
true
››  $
;
››$ %
}
ﬂﬂ 
catch
‡‡ 
(
‡‡ 
	Exception
‡‡  
)
‡‡  !
{
·· 
	respuesta
‚‚ 
=
‚‚ 
false
‚‚  %
;
‚‚% &
}
„„ 
}
ÂÂ 
return
ÁÁ 
	respuesta
ÁÁ 
;
ÁÁ 
}
ÈÈ 	
}
ÎÎ 
}ÏÏ ˚É
cC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\CorreoLogica.cs
	namespace 	
ProyectoTest
 
. 
Logica 
{ 
public 

class 
CorreoLogica 
{ 
private 
static 
CorreoLogica #

_instancia$ .
=/ 0
null1 5
;5 6
public 
CorreoLogica 
( 
) 
{ 	
} 	
public 
static 
CorreoLogica "
	Instancia# ,
{ 	
get 
{ 
if   
(   

_instancia   
==   !
null  " &
)  & '
{!! 

_instancia"" 
=""  
new""! $
CorreoLogica""% 1
(""1 2
)""2 3
;""3 4
}## 
return%% 

_instancia%% !
;%%! "
}&& 
}'' 	
public++ 
bool++ 
EnviarCorreo++  
(++  !
Compra++! '
oCompra++( /
)++/ 0
{,, 	
bool-- 
sendMail-- 
=-- 
false-- !
;--! "
try// 
{00 
AppSettingsReader11 !
DatosConexion11" /
=110 1
new112 5
AppSettingsReader116 G
(11G H
)11H I
;11I J
string33 
mail33 
=33 
DatosConexion33 +
.33+ ,
GetValue33, 4
(334 5
$str335 ;
,33; <
typeof33= C
(33C D
string33D J
)33J K
)33K L
.33L M
ToString33M U
(33U V
)33V W
;33W X
string44 
pass44 
=44 
DatosConexion44 +
.44+ ,
GetValue44, 4
(444 5
$str445 ;
,44; <
typeof44= C
(44C D
string44D J
)44J K
)44K L
.44L M
ToString44M U
(44U V
)44V W
;44W X
string66 
idCompraFormateado66 )
=66* +
oCompra66, 3
.663 4
IdCompra664 <
.66< =
ToString66= E
(66E F
$str66F J
)66J K
;66K L
decimal88 
precioTotal88 #
=88$ %
oCompra88& -
.88- .
Total88. 3
;883 4
string99 
DireccionTienda99 &
=99' (
$str99) +
;99+ ,
string:: 
DireccionCliente:: '
=::( )
$str::* ,
;::, -
if;; 
(;; 
oCompra;; 
.;; 
Tipo;;  
==;;! #
$str;;$ ,
);;, -
{<< 
DireccionTienda== #
===$ %
oCompra==& -
.==- .
	Direccion==. 7
;==7 8
DireccionCliente>> $
=>>% &
$str>>' )
;>>) *
oCompra?? 
.?? 
Tipo??  
=??! "
$str??# 5
;??5 6
}AA 
elseAA 
ifAA 
(AA 
oCompraAA #
.AA# $
TipoAA$ (
==AA) +
$strAA, 6
)AA6 7
{BB 
DireccionTiendaCC #
=CC$ %
$strCC& P
;CCP Q
DireccionClienteDD $
=DD% &
oCompraDD' .
.DD. /
	DireccionDD/ 8
;DD8 9
}EE 
stringGG 
imagenGG 
=GG 
$strGG  E
;GGE F
StringBuilderHH 
queryHH #
=HH$ %
newHH& )
StringBuilderHH* 7
(HH7 8
)HH8 9
;HH9 :
stringII 
	tablaHTMLII  
=II! "
$str	II# ©
;
II© ™
foreachKK 
(KK 
DetalleCompraKK &
dcKK' )
inKK* ,
oCompraKK- 4
.KK4 5
oDetalleCompraKK5 C
)KKC D
{LL 
stringMM 
precioExtraFormatMM ,
=MM- .
dcMM/ 1
.MM1 2
PrecioExtraMM2 =
.MM= >
ToStringMM> F
(MMF G
$strMMG M
)MMM N
;MMN O
	tablaHTMLOO 
+=OO  
$strOO! '
;OO' (
	tablaHTMLPP 
+=PP  
$strPP! D
+PPE F
dcPPG I
.PPI J
CantidadPPJ R
+PPS T
$strPPU Z
+PP[ \
$strPP] `
+PPa b
dcPPc e
.PPe f
NombrePPf l
+PPm n
$strPPo z
;PPz {
	tablaHTMLQQ 
+=QQ  
$strQQ! W
+QQX Y
$strQQZ `
+QQa b
precioExtraFormatQQc t
+QQu v
$str	QQw Ç
;
QQÇ É
	tablaHTMLRR 
+=RR  
$strRR! (
;RR( )
	tablaHTMLSS 
+=SS  
$strSS! '
;SS' (
	tablaHTMLTT 
+=TT  
$strTT! \
+TT] ^
dcTT_ a
.TTa b
AdicionalesTTb m
+TTn o
$strTTp w
;TTw x
	tablaHTMLUU 
+=UU  
$strUU! \
+UU] ^
dcUU_ a
.UUa b
ObservacionesDCUUb q
+UUr s
$strUUt {
;UU{ |
	tablaHTMLVV 
+=VV  
$strVV! D
;VVD E
	tablaHTMLWW 
+=WW  
$strWW! (
;WW( )
}XX 
	tablaHTMLYY 
+=YY 
$strYY )
;YY) *
MailMessage[[ 
Correos[[ #
=[[$ %
new[[& )
MailMessage[[* 5
([[5 6
)[[6 7
;[[7 8

SmtpClient\\ 
envio\\  
=\\! "
new\\# &

SmtpClient\\' 1
(\\1 2
)\\2 3
;\\3 4
Correos^^ 
.^^ 
To^^ 
.^^ 
Clear^^  
(^^  !
)^^! "
;^^" #
Correos__ 
.__ 
Attachments__ #
.__# $
Clear__$ )
(__) *
)__* +
;__+ ,
Correosaa 
.aa 
Subjectaa 
=aa  !
$straa" *
;aa* +
Correosbb 
.bb 
Bodybb 
=bb 
$str	bü (
+
üü) *
imagen
üü+ 1
+
üü2 3
$str
ü†4 &
+
††' (
oCompra
††) 0
.
††0 1
Nombre
††1 7
+
††8 9
$str
†°: :
+
°°; < 
idCompraFormateado
°°= O
+
°°P Q
$str
°¢R >
+
¢¢? @
oCompra
¢¢A H
.
¢¢H I

HoraRecojo
¢¢I S
+
¢¢T U
$str
¢£V e
+
££f g
oCompra
££h o
.
££o p
Tipo
££p t
+
££u v
$str
£≠w F
+
≠≠G H
oCompra
≠≠I P
.
≠≠P Q
Nombre
≠≠Q W
+
≠≠X Y
$str
≠∞Z G
+
∞∞H I
DireccionTienda
∞∞J Y
+
∞∞Z [
$str
∞±\ E
+
±±F G
DireccionCliente
±±H X
+
±±Y Z
$str
±µ[ F
+
µµG H
oCompra
µµI P
.
µµP Q"
DocumentoFacturacion
µµQ e
+
µµf g
$str
µπh F
+
ππG H
oCompra
ππI P
.
ππP Q
Telefono
ππQ Y
+
ππZ [
$str
πΩ\ F
+
ΩΩG H
oCompra
ΩΩI P
.
ΩΩP Q
Correo
ΩΩQ W
+
ΩΩX Y
$str
ΩƒZ  
+
ƒƒ! "
	tablaHTML
ƒƒ# ,
+
ƒƒ- .
$str
ƒÀ/ I
+
ÀÀJ K
oCompra
ÀÀL S
.
ÀÀS T
Total
ÀÀT Y
+
ÀÀZ [
$str
À”\ b
+
””c d
oCompra
””e l
.
””l m
Total
””m r
+
””s t
$str
”÷u r
+
÷÷s t
oCompra
÷÷u |
.
÷÷| }
	FormaPago÷÷} Ü
+÷÷á à
$str÷◊â s
+
◊◊t u
oCompra
◊◊v }
.
◊◊} ~
Tipo◊◊~ Ç
+◊◊É Ñ
$str◊›Ö 
;
›› 
Correos
ﬂﬂ 
.
ﬂﬂ 

IsBodyHtml
ﬂﬂ "
=
ﬂﬂ# $
true
ﬂﬂ% )
;
ﬂﬂ) *
Correos
‡‡ 
.
‡‡ 
To
‡‡ 
.
‡‡ 
Add
‡‡ 
(
‡‡ 
oCompra
‡‡ &
.
‡‡& '
Correo
‡‡' -
)
‡‡- .
;
‡‡. /
Correos
‚‚ 
.
‚‚ 
From
‚‚ 
=
‚‚ 
new
‚‚ "
MailAddress
‚‚# .
(
‚‚. /
mail
‚‚/ 3
)
‚‚3 4
;
‚‚4 5
envio
„„ 
.
„„ 
Credentials
„„ !
=
„„" #
new
„„$ '
NetworkCredential
„„( 9
(
„„9 :
mail
„„: >
,
„„> ?
pass
„„@ D
)
„„D E
;
„„E F
envio
ÂÂ 
.
ÂÂ 
Host
ÂÂ 
=
ÂÂ 
$str
ÂÂ -
;
ÂÂ- .
envio
ÊÊ 
.
ÊÊ 
Port
ÊÊ 
=
ÊÊ 
$num
ÊÊ  
;
ÊÊ  !
envio
ÁÁ 
.
ÁÁ 
	EnableSsl
ÁÁ 
=
ÁÁ  !
true
ÁÁ" &
;
ÁÁ& '
envio
ËË 
.
ËË 
Send
ËË 
(
ËË 
Correos
ËË "
)
ËË" #
;
ËË# $
sendMail
ÈÈ 
=
ÈÈ 
true
ÈÈ 
;
ÈÈ  
Console
ÍÍ 
.
ÍÍ 
	WriteLine
ÍÍ !
(
ÍÍ! "
$str
ÍÍ" 2
)
ÍÍ2 3
;
ÍÍ3 4
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
	Exception
ÏÏ 
ex
ÏÏ 
)
ÏÏ  
{
ÌÌ 
Console
ÓÓ 
.
ÓÓ 
	WriteLine
ÓÓ !
(
ÓÓ! "
$str
ÓÓ" ,
+
ÓÓ- .
ex
ÓÓ. 0
.
ÓÓ0 1
Message
ÓÓ1 8
+
ÓÓ9 :
ex
ÓÓ; =
.
ÓÓ= >
ToString
ÓÓ> F
(
ÓÓF G
)
ÓÓG H
)
ÓÓH I
;
ÓÓI J
}
ÔÔ 
return
 
sendMail
 
;
 
}
ÒÒ 	
public
ÙÙ 
bool
ÙÙ 

EnviarVale
ÙÙ 
(
ÙÙ 
int
ÙÙ "
	IdCliente
ÙÙ# ,
,
ÙÙ, -
string
ÙÙ. 4
Email
ÙÙ5 :
)
ÙÙ: ;
{
ıı 	
bool
ˆˆ 
sendMail
ˆˆ 
=
ˆˆ 
false
ˆˆ !
;
ˆˆ! "
try
¯¯ 
{
˘˘ 
AppSettingsReader
˙˙ !
DatosConexion
˙˙" /
=
˙˙0 1
new
˙˙2 5
AppSettingsReader
˙˙6 G
(
˙˙G H
)
˙˙H I
;
˙˙I J
string
˚˚ 
mail
˚˚ 
=
˚˚ 
DatosConexion
˚˚ +
.
˚˚+ ,
GetValue
˚˚, 4
(
˚˚4 5
$str
˚˚5 ;
,
˚˚; <
typeof
˚˚= C
(
˚˚C D
string
˚˚D J
)
˚˚J K
)
˚˚K L
.
˚˚L M
ToString
˚˚M U
(
˚˚U V
)
˚˚V W
;
˚˚W X
string
¸¸ 
pass
¸¸ 
=
¸¸ 
DatosConexion
¸¸ +
.
¸¸+ ,
GetValue
¸¸, 4
(
¸¸4 5
$str
¸¸5 ;
,
¸¸; <
typeof
¸¸= C
(
¸¸C D
string
¸¸D J
)
¸¸J K
)
¸¸K L
.
¸¸L M
ToString
¸¸M U
(
¸¸U V
)
¸¸V W
;
¸¸W X
MailMessage
˛˛ 
Correos
˛˛ #
=
˛˛$ %
new
˛˛& )
MailMessage
˛˛* 5
(
˛˛5 6
)
˛˛6 7
;
˛˛7 8

SmtpClient
ˇˇ 
envio
ˇˇ  
=
ˇˇ! "
new
ˇˇ# &

SmtpClient
ˇˇ' 1
(
ˇˇ1 2
)
ˇˇ2 3
;
ˇˇ3 4
Correos
ÅÅ 
.
ÅÅ 
To
ÅÅ 
.
ÅÅ 
Clear
ÅÅ  
(
ÅÅ  !
)
ÅÅ! "
;
ÅÅ" #
Correos
ÇÇ 
.
ÇÇ 
Attachments
ÇÇ #
.
ÇÇ# $
Clear
ÇÇ$ )
(
ÇÇ) *
)
ÇÇ* +
;
ÇÇ+ ,
Correos
ÉÉ 
.
ÉÉ 
Subject
ÉÉ 
=
ÉÉ  !
$str
ÉÉ" ?
;
ÉÉ? @
string
ÜÜ 
	imagePath
ÜÜ  
=
ÜÜ! "
$strÜÜ# ¨
;ÜÜ¨ ≠
AlternateView
ââ 
av
ââ  
=
ââ! "
GetEmbeddedImage
ââ# 3
(
ââ3 4
	imagePath
ââ4 =
)
ââ= >
;
ââ> ?
string
ãã 
htmlBody
ãã 
=
ãã  !
$@"
ãã" %
$str
ãé% (
{
éé( )
	IdCliente
éé) 2
}
éé2 3
$str
éè3 "
{
èè" #
av
èè# %
.
èè% &
LinkedResources
èè& 5
[
èè5 6
$num
èè6 7
]
èè7 8
.
èè8 9
	ContentId
èè9 B
}
èèB C
$str
èíC 
"
íí 	
;
íí	 

av
îî 
.
îî 
LinkedResources
îî "
[
îî" #
$num
îî# $
]
îî$ %
.
îî% &
ContentLink
îî& 1
=
îî2 3
new
îî4 7
Uri
îî8 ;
(
îî; <
	imagePath
îî< E
)
îîE F
;
îîF G
Correos
ññ 
.
ññ 
AlternateViews
ññ &
.
ññ& '
Add
ññ' *
(
ññ* +
av
ññ+ -
)
ññ- .
;
ññ. /
Correos
óó 
.
óó 

IsBodyHtml
óó "
=
óó# $
true
óó% )
;
óó) *
Correos
òò 
.
òò 
To
òò 
.
òò 
Add
òò 
(
òò 
Email
òò $
)
òò$ %
;
òò% &

Attachment
õõ 
imagenAdjunta
õõ (
=
õõ) *
new
õõ+ .

Attachment
õõ/ 9
(
õõ9 :
	imagePath
õõ: C
)
õõC D
;
õõD E
Correos
úú 
.
úú 
Attachments
úú #
.
úú# $
Add
úú$ '
(
úú' (
imagenAdjunta
úú( 5
)
úú5 6
;
úú6 7
Correos
ûû 
.
ûû 
From
ûû 
=
ûû 
new
ûû "
MailAddress
ûû# .
(
ûû. /
mail
ûû/ 3
)
ûû3 4
;
ûû4 5
envio
üü 
.
üü 
Credentials
üü !
=
üü" #
new
üü$ '
NetworkCredential
üü( 9
(
üü9 :
mail
üü: >
,
üü> ?
pass
üü@ D
)
üüD E
;
üüE F
envio
°° 
.
°° 
Host
°° 
=
°° 
$str
°° -
;
°°- .
envio
¢¢ 
.
¢¢ 
Port
¢¢ 
=
¢¢ 
$num
¢¢  
;
¢¢  !
envio
££ 
.
££ 
	EnableSsl
££ 
=
££  !
true
££" &
;
££& '
envio
§§ 
.
§§ 
Send
§§ 
(
§§ 
Correos
§§ "
)
§§" #
;
§§# $
sendMail
•• 
=
•• 
true
•• 
;
••  
Console
¶¶ 
.
¶¶ 
	WriteLine
¶¶ !
(
¶¶! "
$str
¶¶" O
)
¶¶O P
;
¶¶P Q
}
ßß 
catch
®® 
(
®® 
	Exception
®® 
ex
®® 
)
®®  
{
©© 
Console
™™ 
.
™™ 
	WriteLine
™™ !
(
™™! "
$str
™™" ,
+
™™- .
ex
™™/ 1
.
™™1 2
Message
™™2 9
+
™™: ;
ex
™™< >
.
™™> ?
ToString
™™? G
(
™™G H
)
™™H I
)
™™I J
;
™™J K
}
´´ 
return
¨¨ 
sendMail
¨¨ 
;
¨¨ 
}
≠≠ 	
private
ØØ 
AlternateView
ØØ 
GetEmbeddedImage
ØØ .
(
ØØ. /
string
ØØ/ 5
filePath
ØØ6 >
)
ØØ> ?
{
∞∞ 	
LinkedResource
±± 
res
±± 
=
±±  
new
±±! $
LinkedResource
±±% 3
(
±±3 4
filePath
±±4 <
)
±±< =
;
±±= >
res
≤≤ 
.
≤≤ 
	ContentId
≤≤ 
=
≤≤ 
Guid
≤≤  
.
≤≤  !
NewGuid
≤≤! (
(
≤≤( )
)
≤≤) *
.
≤≤* +
ToString
≤≤+ 3
(
≤≤3 4
)
≤≤4 5
;
≤≤5 6
AlternateView
≥≥ 
alternateView
≥≥ '
=
≥≥( )
AlternateView
≥≥* 7
.
≥≥7 8+
CreateAlternateViewFromString
≥≥8 U
(
≥≥U V
$str
≥≥V X
,
≥≥X Y
null
≥≥Z ^
,
≥≥^ _
MediaTypeNames
≥≥` n
.
≥≥n o
Text
≥≥o s
.
≥≥s t
Html
≥≥t x
)
≥≥x y
;
≥≥y z
alternateView
¥¥ 
.
¥¥ 
LinkedResources
¥¥ )
.
¥¥) *
Add
¥¥* -
(
¥¥- .
res
¥¥. 1
)
¥¥1 2
;
¥¥2 3
return
µµ 
alternateView
µµ  
;
µµ  !
}
∂∂ 	
}
∑∑ 
}∏∏ ır
dC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\TiendasLogica.cs
	namespace 	
ProyectoTest
 
. 
Logica 
{ 
public		 

class		 
TiendasLogica		 
{

 
private 
static 
TiendasLogica $

_instancia% /
=0 1
null2 6
;6 7
public 
TiendasLogica 
( 
) 
{ 	
} 	
public 
static 
TiendasLogica #
	Instancia$ -
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{ 

_instancia 
=  
new! $
TiendasLogica% 2
(2 3
)3 4
;4 5
} 
return 

_instancia !
;! "
} 
} 	
public 
List 
< 
Tiendas 
> 
Listar #
(# $
)$ %
{   	
List!! 
<!! 
Tiendas!! 
>!! 
rptListaTiendas!! )
=!!* +
new!!, /
List!!0 4
<!!4 5
Tiendas!!5 <
>!!< =
(!!= >
)!!> ?
;!!? @
using"" 
("" 
SqlConnection""  
	oConexion""! *
=""+ ,
new""- 0
SqlConnection""1 >
(""> ?
Conexion""? G
.""G H
CN""H J
)""J K
)""K L
{## 

SqlCommand$$ 
cmd$$ 
=$$  
new$$! $

SqlCommand$$% /
($$/ 0
$str$$0 G
,$$G H
	oConexion$$I R
)$$R S
;$$S T
cmd%% 
.%% 
CommandType%% 
=%%  !
CommandType%%" -
.%%- .
Text%%. 2
;%%2 3
try&& 
{'' 
	oConexion(( 
.(( 
Open(( "
(((" #
)((# $
;(($ %
SqlDataReader)) !
dr))" $
=))% &
cmd))' *
.))* +
ExecuteReader))+ 8
())8 9
)))9 :
;)): ;
while++ 
(++ 
dr++ 
.++ 
Read++ "
(++" #
)++# $
)++$ %
{,, 
rptListaTiendas-- '
.--' (
Add--( +
(--+ ,
new--, /
Tiendas--0 7
(--7 8
)--8 9
{.. 
	IdTiendas// %
=//& '
Convert//( /
./// 0
ToInt32//0 7
(//7 8
dr//8 :
[//: ;
$str//; F
]//F G
.//G H
ToString//H P
(//P Q
)//Q R
)//R S
,//S T
Descripcion00 '
=00( )
dr00* ,
[00, -
$str00- :
]00: ;
.00; <
ToString00< D
(00D E
)00E F
,00F G
	Direccion11 %
=11& '
dr11( *
[11* +
$str11+ 6
]116 7
.117 8
ToString118 @
(11@ A
)11A B
,11B C
Activo22 "
=22# $
Convert22% ,
.22, -
	ToBoolean22- 6
(226 7
dr227 9
[229 :
$str22: B
]22B C
.22C D
ToString22D L
(22L M
)22M N
)22N O
}33 
)33 
;33 
}44 
dr55 
.55 
Close55 
(55 
)55 
;55 
return66 
rptListaTiendas66 *
;66* +
}77 
catch88 
(88 
	Exception88  
ex88! #
)88# $
{99 
rptListaTiendas:: #
=::$ %
null::& *
;::* +
return;; 
rptListaTiendas;; *
;;;* +
}<< 
}== 
}>> 	
public@@ 
List@@ 
<@@ 
Tiendas@@ 
>@@ 
ListarTiendasActivo@@ 0
(@@0 1
)@@1 2
{AA 	
ListBB 
<BB 
TiendasBB 
>BB 
rptListaTiendasBB )
=BB* +
newBB, /
ListBB0 4
<BB4 5
TiendasBB5 <
>BB< =
(BB= >
)BB> ?
;BB? @
usingCC 
(CC 
SqlConnectionCC  
	oConexionCC! *
=CC+ ,
newCC- 0
SqlConnectionCC1 >
(CC> ?
ConexionCC? G
.CCG H
CNCCH J
)CCJ K
)CCK L
{DD 

SqlCommandEE 
cmdEE 
=EE  
newEE! $

SqlCommandEE% /
(EE/ 0
$str	EE0 Ä
,
EEÄ Å
	oConexion
EEÇ ã
)
EEã å
;
EEå ç
tryGG 
{HH 
	oConexionII 
.II 
OpenII "
(II" #
)II# $
;II$ %
SqlDataReaderJJ !
drJJ" $
=JJ% &
cmdJJ' *
.JJ* +
ExecuteReaderJJ+ 8
(JJ8 9
)JJ9 :
;JJ: ;
whileLL 
(LL 
drLL 
.LL 
ReadLL "
(LL" #
)LL# $
)LL$ %
{MM 
rptListaTiendasNN '
.NN' (
AddNN( +
(NN+ ,
newNN, /
TiendasNN0 7
(NN7 8
)NN8 9
{OO 
	IdTiendasPP %
=PP& '
ConvertPP( /
.PP/ 0
ToInt32PP0 7
(PP7 8
drPP8 :
[PP: ;
$strPP; F
]PPF G
.PPG H
ToStringPPH P
(PPP Q
)PPQ R
)PPR S
,PPS T
DescripcionQQ '
=QQ( )
drQQ* ,
[QQ, -
$strQQ- :
]QQ: ;
.QQ; <
ToStringQQ< D
(QQD E
)QQE F
,QQF G
	DireccionRR %
=RR& '
drRR( *
[RR* +
$strRR+ 6
]RR6 7
.RR7 8
ToStringRR8 @
(RR@ A
)RRA B
,RRB C
ActivoSS "
=SS# $
ConvertSS% ,
.SS, -
	ToBooleanSS- 6
(SS6 7
drSS7 9
[SS9 :
$strSS: B
]SSB C
.SSC D
ToStringSSD L
(SSL M
)SSM N
)SSN O
}TT 
)TT 
;TT 
}UU 
drVV 
.VV 
CloseVV 
(VV 
)VV 
;VV 
returnXX 
rptListaTiendasXX *
;XX* +
}ZZ 
catch[[ 
([[ 
	Exception[[  
ex[[! #
)[[# $
{\\ 
rptListaTiendas]] #
=]]$ %
null]]& *
;]]* +
return^^ 
rptListaTiendas^^ *
;^^* +
}__ 
}`` 
}aa 	
publicdd 
booldd 
	Registrardd 
(dd 
Tiendasdd %
oTiendasdd& .
)dd. /
{ee 	
boolff 
	respuestaff 
=ff 
trueff !
;ff! "
usinggg 
(gg 
SqlConnectiongg  
	oConexiongg! *
=gg+ ,
newgg- 0
SqlConnectiongg1 >
(gg> ?
Conexiongg? G
.ggG H
CNggH J
)ggJ K
)ggK L
{hh 
tryii 
{jj 

SqlCommandkk 
cmdkk "
=kk# $
newkk% (

SqlCommandkk) 3
(kk3 4
$strkk4 I
,kkI J
	oConexionkkK T
)kkT U
;kkU V
cmdll 
.ll 

Parametersll "
.ll" #
AddWithValuell# /
(ll/ 0
$strll0 =
,ll= >
oTiendasll? G
.llG H
DescripcionllH S
)llS T
;llT U
cmdmm 
.mm 

Parametersmm "
.mm" #
AddWithValuemm# /
(mm/ 0
$strmm0 ;
,mm; <
oTiendasmm= E
.mmE F
	DireccionmmF O
)mmO P
;mmP Q
cmdnn 
.nn 

Parametersnn "
.nn" #
AddWithValuenn# /
(nn/ 0
$strnn0 8
,nn8 9
oTiendasnn: B
.nnB C
ActivonnC I
)nnI J
;nnJ K
cmdoo 
.oo 

Parametersoo "
.oo" #
Addoo# &
(oo& '
$stroo' 2
,oo2 3
	SqlDbTypeoo4 =
.oo= >
Bitoo> A
)ooA B
.ooB C
	DirectionooC L
=ooM N
ParameterDirectionooO a
.ooa b
Outputoob h
;ooh i
cmdpp 
.pp 
CommandTypepp #
=pp$ %
CommandTypepp& 1
.pp1 2
StoredProcedurepp2 A
;ppA B
	oConexionqq 
.qq 
Openqq "
(qq" #
)qq# $
;qq$ %
cmdrr 
.rr 
ExecuteNonQueryrr '
(rr' (
)rr( )
;rr) *
	respuestass 
=ss 
Convertss  '
.ss' (
	ToBooleanss( 1
(ss1 2
cmdss2 5
.ss5 6

Parametersss6 @
[ss@ A
$strssA L
]ssL M
.ssM N
ValuessN S
)ssS T
;ssT U
}uu 
catchvv 
(vv 
	Exceptionvv  
exvv! #
)vv# $
{ww 
	respuestaxx 
=xx 
falsexx  %
;xx% &
}yy 
}zz 
return{{ 
	respuesta{{ 
;{{ 
}|| 	
public~~ 
bool~~ 
	Modificar~~ 
(~~ 
Tiendas~~ %
oTiendas~~& .
)~~. /
{ 	
bool
ÄÄ 
	respuesta
ÄÄ 
=
ÄÄ 
true
ÄÄ !
;
ÄÄ! "
using
ÅÅ 
(
ÅÅ 
SqlConnection
ÅÅ  
	oConexion
ÅÅ! *
=
ÅÅ+ ,
new
ÅÅ- 0
SqlConnection
ÅÅ1 >
(
ÅÅ> ?
Conexion
ÅÅ? G
.
ÅÅG H
CN
ÅÅH J
)
ÅÅJ K
)
ÅÅK L
{
ÇÇ 
try
ÉÉ 
{
ÑÑ 

SqlCommand
ÖÖ 
cmd
ÖÖ "
=
ÖÖ# $
new
ÖÖ% (

SqlCommand
ÖÖ) 3
(
ÖÖ3 4
$str
ÖÖ4 I
,
ÖÖI J
	oConexion
ÖÖK T
)
ÖÖT U
;
ÖÖU V
cmd
ÜÜ 
.
ÜÜ 

Parameters
ÜÜ "
.
ÜÜ" #
AddWithValue
ÜÜ# /
(
ÜÜ/ 0
$str
ÜÜ0 ;
,
ÜÜ; <
oTiendas
ÜÜ= E
.
ÜÜE F
	IdTiendas
ÜÜF O
)
ÜÜO P
;
ÜÜP Q
cmd
áá 
.
áá 

Parameters
áá "
.
áá" #
AddWithValue
áá# /
(
áá/ 0
$str
áá0 =
,
áá= >
oTiendas
áá? G
.
ááG H
Descripcion
ááH S
)
ááS T
;
ááT U
cmd
àà 
.
àà 

Parameters
àà "
.
àà" #
AddWithValue
àà# /
(
àà/ 0
$str
àà0 ;
,
àà; <
oTiendas
àà= E
.
ààE F
	Direccion
ààF O
)
ààO P
;
ààP Q
cmd
ââ 
.
ââ 

Parameters
ââ "
.
ââ" #
AddWithValue
ââ# /
(
ââ/ 0
$str
ââ0 8
,
ââ8 9
oTiendas
ââ: B
.
ââB C
Activo
ââC I
)
ââI J
;
ââJ K
cmd
ää 
.
ää 

Parameters
ää "
.
ää" #
Add
ää# &
(
ää& '
$str
ää' 2
,
ää2 3
	SqlDbType
ää4 =
.
ää= >
Bit
ää> A
)
ääA B
.
ääB C
	Direction
ääC L
=
ääM N 
ParameterDirection
ääO a
.
ääa b
Output
ääb h
;
ääh i
cmd
åå 
.
åå 
CommandType
åå #
=
åå$ %
CommandType
åå& 1
.
åå1 2
StoredProcedure
åå2 A
;
ååA B
	oConexion
éé 
.
éé 
Open
éé "
(
éé" #
)
éé# $
;
éé$ %
cmd
êê 
.
êê 
ExecuteNonQuery
êê '
(
êê' (
)
êê( )
;
êê) *
	respuesta
íí 
=
íí 
Convert
íí  '
.
íí' (
	ToBoolean
íí( 1
(
íí1 2
cmd
íí2 5
.
íí5 6

Parameters
íí6 @
[
íí@ A
$str
ííA L
]
ííL M
.
ííM N
Value
ííN S
)
ííS T
;
ííT U
}
îî 
catch
ïï 
(
ïï 
	Exception
ïï  
ex
ïï! #
)
ïï# $
{
ññ 
	respuesta
óó 
=
óó 
false
óó  %
;
óó% &
}
òò 
}
öö 
return
õõ 
	respuesta
õõ 
;
õõ 
}
úú 	
public
ûû 
bool
ûû 
Eliminar
ûû 
(
ûû 
int
ûû  
id
ûû! #
)
ûû# $
{
üü 	
bool
†† 
	respuesta
†† 
=
†† 
true
†† !
;
††! "
using
°° 
(
°° 
SqlConnection
°°  
	oConexion
°°! *
=
°°+ ,
new
°°- 0
SqlConnection
°°1 >
(
°°> ?
Conexion
°°? G
.
°°G H
CN
°°H J
)
°°J K
)
°°K L
{
¢¢ 
try
££ 
{
§§ 

SqlCommand
•• 
cmd
•• "
=
••# $
new
••% (

SqlCommand
••) 3
(
••3 4
$str
••4 _
,
••_ `
	oConexion
••a j
)
••j k
;
••k l
cmd
¶¶ 
.
¶¶ 

Parameters
¶¶ "
.
¶¶" #
AddWithValue
¶¶# /
(
¶¶/ 0
$str
¶¶0 5
,
¶¶5 6
id
¶¶7 9
)
¶¶9 :
;
¶¶: ;
cmd
ßß 
.
ßß 
CommandType
ßß #
=
ßß$ %
CommandType
ßß& 1
.
ßß1 2
Text
ßß2 6
;
ßß6 7
	oConexion
®® 
.
®® 
Open
®® "
(
®®" #
)
®®# $
;
®®$ %
cmd
©© 
.
©© 
ExecuteNonQuery
©© '
(
©©' (
)
©©( )
;
©©) *
	respuesta
™™ 
=
™™ 
true
™™  $
;
™™$ %
}
´´ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨  
ex
¨¨! #
)
¨¨# $
{
≠≠ 
	respuesta
ÆÆ 
=
ÆÆ 
false
ÆÆ  %
;
ÆÆ% &
}
ØØ 
}
∞∞ 
return
±± 
	respuesta
±± 
;
±± 
}
≤≤ 	
}
≥≥ 
}¥¥ ¬
lC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\UbicacionTiendaLogica.cs
	namespace

 	
ProyectoTest


 
.

 
Logica

 
{ 
public 

class !
UbicacionTiendaLogica &
{ 
private 
static !
UbicacionTiendaLogica ,

_instancia- 7
=8 9
null: >
;> ?
public !
UbicacionTiendaLogica $
($ %
)% &
{ 	
} 	
public 
static !
UbicacionTiendaLogica +
	Instancia, 5
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{ 

_instancia 
=  
new! $!
UbicacionTiendaLogica% :
(: ;
); <
;< =
} 
return   

_instancia   !
;  ! "
}!! 
}"" 	
public$$ 
List$$ 
<$$ 
UbicacionTienda$$ #
>$$# $
Listar$$% +
($$+ ,
)$$, -
{%% 	
List&& 
<&& 
UbicacionTienda&&  
>&&  !#
rptListaUbicacionTienda&&" 9
=&&: ;
new&&< ?
List&&@ D
<&&D E
UbicacionTienda&&E T
>&&T U
(&&U V
)&&V W
;&&W X
using'' 
('' 
SqlConnection''  
	oConexion''! *
=''+ ,
new''- 0
SqlConnection''1 >
(''> ?
Conexion''? G
.''G H
CN''H J
)''J K
)''K L
{(( 

SqlCommand** 
cmd** 
=**  
new**! $

SqlCommand**% /
(**/ 0
$str**0 O
,**O P
	oConexion**Q Z
)**Z [
;**[ \
cmd++ 
.++ 
CommandType++ 
=++  !
CommandType++" -
.++- .
Text++. 2
;++2 3
try-- 
{.. 
	oConexion// 
.// 
Open// "
(//" #
)//# $
;//$ %
SqlDataReader00 !
dr00" $
=00% &
cmd00' *
.00* +
ExecuteReader00+ 8
(008 9
)009 :
;00: ;
while22 
(22 
dr22 
.22 
Read22 "
(22" #
)22# $
)22$ %
{33 #
rptListaUbicacionTienda44 /
.44/ 0
Add440 3
(443 4
new444 7
UbicacionTienda448 G
(44G H
)44H I
{55 
IdUbicacionTienda66 -
=66. /
Convert660 7
.667 8
ToInt32668 ?
(66? @
dr66@ B
[66B C
$str66C V
]66V W
.66W X
ToString66X `
(66` a
)66a b
)66b c
,66c d
Nombre77 "
=77# $
dr77% '
[77' (
$str77( 0
]770 1
.771 2
ToString772 :
(77: ;
)77; <
,77< =
Distrito88 $
=88% &
dr88' )
[88) *
$str88* 4
]884 5
.885 6
ToString886 >
(88> ?
)88? @
}99 
)99 
;99 
}:: 
dr;; 
.;; 
Close;; 
(;; 
);; 
;;; 
return== #
rptListaUbicacionTienda== 2
;==2 3
}?? 
catch@@ 
(@@ 
	Exception@@  
ex@@! #
)@@# $
{AA #
rptListaUbicacionTiendaBB +
=BB, -
nullBB. 2
;BB2 3
returnCC #
rptListaUbicacionTiendaCC 2
;CC2 3
}DD 
}EE 
}FF 	
}HH 
}KK òL
cC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\UbigeoLogica.cs
	namespace		 	
ProyectoTest		
 
.		 
Logica		 
{

 
public 

class 
UbigeoLogica 
{ 
private 
static 
UbigeoLogica #

_instancia$ .
=/ 0
null1 5
;5 6
public 
UbigeoLogica 
( 
) 
{ 	
} 	
public 
static 
UbigeoLogica "
	Instancia# ,
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{( )

_instancia 
=  
new! $
UbigeoLogica% 1
(1 2
)2 3
;3 4
} 
return 

_instancia !
;! "
} 
} 	
public!! 
List!! 
<!! 
Departamento!!  
>!!  !
ObtenerDepartamento!!" 5
(!!5 6
)!!6 7
{!!8 9
List"" 
<"" 
Departamento"" 
>"" 
lst"" "
=""# $
new""% (
List"") -
<""- .
Departamento"". :
>"": ;
(""; <
)""< =
;""= >
using## 
(## 
SqlConnection##  
	oConexion##! *
=##+ ,
new##- 0
SqlConnection##1 >
(##> ?
Conexion##? G
.##G H
CN##H J
)##J K
)##K L
{$$ 
try%% 
{&& 

SqlCommand'' 
cmd'' "
=''# $
new''% (

SqlCommand'') 3
(''3 4
$str''4 P
,''P Q
	oConexion''R [
)''[ \
;''\ ]
cmd(( 
.(( 
CommandType(( #
=(($ %
CommandType((& 1
.((1 2
Text((2 6
;((6 7
	oConexion)) 
.)) 
Open)) "
())" #
)))# $
;))$ %
using** 
(** 
SqlDataReader** (
dr**) +
=**, -
cmd**. 1
.**1 2
ExecuteReader**2 ?
(**? @
)**@ A
)**A B
{++ 
while,, 
(,, 
dr,, !
.,,! "
Read,," &
(,,& '
),,' (
),,( )
{-- 
lst.. 
...  
Add..  #
(..# $
new..$ '
Departamento..( 4
(..4 5
)..5 6
{// 
IdDepartamento00  .
=00/ 0
dr001 3
[003 4
$str004 D
]00D E
.00E F
ToString00F N
(00N O
)00O P
,00P Q
Descripcion11  +
=11, -
dr11. 0
[110 1
$str111 >
]11> ?
.11? @
ToString11@ H
(11H I
)11I J
}22 
)22 
;22 
}33 
}44 
}66 
catch77 
(77 
	Exception77  
ex77! #
)77# $
{88 
lst99 
=99 
new99 
List99 "
<99" #
Departamento99# /
>99/ 0
(990 1
)991 2
;992 3
}:: 
};; 
return<< 
lst<< 
;<< 
}== 	
public?? 
List?? 
<?? 
	Provincia?? 
>?? 
ObtenerProvincia?? /
(??/ 0
string??0 6
_iddepartamento??7 F
)??F G
{@@ 	
ListAA 
<AA 
	ProvinciaAA 
>AA 
lstAA 
=AA  !
newAA" %
ListAA& *
<AA* +
	ProvinciaAA+ 4
>AA4 5
(AA5 6
)AA6 7
;AA7 8
usingBB 
(BB 
SqlConnectionBB  
	oConexionBB! *
=BB+ ,
newBB- 0
SqlConnectionBB1 >
(BB> ?
ConexionBB? G
.BBG H
CNBBH J
)BBJ K
)BBK L
{CC 
tryDD 
{EE 

SqlCommandFF 
cmdFF "
=FF# $
newFF% (

SqlCommandFF) 3
(FF3 4
$strFF4 t
,FFt u
	oConexionFFv 
)	FF Ä
;
FFÄ Å
cmdGG 
.GG 

ParametersGG "
.GG" #
AddWithValueGG# /
(GG/ 0
$strGG0 A
,GGA B
_iddepartamentoGGC R
)GGR S
;GGS T
cmdHH 
.HH 
CommandTypeHH #
=HH$ %
CommandTypeHH& 1
.HH1 2
TextHH2 6
;HH6 7
	oConexionII 
.II 
OpenII "
(II" #
)II# $
;II$ %
usingJJ 
(JJ 
SqlDataReaderJJ (
drJJ) +
=JJ, -
cmdJJ. 1
.JJ1 2
ExecuteReaderJJ2 ?
(JJ? @
)JJ@ A
)JJA B
{KK 
whileLL 
(LL 
drLL !
.LL! "
ReadLL" &
(LL& '
)LL' (
)LL( )
{MM 
lstNN 
.NN  
AddNN  #
(NN# $
newNN$ '
	ProvinciaNN( 1
(NN1 2
)NN2 3
{OO 
IdProvinciaPP  +
=PP, -
drPP. 0
[PP0 1
$strPP1 >
]PP> ?
.PP? @
ToStringPP@ H
(PPH I
)PPI J
,PPJ K
DescripcionQQ  +
=QQ, -
drQQ. 0
[QQ0 1
$strQQ1 >
]QQ> ?
.QQ? @
ToStringQQ@ H
(QQH I
)QQI J
,QQJ K
IdDepartamentoRR  .
=RR/ 0
drRR1 3
[RR3 4
$strRR4 D
]RRD E
.RRE F
ToStringRRF N
(RRN O
)RRO P
}SS 
)SS 
;SS 
}TT 
}UU 
}WW 
catchXX 
(XX 
	ExceptionXX  
exXX! #
)XX# $
{YY 
lstZZ 
=ZZ 
newZZ 
ListZZ "
<ZZ" #
	ProvinciaZZ# ,
>ZZ, -
(ZZ- .
)ZZ. /
;ZZ/ 0
}[[ 
}\\ 
return]] 
lst]] 
;]] 
}^^ 	
public`` 
List`` 
<`` 
Distrito`` 
>`` 
ObtenerDistrito`` -
(``- .
string``. 4
_idprovincia``5 A
,``A B
string``C I
_iddepartamento``J Y
)``Y Z
{aa 	
Listbb 
<bb 
Distritobb 
>bb 
lstbb 
=bb  
newbb! $
Listbb% )
<bb) *
Distritobb* 2
>bb2 3
(bb3 4
)bb4 5
;bb5 6
usingcc 
(cc 
SqlConnectioncc  
	oConexioncc! *
=cc+ ,
newcc- 0
SqlConnectioncc1 >
(cc> ?
Conexioncc? G
.ccG H
CNccH J
)ccJ K
)ccK L
{dd 
tryee 
{ff 

SqlCommandgg 
cmdgg "
=gg# $
newgg% (

SqlCommandgg) 3
(gg3 4
$str	gg4 í
,
ggí ì
	oConexion
ggî ù
)
ggù û
;
ggû ü
cmdhh 
.hh 

Parametershh "
.hh" #
AddWithValuehh# /
(hh/ 0
$strhh0 >
,hh> ?
_idprovinciahh@ L
)hhL M
;hhM N
cmdii 
.ii 

Parametersii "
.ii" #
AddWithValueii# /
(ii/ 0
$strii0 A
,iiA B
_iddepartamentoiiC R
)iiR S
;iiS T
cmdjj 
.jj 
CommandTypejj #
=jj$ %
CommandTypejj& 1
.jj1 2
Textjj2 6
;jj6 7
	oConexionkk 
.kk 
Openkk "
(kk" #
)kk# $
;kk$ %
usingll 
(ll 
SqlDataReaderll (
drll) +
=ll, -
cmdll. 1
.ll1 2
ExecuteReaderll2 ?
(ll? @
)ll@ A
)llA B
{mm 
whilenn 
(nn 
drnn !
.nn! "
Readnn" &
(nn& '
)nn' (
)nn( )
{oo 
lstpp 
.pp  
Addpp  #
(pp# $
newpp$ '
Distritopp( 0
(pp0 1
)pp1 2
{qq 

IdDistritorr  *
=rr+ ,
drrr- /
[rr/ 0
$strrr0 <
]rr< =
.rr= >
ToStringrr> F
(rrF G
)rrG H
,rrH I
Descripcionss  +
=ss, -
drss. 0
[ss0 1
$strss1 >
]ss> ?
.ss? @
ToStringss@ H
(ssH I
)ssI J
,ssJ K
IdProvinciatt  +
=tt, -
drtt. 0
[tt0 1
$strtt1 >
]tt> ?
.tt? @
ToStringtt@ H
(ttH I
)ttI J
,ttJ K
IdDepartamentouu  .
=uu/ 0
druu1 3
[uu3 4
$struu4 D
]uuD E
.uuE F
ToStringuuF N
(uuN O
)uuO P
}vv 
)vv 
;vv 
}ww 
}xx 
}zz 
catch{{ 
({{ 
	Exception{{  
ex{{! #
){{# $
{|| 
lst}} 
=}} 
new}} 
List}} "
<}}" #
Distrito}}# +
>}}+ ,
(}}, -
)}}- .
;}}. /
}~~ 
} 
return
ÄÄ 
lst
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
}
ÉÉ 
}ÑÑ ¥
dC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\UsuarioLogica.cs
	namespace		 	
ProyectoTest		
 
.		 
Logica		 
{

 
public 

class 
UsuarioLogica 
{ 
private 
static 
UsuarioLogica $

_instancia% /
=0 1
null2 6
;6 7
public 
UsuarioLogica 
( 
) 
{ 	
} 	
public 
static 
UsuarioLogica #
	Instancia$ -
{ 	
get 
{ 
if 
( 

_instancia 
== !
null" &
)& '
{ 

_instancia 
=  
new! $
UsuarioLogica% 2
(2 3
)3 4
;4 5
} 
return 

_instancia !
;! "
} 
} 	
public!! 
Usuario!! 
Obtener!! 
(!! 
string!! %
_correo!!& -
,!!- .
string!!/ 5
_contrasena!!6 A
)!!A B
{"" 	
Usuario## 
objeto## 
=## 
null## !
;##! "
using$$ 
($$ 
SqlConnection$$  
	oConexion$$! *
=$$+ ,
new$$- 0
SqlConnection$$1 >
($$> ?
Conexion$$? G
.$$G H
CN$$H J
)$$J K
)$$K L
{%% 
try&& 
{'' 

SqlCommand(( 
cmd(( "
=((# $
new((% (

SqlCommand(() 3
(((3 4
$str((4 G
,((G H
	oConexion((I R
)((R S
;((S T
cmd)) 
.)) 

Parameters)) "
.))" #
AddWithValue))# /
())/ 0
$str))0 8
,))8 9
_correo)): A
)))A B
;))B C
cmd** 
.** 

Parameters** "
.**" #
AddWithValue**# /
(**/ 0
$str**0 <
,**< =
_contrasena**> I
)**I J
;**J K
cmd++ 
.++ 
CommandType++ #
=++$ %
CommandType++& 1
.++1 2
StoredProcedure++2 A
;++A B
	oConexion-- 
.-- 
Open-- "
(--" #
)--# $
;--$ %
using// 
(// 
SqlDataReader// (
dr//) +
=//, -
cmd//. 1
.//1 2
ExecuteReader//2 ?
(//? @
)//@ A
)//A B
{//C D
while00 
(00 
dr00 !
.00! "
Read00" &
(00& '
)00' (
)00( )
{00* +
objeto11 "
=11# $
new11% (
Usuario11) 0
(110 1
)111 2
{22 
	IdUsuario33  )
=33* +
Convert33, 3
.333 4
ToInt32334 ;
(33; <
dr33< >
[33> ?
$str33? J
]33J K
.33K L
ToString33L T
(33T U
)33U V
)33V W
,33W X
Nombres44  '
=44( )
dr44* ,
[44, -
$str44- 6
]446 7
.447 8
ToString448 @
(44@ A
)44A B
,44B C
	Apellidos55  )
=55* +
dr55, .
[55. /
$str55/ :
]55: ;
.55; <
ToString55< D
(55D E
)55E F
,55F G
Correo66  &
=66' (
dr66) +
[66+ ,
$str66, 4
]664 5
.665 6
ToString666 >
(66> ?
)66? @
,66@ A

Contrasena77  *
=77+ ,
dr77- /
[77/ 0
$str770 <
]77< =
.77= >
ToString77> F
(77F G
)77G H
,77H I
EsAdministrador88  /
=880 1
Convert882 9
.889 :
	ToBoolean88: C
(88C D
dr88D F
[88F G
$str88G X
]88X Y
.88Y Z
ToString88Z b
(88b c
)88c d
)88d e
}99 
;99 
};; 
}<< 
}>> 
catch?? 
(?? 
	Exception??  
ex??! #
)??# $
{@@ 
objetoAA 
=AA 
newAA  
UsuarioAA! (
(AA( )
)AA) *
;AA* +
objetoBB 
.BB 
MensajeBB "
=BB# $
exBB% '
.BB' (
MessageBB( /
;BB/ 0
}CC 
}DD 
returnEE 
objetoEE 
;EE 
}FF 	
publicHH 
intHH 
	RegistrarHH 
(HH 
UsuarioHH $
oUsuarioHH% -
)HH- .
{II 	
intJJ 
	respuestaJJ 
=JJ 
$numJJ 
;JJ 
usingKK 
(KK 
SqlConnectionKK  
	oConexionKK! *
=KK+ ,
newKK- 0
SqlConnectionKK1 >
(KK> ?
ConexionKK? G
.KKG H
CNKKH J
)KKJ K
)KKK L
{LL 
tryMM 
{NN 

SqlCommandOO 
cmdOO "
=OO# $
newOO% (

SqlCommandOO) 3
(OO3 4
$strOO4 I
,OOI J
	oConexionOOK T
)OOT U
;OOU V
cmdPP 
.PP 

ParametersPP "
.PP" #
AddWithValuePP# /
(PP/ 0
$strPP0 9
,PP9 :
oUsuarioPP; C
.PPC D
NombresPPD K
)PPK L
;PPL M
cmdQQ 
.QQ 

ParametersQQ "
.QQ" #
AddWithValueQQ# /
(QQ/ 0
$strQQ0 ;
,QQ; <
oUsuarioQQ= E
.QQE F
	ApellidosQQF O
)QQO P
;QQP Q
cmdRR 
.RR 

ParametersRR "
.RR" #
AddWithValueRR# /
(RR/ 0
$strRR0 8
,RR8 9
oUsuarioRR: B
.RRB C
CorreoRRC I
)RRI J
;RRJ K
cmdSS 
.SS 

ParametersSS "
.SS" #
AddWithValueSS# /
(SS/ 0
$strSS0 <
,SS< =
oUsuarioSS> F
.SSF G

ContrasenaSSG Q
)SSQ R
;SSR S
cmdTT 
.TT 

ParametersTT "
.TT" #
AddWithValueTT# /
(TT/ 0
$strTT0 A
,TTA B
oUsuarioTTC K
.TTK L
EsAdministradorTTL [
)TT[ \
;TT\ ]
cmdUU 
.UU 

ParametersUU "
.UU" #
AddUU# &
(UU& '
$strUU' 2
,UU2 3
	SqlDbTypeUU4 =
.UU= >
IntUU> A
)UUA B
.UUB C
	DirectionUUC L
=UUM N
ParameterDirectionUUO a
.UUa b
OutputUUb h
;UUh i
cmdVV 
.VV 
CommandTypeVV #
=VV$ %
CommandTypeVV& 1
.VV1 2
StoredProcedureVV2 A
;VVA B
	oConexionXX 
.XX 
OpenXX "
(XX" #
)XX# $
;XX$ %
cmdZZ 
.ZZ 
ExecuteNonQueryZZ '
(ZZ' (
)ZZ( )
;ZZ) *
	respuesta\\ 
=\\ 
Convert\\  '
.\\' (
ToInt32\\( /
(\\/ 0
cmd\\0 3
.\\3 4

Parameters\\4 >
[\\> ?
$str\\? J
]\\J K
.\\K L
Value\\L Q
)\\Q R
;\\R S
}^^ 
catch__ 
(__ 
	Exception__  
)__  !
{`` 
	respuestaaa 
=aa 
$numaa  !
;aa! "
}bb 
}cc 
returndd 
	respuestadd 
;dd 
}ee 	
publicgg 
Listgg 
<gg 
Clientegg 
>gg 
ListarClientesgg +
(gg+ ,
)gg, -
{hh 	
Listii 
<ii 
Clienteii 
>ii 
rptListaTiendasii )
=ii* +
newii, /
Listii0 4
<ii4 5
Clienteii5 <
>ii< =
(ii= >
)ii> ?
;ii? @
usingjj 
(jj 
SqlConnectionjj  
	oConexionjj! *
=jj+ ,
newjj- 0
SqlConnectionjj1 >
(jj> ?
Conexionjj? G
.jjG H
CNjjH J
)jjJ K
)jjK L
{kk 

SqlCommandll 
cmdll 
=ll  
newll! $

SqlCommandll% /
(ll/ 0
$strll0 H
,llH I
	oConexionllJ S
)llS T
;llT U
cmdmm 
.mm 
CommandTypemm 
=mm  !
CommandTypemm" -
.mm- .
Textmm. 2
;mm2 3
trynn 
{oo 
	oConexionpp 
.pp 
Openpp "
(pp" #
)pp# $
;pp$ %
SqlDataReaderqq !
drqq" $
=qq% &
cmdqq' *
.qq* +
ExecuteReaderqq+ 8
(qq8 9
)qq9 :
;qq: ;
whiless 
(ss 
drss 
.ss 
Readss "
(ss" #
)ss# $
)ss$ %
{tt 
rptListaTiendasuu '
.uu' (
Adduu( +
(uu+ ,
newuu, /
Clienteuu0 7
(uu7 8
)uu8 9
{vv 
	IdClienteww %
=ww& '
Convertww( /
.ww/ 0
ToInt32ww0 7
(ww7 8
drww8 :
[ww: ;
$strww; F
]wwF G
.wwG H
ToStringwwH P
(wwP Q
)wwQ R
)wwR S
,wwS T
Nombrexx "
=xx# $
drxx% '
[xx' (
$strxx( 0
]xx0 1
.xx1 2
ToStringxx2 :
(xx: ;
)xx; <
,xx< =
	Apellidosyy %
=yy& '
dryy( *
[yy* +
$stryy+ 6
]yy6 7
.yy7 8
ToStringyy8 @
(yy@ A
)yyA B
,yyB C
Emailzz !
=zz" #
drzz$ &
[zz& '
$strzz' .
]zz. /
.zz/ 0
ToStringzz0 8
(zz8 9
)zz9 :
,zz: ;
Telefono{{ $
={{% &
dr{{' )
[{{) *
$str{{* 4
]{{4 5
.{{5 6
ToString{{6 >
({{> ?
){{? @
,{{@ A

Cumpleanos|| &
=||' (
dr||) +
[||+ ,
$str||, 8
]||8 9
.||9 :
ToString||: B
(||B C
)||C D
,||D E
Distrito}} $
=}}% &
dr}}' )
[}}) *
$str}}* 4
]}}4 5
.}}5 6
ToString}}6 >
(}}> ?
)}}? @
,}}@ A
Calificacion~~ (
=~~) *
Convert~~+ 2
.~~2 3
ToInt32~~3 :
(~~: ;
dr~~; =
[~~= >
$str~~> L
]~~L M
.~~M N
ToString~~N V
(~~V W
)~~W X
)~~X Y
,~~Y Z
RecibirPromociones .
=/ 0
Convert1 8
.8 9
	ToBoolean9 B
(B C
drC E
[E F
$strF Z
]Z [
.[ \
ToString\ d
(d e
)e f
)f g
,g h
}
ÄÄ 
)
ÄÄ 
;
ÄÄ 
}
ÅÅ 
dr
ÇÇ 
.
ÇÇ 
Close
ÇÇ 
(
ÇÇ 
)
ÇÇ 
;
ÇÇ 
return
ÉÉ 
rptListaTiendas
ÉÉ *
;
ÉÉ* +
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ 
	Exception
ÖÖ  
ex
ÖÖ! #
)
ÖÖ# $
{
ÜÜ 
rptListaTiendas
áá #
=
áá$ %
null
áá& *
;
áá* +
return
àà 
rptListaTiendas
àà *
;
àà* +
}
ââ 
}
ää 
}
ãã 	
public
çç 
int
çç 
RegistrarCliente
çç #
(
çç# $
Cliente
çç$ +
cliente
çç, 3
)
çç3 4
{
éé 	
int
èè 
	resultado
èè 
=
èè 
$num
èè 
;
èè 
using
ëë 
(
ëë 
SqlConnection
ëë  
conexion
ëë! )
=
ëë* +
new
ëë, /
SqlConnection
ëë0 =
(
ëë= >
Conexion
ëë> F
.
ëëF G
CN
ëëG I
)
ëëI J
)
ëëJ K
{
íí 
try
ìì 
{
îî 

SqlCommand
ïï 
cmd
ïï "
=
ïï# $
new
ïï% (

SqlCommand
ïï) 3
(
ïï3 4
$str
ïï4 I
,
ïïI J
conexion
ïïK S
)
ïïS T
;
ïïT U
cmd
ññ 
.
ññ 
CommandType
ññ #
=
ññ$ %
CommandType
ññ& 1
.
ññ1 2
StoredProcedure
ññ2 A
;
ññA B
cmd
ôô 
.
ôô 

Parameters
ôô "
.
ôô" #
AddWithValue
ôô# /
(
ôô/ 0
$str
ôô0 9
,
ôô9 :
cliente
ôô; B
.
ôôB C
Nombre
ôôC I
)
ôôI J
;
ôôJ K
cmd
öö 
.
öö 

Parameters
öö "
.
öö" #
AddWithValue
öö# /
(
öö/ 0
$str
öö0 <
,
öö< =
cliente
öö> E
.
ööE F
	Apellidos
ööF O
)
ööO P
;
ööP Q
cmd
õõ 
.
õõ 

Parameters
õõ "
.
õõ" #
AddWithValue
õõ# /
(
õõ/ 0
$str
õõ0 8
,
õõ8 9
cliente
õõ: A
.
õõA B
Email
õõB G
)
õõG H
;
õõH I
cmd
úú 
.
úú 

Parameters
úú "
.
úú" #
AddWithValue
úú# /
(
úú/ 0
$str
úú0 ;
,
úú; <
cliente
úú= D
.
úúD E
Telefono
úúE M
)
úúM N
;
úúN O
cmd
ùù 
.
ùù 

Parameters
ùù "
.
ùù" #
AddWithValue
ùù# /
(
ùù/ 0
$str
ùù0 =
,
ùù= >
cliente
ùù? F
.
ùùF G

Cumpleanos
ùùG Q
)
ùùQ R
;
ùùR S
cmd
ûû 
.
ûû 

Parameters
ûû "
.
ûû" #
AddWithValue
ûû# /
(
ûû/ 0
$str
ûû0 ;
,
ûû; <
cliente
ûû= D
.
ûûD E
Distrito
ûûE M
)
ûûM N
;
ûûN O
cmd
üü 
.
üü 

Parameters
üü "
.
üü" #
AddWithValue
üü# /
(
üü/ 0
$str
üü0 ?
,
üü? @
cliente
üüA H
.
üüH I
Calificacion
üüI U
)
üüU V
;
üüV W
cmd
†† 
.
†† 

Parameters
†† "
.
††" #
AddWithValue
††# /
(
††/ 0
$str
††0 E
,
††E F
cliente
††G N
.
††N O 
RecibirPromociones
††O a
)
††a b
;
††b c
cmd
££ 
.
££ 

Parameters
££ "
.
££" #
Add
££# &
(
££& '
$str
££' 3
,
££3 4
	SqlDbType
££5 >
.
££> ?
Int
££? B
)
££B C
.
££C D
	Direction
££D M
=
££N O 
ParameterDirection
££P b
.
££b c
Output
££c i
;
££i j
conexion
•• 
.
•• 
Open
•• !
(
••! "
)
••" #
;
••# $
cmd
¶¶ 
.
¶¶ 
ExecuteNonQuery
¶¶ '
(
¶¶' (
)
¶¶( )
;
¶¶) *
	resultado
©© 
=
©© 
Convert
©©  '
.
©©' (
ToInt32
©©( /
(
©©/ 0
cmd
©©0 3
.
©©3 4

Parameters
©©4 >
[
©©> ?
$str
©©? K
]
©©K L
.
©©L M
Value
©©M R
)
©©R S
;
©©S T
}
™™ 
catch
´´ 
(
´´ 
	Exception
´´  
)
´´  !
{
¨¨ 
	resultado
≠≠ 
=
≠≠ 
$num
≠≠  !
;
≠≠! "
}
ÆÆ 
}
ØØ 
return
±± 
	resultado
±± 
;
±± 
}
≤≤ 	
}
≥≥ 
}¥¥ ù
aC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Logica\utilidades.cs
	namespace 	
ProyectoTest
 
. 
Logica 
{ 
public		 

class		 

utilidades		 
{

 
public 
static 
string 
convertirBase64 ,
(, -
string- 3
ruta4 8
)8 9
{: ;
byte 
[ 
] 
bytes 
= 
File 
.  
ReadAllBytes  ,
(, -
ruta- 1
)1 2
;2 3
string 
file 
= 
Convert !
.! "
ToBase64String" 0
(0 1
bytes1 6
)6 7
;7 8
return 
file 
; 
} 	
} 
} ï
^C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Carrito.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
Carrito 
{		 
public

 
int

 
	IdCarrito

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
Producto 
	oProducto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
Usuario 
oUsuario 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
Cantidad 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Adicionales !
{" #
get$ '
;' (
set) ,
;, -
}- .
public 
decimal 
PrecioExtra "
{# $
get% (
;( )
set* -
;- .
}. /
public 
string 
Observaciones #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
PrecioEnvio "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ˝
`C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Categoria.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
	Categoria 
{		 
public

 
int

 
IdCategoria

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Activo 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ß
^C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Cliente.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public		 

class		 
Cliente		 
{

 
public 
int 
	IdCliente 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	Apellidos 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 

Cumpleanos  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Distrito 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
Calificacion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
bool 
RecibirPromociones &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} ‹
]C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Compra.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
Compra 
{		 
public

 
int

 
IdCompra

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
int 
	IdUsuario 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TotalProducto  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	Direccion 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 

Referencia  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string  
DocumentoFacturacion *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
string 
	FormaPago 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Estado 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

FechaTexto  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

FormaEnvio  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 

HoraRecojo  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Tipo 
{ 
get  
;  !
set" %
;% &
}' (
public 
List 
< 
DetalleCompra !
>! "
oDetalleCompra# 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 
Compra 
( 
) 
{ 	
oDetalleCompra 
= 
new  
List! %
<% &
DetalleCompra& 3
>3 4
(4 5
)5 6
;6 7
} 	
}   
}!! Ò
cC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Departamento.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
Departamento 
{		 
public

 
string

 
IdDepartamento

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ‘
dC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\DetalleCompra.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
DetalleCompra 
{		 
public

 
int

 
IdDetalleCompra

 "
{

# $
get

% (
;

( )
set

* -
;

- .
}

/ 0
public 
int 
IdCompra 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

IdProducto 
{ 
get  #
;# $
set% (
;( )
}* +
public 
Producto 
	oProducto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
Cantidad 
{ 
get !
;! "
set# &
;& '
}( )
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public 
decimal 
PrecioExtra "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Adicionales !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
ObservacionesDC %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} ¶
_C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Distrito.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
Distrito 
{		 
public

 
string

 

IdDistrito

  
{

! "
get

# &
;

& '
set

( +
;

+ ,
}

- .
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
IdProvincia !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
IdDepartamento $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ´
aC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\FechaModel.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 

FechaModel 
{ 
public 
int 
IdReservaLocal !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Anio 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Mes 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Dias 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
Horas		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
} 
} å
fC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\tarjetaResponse.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public		 

class		 
tarjetaResponse		  
{

 
public 
string 
bin 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
channel 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
transactionToken &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} Ò
\C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Marca.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
Marca 
{		 
public 
int 
IdMarca 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Activo 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ·
àC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Niubiz\Consultas\AutorizacionDetransaccionNiubiz1.cs
	namespace 	
ProyectoTest
 
. 
Models 
. 
Niubiz $
.$ %
	Consultas% .
{ 
public

 

class

 

CardHolder

 
{ 
public 
string 
documentNumber $
{% &
get' *
;* +
set, /
;/ 0
}1 2
=3 4
null5 9
;9 :
public 
string 
documentType "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
null3 7
;7 8
} 
public 

class 
Order 
{ 
public 
decimal 
amount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
currency 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
purchaseNumber $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
tokenId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
public 

class 

Recurrence 
{ 
public 
string 
amount 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
null- 1
;1 2
public 
string 
beneficiaryId #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
null4 8
;8 9
public 
string 
	frequency 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
null0 4
;4 5
public 
string 
	maxAmount 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
null0 4
;4 5
public   
string   
type   
{   
get    
;    !
set  " %
;  % &
}  ' (
=  ) *
null  + /
;  / 0
}!! 
public## 

class## ,
 AutorizacionDetransaccionNiubiz1## 1
{$$ 
public%% 
object%% 
	antifraud%% 
{%%  !
get%%" %
;%%% &
set%%' *
;%%* +
}%%, -
=%%. /
null%%0 4
;%%4 5
public&& 
string&& 
captureType&& !
{&&" #
get&&$ '
;&&' (
set&&) ,
;&&, -
}&&. /
public(( 
string(( 
channel(( 
{(( 
get((  #
;((# $
set((% (
;((( )
}((* +
public)) 
bool)) 
	countable)) 
{)) 
get))  #
;))# $
set))% (
;))( )
}))* +
public** 
List** 
<** 
Order** 
>** 
order**  
{**! "
get**# &
;**& '
set**( +
;**+ ,
}**- .
public++ 

Recurrence++ 

recurrence++ $
{++% &
get++' *
;++* +
set++, /
;++/ 0
}++1 2
=++3 4
null++5 9
;++9 :
public,, 
object,, 
	sponsored,, 
{,,  !
get,," %
;,,% &
set,,' *
;,,* +
},,, -
=,,. /
null,,0 4
;,,4 5
}-- 
}.. Ê
vC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Niubiz\Consultas\PaymentRequest.cs
	namespace 	
ProyectoTest
 
. 
Models 
. 
Niubiz $
.$ %
	Consultas% .
{		 
public 

class 
	Antifraud 
{ 
public 
string 
clientIp 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
MerchantDefineData !
merchantDefineData" 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
} 
public 

class 
MerchantDefineData #
{ 
public 
string 
MDD4 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
MDD21 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
MDD32 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
MDD75 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
MDD77 
{ 
get !
;! "
set# &
;& '
}( )
} 
public 

class 
PaymentRequest 
{ 
public 
decimal 
amount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
	Antifraud 
	antifraud "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
channel 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
recurrenceMaxAmount )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
=8 9
null: >
;> ?
}   
public!! 

class!! 
PaymentResponse!!  
{"" 
public$$ 
string$$ 

sessionKey$$ 
{$$ 
get$$ 
;$$ 
set$$  #
;$$# $
}$$% &
public%% 
string%% 
expirationTime%% $
{%%$ %
get%%& )
;%%) *
set%%+ .
;%%. /
}%%0 1
}&& 
}'' ñ2
åC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Niubiz\Respuestas\RespuestaAAutorizacionDeTransaccion.cs
	namespace 	
ProyectoTest
 
. 
Models 
. 
Niubiz $
.$ %

Respuestas% /
{ 
public		 

class		 
DataMap		 
{

 
public 
string 
CURRENCY 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
TRANSACTION_DATE &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
TERMINAL 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ACTION_CODE !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
TRACE_NUMBER "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
ECI_DESCRIPTION %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
ECI 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
BRAND 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
CARD 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
MERCHANT 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
STATUS 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

ADQUIRENTE  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
ACTION_DESCRIPTION (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
ID_UNICO 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
AMOUNT 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
PROCESS_CODE "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
RECURRENCE_STATUS '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
TRANSACTION_ID $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
AUTHORIZATION_CODE (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
} 
public   

class   
Header   
{!! 
public"" 
string""  
ecoreTransactionUUID"" *
{""+ ,
get""- 0
;""0 1
set""2 5
;""5 6
}""7 8
public## 
long##  
ecoreTransactionDate## (
{##) *
get##+ .
;##. /
set##0 3
;##3 4
}##5 6
public$$ 
int$$ 
millis$$ 
{$$ 
get$$ 
;$$  
set$$! $
;$$$ %
}$$& '
}%% 
public'' 

class'' 
Order'' 
{(( 
public)) 
string)) 
tokenId)) 
{)) 
get))  #
;))# $
set))% (
;))( )
}))* +
public** 
string** 
purchaseNumber** $
{**% &
get**' *
;*** +
set**, /
;**/ 0
}**1 2
public++ 
string++ 
	productId++ 
{++  !
get++" %
;++% &
set++' *
;++* +
}++, -
public,, 
double,, 
amount,, 
{,, 
get,, "
;,," #
set,,$ '
;,,' (
},,) *
public-- 
string-- 
currency-- 
{--  
get--! $
;--$ %
set--& )
;--) *
}--+ ,
public.. 
double.. 
authorizedAmount.. &
{..' (
get..) ,
;.., -
set... 1
;..1 2
}..3 4
public// 
string// 
authorizationCode// '
{//( )
get//* -
;//- .
set/// 2
;//2 3
}//4 5
public00 
string00 

actionCode00  
{00! "
get00# &
;00& '
set00( +
;00+ ,
}00- .
public11 
string11 
traceNumber11 !
{11" #
get11$ '
;11' (
set11) ,
;11, -
}11. /
public22 
string22 
transactionDate22 %
{22& '
get22( +
;22+ ,
set22- 0
;220 1
}222 3
public33 
string33 
transactionId33 #
{33$ %
get33& )
;33) *
set33+ .
;33. /
}330 1
}44 
public66 

class66 /
#RespuestaAAutorizacionDeTransaccion66 4
{77 
public88 
Header88 
header88 
{88 
get88 "
;88" #
set88$ '
;88' (
}88) *
public99 
Order99 
order99 
{99 
get99  
;99  !
set99" %
;99% &
}99' (
public:: 
DataMap:: 
dataMap:: 
{::  
get::! $
;::$ %
set::& )
;::) *
}::+ ,
};; 
}<< Œ
_C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Producto.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
Producto 
{		 
public

 
int

 

IdProducto

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
Marca 
oMarca 
{ 
get !
;! "
set# &
;& '
}( )
public 
	Categoria 

oCategoria #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
decimal 
Precio 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 

RutaImagen  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
Activo 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
base64 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	extension 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
OpcionesConCosto &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
OpcionesSinCosto &
{' (
get) ,
;, -
set- 0
;0 1
}2 3
public 
string 
OpcionExcluyente &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 
MaxOpcionesSinCosto &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} ä
`C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Provincia.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
	Provincia 
{		 
public

 
string

 
IdProvincia

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
IdDepartamento $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} î
^C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Tiendas.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
Tiendas 
{ 
public 
int 
	IdTiendas 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Descripcion !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
string		 
	Direccion		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public

 
bool

 
Activo

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
} 
} é
fC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\UbicacionTienda.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
UbicacionTienda  
{		 
public

 
int

 
IdUbicacionTienda

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
Nombre 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Distrito 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ´
^C:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Models\Usuario.cs
	namespace 	
ProyectoTest
 
. 
Models 
{ 
public 

class 
Usuario 
{		 
public

 
int

 
	IdUsuario

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
string 
Nombres 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
	Apellidos 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
Correo 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

Contrasena  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
ConfirmarContrasena )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
bool 
EsAdministrador #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
bool 
Activo 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Mensaje 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} í
gC:\Users\cesar\OneDrive\Documentos\Trabajos\GIT_ProyectoCalidad\ProyectoTest\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str '
)' (
]( )
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str )
)) *
]* +
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
["" 
assembly"" 	
:""	 

AssemblyVersion"" 
("" 
$str"" $
)""$ %
]""% &
[## 
assembly## 	
:##	 

AssemblyFileVersion## 
(## 
$str## (
)##( )
]##) *